---
layout: forums
title: 'Solved - House locations'
breadcrumbs:
 - "Plugin Requests": "/forums/plugin-requests.10/"
---
<div class="titleBar">
    <h1>
        <span class="prefix prefixGreen">Solved</span> <a href="{{ '/threads/house-locations.14371/' | prepend: site.baseurl }}">House locations</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="{{ '/forums/plugin-requests.10/' | prepend: site.baseurl }}">Plugin Requests</a>' started by <a class="username"
            dir="auto">kiko</a>, <a href="{{ '/threads/house-locations.14371/' | prepend: site.baseurl }}"><span class="DateTime" title="Jan 7, 2016 at 6:32 PM">Jan 7, 2016</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-159657" class="message" data-author="kiko">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="kiko" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">kiko</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> hello<br /> Someone would he be able to make this plugin compatible with oxide 2 on rust legacy ???<br /> thanks
                        for your answer<br />
                        <br /> I was talking about this plugin: house-loc.lua<br />
                        <br /> i post here this plugin :<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>PLUGIN.Title = &quot;House List&quot;
PLUGIN.Description = &quot;Get all the locations of houses&quot;
PLUGIN.Author = &quot;Reneb&quot;
PLUGIN.Version = &quot;1.1.1&quot;local AllStructures = util.GetStaticPropertyGetter( Rust.StructureMaster, &quot;AllStructures&quot;)
local getStructureMasterOwnerId = util.GetFieldGetter(Rust.StructureMaster, &quot;ownerID&quot;, true)
function PLUGIN:Init()
  -- Bind a slash command
   self.oxminPlugin = cs.findplugin(&quot;oxmin&quot;)
   if (not self.oxminPlugin) then
     error(&quot;Oxmin plugin was not found!&quot;)
     return
   end
   self.oxminPlugin:AddExternalOxminChatCommand(self, &quot;house&quot;, { 3 }, self.cmdHouse)
   self.oxminPlugin:AddExternalOxminChatCommand(self, &quot;housetp&quot;, { 3 }, self.cmdHousetp)
end
local GetComponents, SetComponents = typesystem.GetField( Rust.StructureMaster, &quot;_structureComponents&quot;, bf.private_instance )
local function GetOneConnectedComponents( master )
  local hashset = GetComponents( master )
  local tbl = {}
  local it = hashset:GetEnumerator()
  while (it:MoveNext()) do
  return it.Current
  end
endfunction PLUGIN:cmdHouse(netUser, args)
  -- Get the array that holds all StructureMaster objects in the world.
   if(not(args[1])) then
     rust.SendChatToUser(netUser,&quot;Usage: /house PLAYER&quot;)
     return
   end
   local possible = {}
   local structures = {}
   local userdata
   local userid
   local structure
   local id = 0
  -- Loop all the strucutres
  for i=0, AllStructures().Count-1 do
  -- Print the ID attached to this structure
     id = id + 1
     userid = self:GetStructureOwnerID(AllStructures())
     userdata = self.oxminPlugin:GetUserDataFromID(tostring(userid))
     if(userdata) then
       if(string.find(tostring(userdata.Name), args[1])) then
         structure = GetOneConnectedComponents( AllStructures() )
         if(structure) then
           rust.SendChatToUser(netUser,id .. &quot; - &quot; .. userdata.Name .. &quot; house location: &quot; .. math.ceil(structure.transform.position.x) .. &quot; &quot; .. math.ceil(structure.transform.position.y + 4) .. &quot; &quot; .. math.ceil(structure.transform.position.z) .. &quot;&quot;)
         end
       end
     end
  end
end
function PLUGIN:cmdHousetp(netuser, args)
  -- Get the array that holds all StructureMaster objects in the world.
   if(not(args[1])) then
     rust.SendChatToUser(netuser,&quot;Usage: /housetp HOUSEID&quot;)
     return
   end
   local jumpid = tonumber(args[1])
   local possible = {}
   local structures = {}
   local id = 0
  -- Loop all the strucutres
  for i=0, AllStructures().Count-1 do
  -- Print the ID attached to this structure
     id = id + 1
     if(id == jumpid) then
       local structure = GetOneConnectedComponents( AllStructures() )
       if(not structure) then
         rust.SendChatToUser(netuser,&quot;This house decayed or was removed&quot;)
         return
       end
       local pos = netuser.playerClient.lastKnownPosition
       pos.x = structure.transform.position.x
       pos.y = math.ceil(structure.transform.position.y + 4)
       pos.z = structure.transform.position.z
       rust.ServerManagement():TeleportPlayer( netuser.playerClient.netPlayer, pos )
       local userid = self:GetStructureOwnerID( AllStructures() )
       local userdata = self.oxminPlugin:GetUserDataFromID(tostring(userid))
       if(userdata) then
         rust.SendChatToUser(netuser,userdata.Name .. &quot;'s house&quot;)
       end       timer.Once( 2, function() rust.ServerManagement():TeleportPlayer( netuser.playerClient.netPlayer, pos ) end )
     end
  end
end
-- Get the ID for this structure
function PLUGIN:GetStructureOwnerID(structure)
  return getStructureMasterOwnerId(structure)
end</pre>{% endraw %}
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="editDate"> Last edited by a moderator: <span class="DateTime" title="Jan 12, 2016 at 6:52 PM">Jan 12, 2016</span>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">kiko</a>,</span>
                        <a href="{{ '/threads/house-locations.14371/' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime" title="Jan 7, 2016 at 6:32 PM">Jan 7,
                                2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/house-locations.14371/' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/159657/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-162604" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> That has already been updated, as a C# plugin: <a href="http://oxidemod.org/plugins/house-locations.960/"
                            class="internalLink">House Locations for Rust Legacy | Oxide</a>. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="{{ '/threads/house-locations.14371/#post-162604' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jan 12, 2016 at 6:52 PM">Jan 12, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/house-locations.14371/#post-162604' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/162604/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-162656" class="message" data-author="kiko">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="kiko" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">kiko</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> I made a big mistake, I confused two plugins, sorry sorry sorry, i open another thread<br /> thanks for your
                        answerd <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">kiko</a>,</span>
                        <a href="{{ '/threads/house-locations.14371/#post-162656' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jan 12, 2016 at 8:25 PM">Jan 12, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/house-locations.14371/#post-162656' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/162656/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
</ol>
