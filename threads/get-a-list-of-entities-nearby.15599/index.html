---
layout: forums
title: 'Get a list of entities nearby'
breadcrumbs:
 - "Plugin Development": "/forums/plugin-development.105/"
 - "Rust Development": "/forums/rust-development.4/"
---
<div class="titleBar">
    <h1>
        <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/' | prepend: site.baseurl }}">Get a list of entities nearby</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="{{ '/forums/rust-development.4/' | prepend: site.baseurl }}">Rust Development</a>' started by <a class="username"
            dir="auto">master_clown</a>, <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/' | prepend: site.baseurl }}"><span class="DateTime" title="Feb 9, 2016 at 5:52 PM">Feb 9,
                2016</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-174768" class="message" data-author="master_clown">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="master_clown" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">master_clown</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> How can I get a list of entities of some type which locate inside a circle with some radius? <div
                            class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">master_clown</a>,</span>
                        <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Feb 9, 2016 at 5:52 PM">Feb 9, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/174768/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-174792" class="message staff" data-author="Calytic">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a href="members/calytic.58712/" class="avatar Avm" data-avatarhtml="true"><img src="data/avatars/m/58/58712.jpg?1463423255" width="96" height="96" alt="Calytic" /></a>
                </div>
                <h3 class="userText">
                    <a href="members/calytic.58712/" class="username" dir="auto" itemprop="name">Calytic</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                    <em class="userBanner bannerGreen wrapped" itemprop="title"><span class="before"></span><strong>Community Mod</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>
Vector3 position = new Vector3(x, y, z);
float distance = 20f;
List&lt;BaseEntity&gt; list = new List&lt;BaseEntity&gt;();
Vis.Entities&lt;BaseEntity&gt;(position, distance, list);foreach(BaseEntity entity in list) {
      // do something clever
}
</pre>{% endraw %}
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a href="members/calytic.58712/" class="username author" dir="auto">Calytic</a>,</span>
                        <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-174792' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Feb 9, 2016 at 7:05 PM">Feb 9, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-174792' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/174792/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-177965" class="message" data-author="master_clown">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="master_clown" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">master_clown</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Calytic">
                            <aside>
                                <div class="attribution type">Calytic said: <a href="#post-174792" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            {% raw %}<pre>
Vector3 position = new Vector3(x, y, z);
float distance = 20f;
List&lt;BaseEntity&gt; list = new List&lt;BaseEntity&gt;();
Vis.Entities&lt;BaseEntity&gt;(position, distance, list);foreach(BaseEntity entity in list) {
      // do something clever
}
</pre>{% endraw %}
                                        </div>
                                    </div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>By the way, what is 20f distance? 20 metres? I know there are own units of mesurement, but are 20 units equal to 20 metres (approximately) ? <div
                            class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">master_clown</a>,</span>
                        <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-177965' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Feb 18, 2016 at 2:08 PM">Feb 18, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-177965' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/177965/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-177968" class="message staff" data-author="Calytic">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a href="members/calytic.58712/" class="avatar Avm" data-avatarhtml="true"><img src="data/avatars/m/58/58712.jpg?1463423255" width="96" height="96" alt="Calytic" /></a>
                </div>
                <h3 class="userText">
                    <a href="members/calytic.58712/" class="username" dir="auto" itemprop="name">Calytic</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                    <em class="userBanner bannerGreen wrapped" itemprop="title"><span class="before"></span><strong>Community Mod</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> I don&#039;t know.<br />
                        <br /> Only hard indication I have is a single unit (1) is 4 feet. Making 20f (f for float) exactly 80 feet. So a little more than a meter per unit, actually in that case. <div
                            class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a href="members/calytic.58712/" class="username author" dir="auto">Calytic</a>,</span>
                        <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-177968' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Feb 18, 2016 at 2:20 PM">Feb 18, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-177968' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/177968/permalink">#4</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-205419" class="message" data-author="Absolut">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Absolut" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Absolut</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Calytic, <br />
                        <br /> I am trying to use this to find all ToolCupboards within a 20f radius but I am getting the error: error CS0103: The name `z&#039; does not exist in the current
                        context<br />
                        <br /> Here is the code:<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>void GetPlayerTCs(BasePlayer player, BasePlayer target)
        {
            ToolCupboardPrefabId = StringPool.Get(ToolCupboardPrefab);
            if (AuthorizedTC(player))
               
            {
                //SendReply(player, $&quot;You are authorized on a nearby ToolCupboard - target is {target}&quot;);
                Vector3 position = new Vector3(x, y, z);
                float distance = 20f;
                List&lt;BaseEntity&gt; list = new List&lt;BaseEntity&gt;();
                Vis.Entities&lt;BaseEntity&gt;(position, distance, list);                foreach (BaseEntity entity in list)
                {
                    if (entity.prefabID == ToolCupboardPrefabId)
                    {
                        SendReply(player, &quot;There is a ToolCupboard nearby that you are authroized on!&quot;);
                        //entity.authorizedPlayers.Add(new ProtoBuf.PlayerNameID() { userid = target.player.userID, username = target.player.displayName });
                    }
                }
            }
            else if (!AuthorizedTC(player)) SendReply(player, &quot;You are not authorized on a nearby ToolCupboard&quot;);        }</pre>{% endraw %}
                        </div>what am I doing wrong? Thanks!!!! <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Absolut</a>,</span>
                        <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-205419' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 13, 2016 at 12:37 AM">May 13, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-205419' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/205419/permalink">#5</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-205421" class="message" data-author="sqroot">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="sqroot" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">sqroot</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Absolut">
                            <aside>
                                <div class="attribution type">Absolut said: <a href="#post-205419" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Calytic,<br />
                                        <br /> I am trying to use this to find all ToolCupboards within a 20f radius but I am getting the error: error CS0103: The name `z&#039; does not exist in the
                                        current context<br />
                                        <br /> Here is the code:<br />
                                        <br />
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            {% raw %}<pre>void GetPlayerTCs(BasePlayer player, BasePlayer target)
        {
            ToolCupboardPrefabId = StringPool.Get(ToolCupboardPrefab);
            if (AuthorizedTC(player))
              
            {
                //SendReply(player, $&quot;You are authorized on a nearby ToolCupboard - target is {target}&quot;);
                Vector3 position = new Vector3(x, y, z);
                float distance = 20f;
                List&lt;BaseEntity&gt; list = new List&lt;BaseEntity&gt;();
                Vis.Entities&lt;BaseEntity&gt;(position, distance, list);                foreach (BaseEntity entity in list)
                {
                    if (entity.prefabID == ToolCupboardPrefabId)
                    {
                        SendReply(player, &quot;There is a ToolCupboard nearby that you are authroized on!&quot;);
                        //entity.authorizedPlayers.Add(new ProtoBuf.PlayerNameID() { userid = target.player.userID, username = target.player.displayName });
                    }
                }
            }
            else if (!AuthorizedTC(player)) SendReply(player, &quot;You are not authorized on a nearby ToolCupboard&quot;);        }</pre>{% endraw %}
                                        </div>what am I doing wrong? Thanks!!!!
                                    </div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>How is your program supposed to know what coordinates to find close entities at?<br /> x, y and z need to be specified. You&#039;re passing undeclared variables. <div
                            class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">sqroot</a>,</span>
                        <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-205421' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 13, 2016 at 12:42 AM">May 13, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-205421' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/205421/permalink">#6</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-205426" class="message" data-author="Absolut">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Absolut" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Absolut</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> I am very new so bare with me! I tried to change it to: Vector3 position =<a
                            href="http://www.google.com/search?q=new+msdn.microsoft.com" target="_blank" class="externalLink" rel="nofollow">new</a> Vector3() the moment after I posted this because I
                        kind of figured the same thing.. that the system isn&#039;t going to assume I want the current position of the argument provider (BasePlayer)<br />
                        <br /> so long story short, how would I have it pass the BasePlayer coordinates executing the chat command?<br />
                        <br /> Would it be like....<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>        [ChatCommand(&quot;tcauth&quot;)]
        void cmdAuthPlayer(BasePlayer player, string cmd, string[] args)
        {
            if (player != null)
            if (args.Length == 0)
            {
                    SendReply(player, &quot;Syntax: /tcauth &lt;PARTIAL_PLAYERNAME&gt;&quot;);
                return;
            }            if (args.Length == 1)
            {
                var partialPlayerName = args[0];
                var foundPlayers = FindPlayer(partialPlayerName);
                if (foundPlayers.Count == 0)
                {
                    SendReply(player, &quot;No players found&quot;);
                    return;
                }
                if (foundPlayers.Count &gt; 1)
                {
                    SendReply(player, &quot;Multiple players found&quot;);
                    return;
                }
                if (foundPlayers[0] != null)
                {
                    Vector3 position = new Vector3(player);
                    //SendReply(player, $&quot;Target player is {foundPlayers[0]}&quot;);
                    GetPlayerTCs(player, foundPlayers[0], position);
                    return;
                }
            }
        }</pre>{% endraw %}
                        </div>......<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>void GetPlayerTCs(BasePlayer player, BasePlayer target, Vector3 position)
        {
            ToolCupboardPrefabId = StringPool.Get(ToolCupboardPrefab);
            if (AuthorizedTC(player))
              
            {
                //SendReply(player, $&quot;You are authorized on a nearby ToolCupboard - target is {target}&quot;);
                float distance = 20f;
                List&lt;BaseEntity&gt; list = new List&lt;BaseEntity&gt;();
                Vis.Entities&lt;BaseEntity&gt;(position, distance, list);                foreach (BaseEntity entity in list)
                {
                    if (entity.prefabID == ToolCupboardPrefabId)
                    {
                        SendReply(player, &quot;There is a ToolCupboard nearby that you are authroized on!&quot;);
                        //entity.authorizedPlayers.Add(new ProtoBuf.PlayerNameID() { userid = target.player.userID, username = target.player.displayName });
                    }
                }
            }
            else if (!AuthorizedTC(player)) SendReply(player, &quot;You are not authorized on a nearby ToolCupboard&quot;);        }</pre>{% endraw %}
                        </div>[DOUBLEPOST=1463097736][/DOUBLEPOST]actually is it:<br />
                        <br /> Vector3 position =<a href="http://www.google.com/search?q=new+msdn.microsoft.com" target="_blank" class="externalLink" rel="nofollow">new</a>
                        Vector3(player.transform.position)<br />
                        <br /> ? <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="editDate"> Last edited by a moderator: <span class="DateTime" title="May 13, 2016 at 1:02 AM">May 13, 2016</span>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Absolut</a>,</span>
                        <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-205426' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 13, 2016 at 12:53 AM">May 13, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-205426' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/205426/permalink">#7</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-205432" class="message" data-author="sqroot">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="sqroot" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">sqroot</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Absolut">
                            <aside>
                                <div class="attribution type">Absolut said: <a href="#post-205426" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">I am very new so bare with me! I tried to change it to: Vector3 position =<a href="http://www.google.com/search?q=new+msdn.microsoft.com"
                                            target="_blank" class="externalLink" rel="nofollow">new</a> Vector3() the moment after I posted this because I kind of figured the same thing.. that the
                                        system isn&#039;t going to assume I want the current position of the argument provider (BasePlayer)<br />
                                        <br /> so long story short, how would I have it pass the BasePlayer coordinates executing the chat command?<br />
                                        <br /> Would it be like....<br />
                                        <br />
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            {% raw %}<pre>        [ChatCommand(&quot;tcauth&quot;)]
        void cmdAuthPlayer(BasePlayer player, string cmd, string[] args)
        {
            if (player != null)
            if (args.Length == 0)
            {
                    SendReply(player, &quot;Syntax: /tcauth &lt;PARTIAL_PLAYERNAME&gt;&quot;);
                return;
            }            if (args.Length == 1)
            {
                var partialPlayerName = args[0];
                var foundPlayers = FindPlayer(partialPlayerName);
                if (foundPlayers.Count == 0)
                {
                    SendReply(player, &quot;No players found&quot;);
                    return;
                }
                if (foundPlayers.Count &gt; 1)
                {
                    SendReply(player, &quot;Multiple players found&quot;);
                    return;
                }
                if (foundPlayers[0] != null)
                {
                    Vector3 position = new Vector3(player);
                    //SendReply(player, $&quot;Target player is {foundPlayers[0]}&quot;);
                    GetPlayerTCs(player, foundPlayers[0], position);
                    return;
                }
            }
        }</pre>{% endraw %}
                                        </div>......<br />
                                        <br />
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            {% raw %}<pre>void GetPlayerTCs(BasePlayer player, BasePlayer target, Vector3 position)
        {
            ToolCupboardPrefabId = StringPool.Get(ToolCupboardPrefab);
            if (AuthorizedTC(player))
              
            {
                //SendReply(player, $&quot;You are authorized on a nearby ToolCupboard - target is {target}&quot;);
                float distance = 20f;
                List&lt;BaseEntity&gt; list = new List&lt;BaseEntity&gt;();
                Vis.Entities&lt;BaseEntity&gt;(position, distance, list);                foreach (BaseEntity entity in list)
                {
                    if (entity.prefabID == ToolCupboardPrefabId)
                    {
                        SendReply(player, &quot;There is a ToolCupboard nearby that you are authroized on!&quot;);
                        //entity.authorizedPlayers.Add(new ProtoBuf.PlayerNameID() { userid = target.player.userID, username = target.player.displayName });
                    }
                }
            }
            else if (!AuthorizedTC(player)) SendReply(player, &quot;You are not authorized on a nearby ToolCupboard&quot;);        }</pre>{% endraw %}
                                        </div>
                                    </div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>No, that will not work.<br /> Programs are stupid.<br /> The vector constructor is only defined for a certain set of parameters, it doesn&#039;t know how to extract the
                        position from a player.<br /> I think you should check out a beginners guide on C# to get you started, writing a plugin straight away may be incredibly overwhelming and
                        confusing (mostly because you don&#039;t understand why you gotta use certain syntax for certain things).<br /> You should be able to use player.transform.position to retrieve
                        the position vector, but please learn a bit more about C#, otherwise you&#039;ll frequently hit very frustrating and confusing walls while you could be learning a lot more
                        efficiently <img src="{{ '/assets/styles/default/xenforo/clear.png' | prepend: site.baseurl }}" class="mceSmilieSprite mceSmilie1" alt=":)" title="Smile    :)" />
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">sqroot</a>,</span>
                        <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-205432' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 13, 2016 at 1:08 AM">May 13, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-205432' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/205432/permalink">#8</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-205436" class="message" data-author="Absolut">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Absolut" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Absolut</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> So instead of just posting this.. <br />
                        <br /> Vector3 position = new Vector3(player.transform.position.x, player.transform.position.y, player.transform.position.z);<br />
                        <br /> which I figured out &quot;eventually&quot; you decided to lecture me on learning C# : )<br />
                        <br />
                        <br />
                        <br /> Thanks! <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Absolut</a>,</span>
                        <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-205436' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 13, 2016 at 1:13 AM">May 13, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-205436' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/205436/permalink">#9</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-205437" class="message" data-author="sqroot">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="sqroot" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">sqroot</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> You do not need to initialize a new vector. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">sqroot</a>,</span>
                        <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-205437' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 13, 2016 at 1:19 AM">May 13, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-205437' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/205437/permalink">#10</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-205444" class="message" data-author="Absolut">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Absolut" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Absolut</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="sqroot">
                            <aside>
                                <div class="attribution type">sqroot said: <a href="#post-205437" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">You do not need to initialize a new vector.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>I appreciate your help. I get it, I am not a plugin developer. I&#039;ll take my concerns elsewhere. <br />
                        <br /> Regards, <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Absolut</a>,</span>
                        <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-205444' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 13, 2016 at 1:27 AM">May 13, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-205444' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/205444/permalink">#11</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-205447" class="message" data-author="sqroot">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="sqroot" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">sqroot</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Absolut">
                            <aside>
                                <div class="attribution type">Absolut said: <a href="#post-205444" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">I appreciate your help. I get it, I am not a plugin developer. I&#039;ll take my concerns elsewhere.<br />
                                        <br /> Regards,</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>I&#039;m not trying to scare you off, when I started working on Lua plugins for a different game eight years ago I got incredibly frustrated with stuff because I
                        didn&#039;t actually understand what I was doing and always had to ask others for help. I wish I had done what I&#039;m recommending to you: Learn the basics beforehand,
                        because that experience scared me off programming for a long time.<br /> Learn stuff and implement what you learned in your plugin, don&#039;t just try to randomly brute force
                        solutions for your plugin because that will be very unrewarding. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">sqroot</a>,</span>
                        <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-205447' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 13, 2016 at 1:31 AM">May 13, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-205447' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/205447/permalink">#12</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-205449" class="message" data-author="DylanSMR">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="DylanSMR" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">DylanSMR</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="sqroot">
                            <aside>
                                <div class="attribution type">sqroot said: <a href="#post-205447" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">I&#039;m not trying to scare you off, when I started working on Lua plugins for a different game eight years ago I got incredibly frustrated with
                                        stuff because I didn&#039;t actually understand what I was doing and always had to ask others for help. I wish I had done what I&#039;m recommending to you:
                                        Learn the basics beforehand, because that experience scared me off programming for a long time.<br /> Learn stuff and implement what you learned in your plugin,
                                        don&#039;t just try to randomly brute force solutions for your plugin because that will be very unrewarding.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Indeed. That&#039;s the same thing I did. I started off with LUA and I quit nearly every 5 minutes as I got very frustrated. After some time I switched over to
                        C#(Honestly I still don&#039;t understand LUA lol) and learned it from there. Of course I looked at nearly every new plugin posted for some help. But I always had people in
                        this community help me like <a href="https://oxidemod.org/members/1115/" class="username" data-user="1115, @Wulf">@Wulf</a>, <a href="https://oxidemod.org/members/36455/"
                            class="username" data-user="36455, @k1lly0u">@k1lly0u</a>, etc. So yeah as he said he&#039;s not trying to scare you off. More so trying to get you to learn better then how
                        he did.<br />
                        <br /> You&#039;ll never fully understand C# as simply there is just too much information. So don&#039;t ever get frustrated when you mess up or you get confused. <div
                            class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">DylanSMR</a>,</span>
                        <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-205449' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 13, 2016 at 1:38 AM">May 13, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-205449' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/205449/permalink">#13</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-400047" class="message" data-author="FireBurst">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="FireBurst" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">FireBurst</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>private Vector3 getNewPosition(BasePlayer player)
        {
            PlayerData2 data = Interface.Oxide.DataFileSystem.ReadObject&lt;PlayerData2&gt;($&quot;{player.userID}&quot;);
            if (!data.isActiveH) return new Vector3(0,0,0); //if not active, return an empty vector... can't use null.
            float posx = data.posxH;
            float posy = data.posyH;
            float posz = data.poszH;
            Vector3 final = new Vector3(posx, posy, posz);
     
            return final;
        }</pre>{% endraw %}
                        </div><br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>var pos = (Vector3)Plugin.CallHook(&quot;getNewPosition&quot;, player);  
if (pos is Vector3)
           {
                float distance = 5f;
                List&lt;BaseEntity&gt; list = new List&lt;BaseEntity&gt;();
                Vis.Entities&lt;BaseEntity&gt;(pos, distance, list);
               int count = 0;                foreach (BaseEntity entity in list)
                {
                       if (entity.PrefabName.Contains(&quot;tool cupboard&quot;))
                    {
                      count++;
                    }
                    
                }
               Puts(&quot;Count = &quot; + count.ToString());
           }
                </pre>{% endraw %}
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="editDate"> Last edited by a moderator: <span class="DateTime" title="May 10, 2018 at 11:14 PM">May 10, 2018</span>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">FireBurst</a>,</span>
                        <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-400047' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 10, 2018 at 10:30 PM">May 10, 2018</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-400047' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/400047/permalink">#14</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-400052" class="message" data-author="FireBurst">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="FireBurst" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">FireBurst</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> I am using this code, it works fine thanks. Only thing is when I test this, it detects the cupboard but I get a
                        count = 2 as result. Looks like it double check. How? (previous codes) <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">FireBurst</a>,</span>
                        <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-400052' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 10, 2018 at 11:14 PM">May 10, 2018</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-400052' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/400052/permalink">#15</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-400055" class="message" data-author="Kappasaurus">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Kappasaurus" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Kappasaurus</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="FireBurst">
                            <aside>
                                <div class="attribution type">FireBurst said: <a href="#post-400052" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">I am using this code, it works fine thanks. Only thing is when I test this, it detects the cupboard but I get a count = 2 as result. Looks like
                                        it double check. How? (previous codes)</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>You can return null if you change the return type to a nullable, the shorthand for which is &quot;Vector3?&quot;. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Kappasaurus</a>,</span>
                        <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-400055' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 11, 2018 at 12:17 AM">May 11, 2018</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/get-a-list-of-entities-nearby.15599/#post-400055' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/400055/permalink">#16</a>
                </div>
            </div>
        </div>
    </li>
</ol>
