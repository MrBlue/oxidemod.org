---
layout: forums
title: 'NullReferenceException in MySql.Data.MySqlClient.MySqlDataReader.Close ()'
breadcrumbs:
 - "Plugin Development": "/forums/plugin-development.105/"
 - "Rust Development": "/forums/rust-development.4/"
---
<div class="titleBar">
    <h1>
        <a href="{{ '/threads/nullreferenceexception-in-mysql-data-mysqlclient-mysqldatareader-close.24987/' | prepend: site.baseurl }}">NullReferenceException in
            MySql.Data.MySqlClient.MySqlDataReader.Close ()</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="{{ '/forums/rust-development.4/' | prepend: site.baseurl }}">Rust Development</a>' started by <a class="username" dir="auto">Kovalev
            PWnz</a>, <a href="{{ '/threads/nullreferenceexception-in-mysql-data-mysqlclient-mysqldatareader-close.24987/' | prepend: site.baseurl }}"><span class="DateTime"
                title="Apr 16, 2017 at 6:51 AM">Apr 16, 2017</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-315730" class="message" data-author="Kovalev PWnz">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Kovalev PWnz" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Kovalev PWnz</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>03:46 [Error] Failed to call hook 'Unload' on plugin 'MySqlConnector v4.2017.301' (NullReferenceException: Object reference not set to an instance of an object)
03:46 [Stacktrace]   at MySql.Data.MySqlClient.MySqlDataReader.Close () [0x00000] in &lt;filename unknown&gt;:0
  at MySql.Data.MySqlClient.MySqlConnection.Close () [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Core.MySql.Libraries.MySql.CloseDb (Oxide.Core.Database.Connection db) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Plugins.MySqlDatabase.Close () [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Plugins.MySqlConnector.Unload () [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Plugins.MySqlConnector.DirectCallHook (System.String name, System.Object&amp; ret, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Plugins.CSharpPlugin.InvokeMethod (HookMethod method, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Core.Plugins.CSPlugin.OnCallHook (System.String name, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Core.Plugins.Plugin.CallHook (System.String hook, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0 </pre>{% endraw %}
                        </div>It seems that this error occurs if there is an unfinished transaction. Maybe, need to update MySql.Data.dll lib <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Kovalev PWnz</a>,</span>
                        <a href="{{ '/threads/nullreferenceexception-in-mysql-data-mysqlclient-mysqldatareader-close.24987/' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Apr 16, 2017 at 6:51 AM">Apr 16, 2017</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/nullreferenceexception-in-mysql-data-mysqlclient-mysqldatareader-close.24987/' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/315730/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-315733" class="message" data-author="Resistance">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Resistance" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Resistance</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> You need to talk to the coder who made you the custom plugin <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Resistance</a>,</span>
                        <a href="{{ '/threads/nullreferenceexception-in-mysql-data-mysqlclient-mysqldatareader-close.24987/#post-315733' | prepend: site.baseurl }}" title="Permalink"
                            class="datePermalink"><span class="DateTime" title="Apr 16, 2017 at 7:06 AM">Apr 16, 2017</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/nullreferenceexception-in-mysql-data-mysqlclient-mysqldatareader-close.24987/#post-315733' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/315733/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-315736" class="message" data-author="Kovalev PWnz">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Kovalev PWnz" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Kovalev PWnz</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Resistance">
                            <aside>
                                <div class="attribution type">Resistance said: <a href="#post-315733" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">You need to talk to the coder who made you the custom plugin</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Talk to yourself? <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Kovalev PWnz</a>,</span>
                        <a href="{{ '/threads/nullreferenceexception-in-mysql-data-mysqlclient-mysqldatareader-close.24987/#post-315736' | prepend: site.baseurl }}" title="Permalink"
                            class="datePermalink"><span class="DateTime" title="Apr 16, 2017 at 7:10 AM">Apr 16, 2017</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/nullreferenceexception-in-mysql-data-mysqlclient-mysqldatareader-close.24987/#post-315736' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/315736/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-315861" class="message" data-author="Kappasaurus">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Kappasaurus" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Kappasaurus</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Resistance">
                            <aside>
                                <div class="attribution type">Resistance said: <a href="#post-315733" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">You need to talk to the coder who made you the custom plugin</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Don&#039;t think that&#039;s a custom plugin. <a href="http://oxidemod.org/extensions/mysql-extension.901/" class="internalLink">MySQL Extension | Oxide</a>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Kappasaurus</a>,</span>
                        <a href="{{ '/threads/nullreferenceexception-in-mysql-data-mysqlclient-mysqldatareader-close.24987/#post-315861' | prepend: site.baseurl }}" title="Permalink"
                            class="datePermalink"><span class="DateTime" title="Apr 16, 2017 at 5:02 PM">Apr 16, 2017</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/nullreferenceexception-in-mysql-data-mysqlclient-mysqldatareader-close.24987/#post-315861' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/315861/permalink">#4</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-315935" class="message" data-author="Resistance">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Resistance" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Resistance</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> I done a search came up with nothing its why I thought it was a custom one well in that case then it needs posted
                        in the plugin topic for support <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Resistance</a>,</span>
                        <a href="{{ '/threads/nullreferenceexception-in-mysql-data-mysqlclient-mysqldatareader-close.24987/#post-315935' | prepend: site.baseurl }}" title="Permalink"
                            class="datePermalink"><span class="DateTime" title="Apr 16, 2017 at 7:47 PM">Apr 16, 2017</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/nullreferenceexception-in-mysql-data-mysqlclient-mysqldatareader-close.24987/#post-315935' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/315935/permalink">#5</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-315940" class="message" data-author="Kappasaurus">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Kappasaurus" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Kappasaurus</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Resistance">
                            <aside>
                                <div class="attribution type">Resistance said: <a href="#post-315935" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">I done a search came up with nothing its why I thought it was a custom one well in that case then it needs posted in the plugin topic for support
                                    </div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>There is actually not a support thread, it&#039;s part of Oxide. This is where it belongs.<br /> [DOUBLEPOST=1492368826][/DOUBLEPOST]Well, or in the Rust Discussion. <div
                            class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Kappasaurus</a>,</span>
                        <a href="{{ '/threads/nullreferenceexception-in-mysql-data-mysqlclient-mysqldatareader-close.24987/#post-315940' | prepend: site.baseurl }}" title="Permalink"
                            class="datePermalink"><span class="DateTime" title="Apr 16, 2017 at 7:53 PM">Apr 16, 2017</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/nullreferenceexception-in-mysql-data-mysqlclient-mysqldatareader-close.24987/#post-315940' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/315940/permalink">#6</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-316021" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> MySqlConnector is the name of the plugin the OP is using, which is not from Oxide. Without seeing code, it&#039;s
                        hard to know exactly what the OP is doing with the plugin for it to throw this error. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="{{ '/threads/nullreferenceexception-in-mysql-data-mysqlclient-mysqldatareader-close.24987/#post-316021' | prepend: site.baseurl }}" title="Permalink"
                            class="datePermalink"><span class="DateTime" title="Apr 16, 2017 at 10:59 PM">Apr 16, 2017</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/nullreferenceexception-in-mysql-data-mysqlclient-mysqldatareader-close.24987/#post-316021' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/316021/permalink">#7</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-316160" class="message" data-author="Kovalev PWnz">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Kovalev PWnz" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Kovalev PWnz</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>using System;
using System.Collections.Generic;
using Oxide.Core.MySql.Libraries;
using Oxide.Core.Database;namespace Oxide.Plugins {
    [Info(&quot;MySqlTest&quot;, &quot;MySqlTest&quot;, &quot;1.0.0&quot;)]
    public class MySqlTest : RustPlugin {
        Oxide.Core.MySql.Libraries.MySql mySql;
        Connection connection;        void Init() {
            mySql = new Oxide.Core.MySql.Libraries.MySql();
            connection = mySql.OpenDb(&quot;localhost&quot;, 3306, &quot;oxide&quot;, &quot;oxide&quot;, &quot;oxide&quot;, this, true);            mySql.Query(new Sql(&quot;SELECT * FROM players LIMIT 10&quot;), connection, (List&lt;Dictionary&lt;string, object&gt;&gt; rows) =&gt; {
                foreach (var row in rows) {
                    Puts(Convert.ToString(row[&quot;steamID&quot;]));
                }
            });
        }        void Unload() {
            // eg last transaction
            mySql.Query(new Sql(&quot;SELECT * FROM players LIMIT 10&quot;), connection, (List&lt;Dictionary&lt;string, object&gt;&gt; rows) =&gt; {
                foreach (var row in rows) {
                    Puts(Convert.ToString(row[&quot;steamID&quot;]));
                }
            });            mySql.CloseDb(connection);
        }
    }
}
</pre>{% endraw %}
                        </div>
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>18:01 [Info] Unloaded plugin MySqlTest v1.0.0 by MySqlTest
6:01 PM [Error] MySql handle raised an exception (NullReferenceException: Object reference not set to an instance of an object)
6:01 PM [Stacktrace]   at MySql.Data.MySqlClient.MySqlConnection.get_ServerThread () [0x00000] in &lt;filename unknown&gt;:0
  at MySql.Data.MySqlClient.MySqlConnection.Abort () [0x00000] in &lt;filename unknown&gt;:0
  at (wrapper remoting-invoke-with-check) MySql.Data.MySqlClient.MySqlConnection:Abort ()
  at MySql.Data.MySqlClient.MySqlDataReader.NextResult () [0x00000] in &lt;filename unknown&gt;:0
  at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader (CommandBehavior behavior) [0x00000] in &lt;filename unknown&gt;:0
  at MySql.Data.MySqlClient.MySqlCommand.AsyncExecuteWrapper (Int32 type, CommandBehavior behavior) [0x00000] in &lt;filename unknown&gt;:0
18:01 [Error] MySql command callback raised an exception (NullReferenceException: Object reference not set to an instance of an object)
18:01 [Stacktrace]   at Oxide.Plugins.MySqlTest.&lt;Unload&gt;m__1 (System.Collections.Generic.List`1 rows) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Core.MySql.Libraries.MySql+MySqlQuery+&lt;&gt;c__DisplayClass24_0.&lt;Handle&gt;b__0 () [0x00000] in &lt;filename unknown&gt;:0 </pre>{% endraw %}
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Kovalev PWnz</a>,</span>
                        <a href="{{ '/threads/nullreferenceexception-in-mysql-data-mysqlclient-mysqldatareader-close.24987/#post-316160' | prepend: site.baseurl }}" title="Permalink"
                            class="datePermalink"><span class="DateTime" title="Apr 17, 2017 at 2:07 PM">Apr 17, 2017</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/nullreferenceexception-in-mysql-data-mysqlclient-mysqldatareader-close.24987/#post-316160' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/316160/permalink">#8</a>
                </div>
            </div>
        </div>
    </li>
</ol>
