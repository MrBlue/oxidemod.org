---
layout: forums
title: 'Rust - Building sharing (build/demolish/rotate)'
breadcrumbs:
 - "Plugin Requests": "/forums/plugin-requests.10/"
---
<div class="titleBar">
    <h1>
        <span class="prefix prefixRed">Rust</span> <a href="{{ '/threads/building-sharing-build-demolish-rotate.17828/' | prepend: site.baseurl }}">Building sharing (build/demolish/rotate)</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="{{ '/forums/plugin-requests.10/' | prepend: site.baseurl }}">Plugin Requests</a>' started by <a class="username"
            dir="auto">IŊŦΣCҴ¤Ŋ</a>, <a href="{{ '/threads/building-sharing-build-demolish-rotate.17828/' | prepend: site.baseurl }}"><span class="DateTime" title="May 6, 2016 at 11:06 AM">May 6,
                2016</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-203381" class="message" data-author="IŊŦΣCҴ¤Ŋ">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="IŊŦΣCҴ¤Ŋ" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">IŊŦΣCҴ¤Ŋ</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">Good day,<br />
                        <br /> I have recently started up my own Rust server and although I am still looking at the final direction I am going to go with it there is some things I would like to
                        improve on the QoL for players.<br />
                        <br /> I know there are many plugins that does similar or close to what I need, but rather than having 2 or 3 plugins to do something I am looking to create something specific
                        to achieve my goals.<br />
                        <br /> At this point I have a fresh server install with Oxide only.<br />
                        <br /> My first goal I want to achieve is something similar to <a href="http://oxidemod.org/plugins/hammer-time.1711/" class="internalLink">Hammer Time for Rust | Oxide</a>,
                        which will allow players to demolish and rotate building blocks at any given time. I have read through the code for the plugin and I do understand some of it, but it is not
                        ideal for what I want to achieve.<br />
                        <br /> To be able to demolish and rotate structures the following criteria should be met:<br />
                        <ol>
                            <li>The player trying to rotate or demolish the structure should be in a shared list from the player who placed it (this will stop raiders from getting cupboard access and
                                just using demolish to clear a base).</li>
                            <li>The player trying to rotate or demolish the structure should be authorized by the tool cupboard. The reasoning behind this is, if there are friends which shouldn&#039;t
                                be building or demolishing they cannot go around and muck things up.</li>
                        </ol>I am not looking for someone to write the plugin for me, just some advice or sample code how to check/do these things.<br />
                        <br /> So far I have gathered I will need to:<br />
                        <ol>
                            <li>On Entity creation store the Entity Id and Owner Id relation.</li>
                            <li>Create a list to store Owner Id and Player Id relation.</li>
                            <li>Check if the Player Id (one using demolish or rotate) is in the list as per point 2 and if the Entity Id belongs to the Owner Id as per point 1.</li>
                            <li>Check if the Player Id has building privileges.</li>
                        </ol>Any advice will be appreciated.<br />
                        <br /> Regards <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">IŊŦΣCҴ¤Ŋ</a>,</span>
                        <a href="{{ '/threads/building-sharing-build-demolish-rotate.17828/' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 6, 2016 at 11:06 AM">May 6, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/building-sharing-build-demolish-rotate.17828/' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/203381/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-203383" class="message" data-author="k1lly0u">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="k1lly0u" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">k1lly0u</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">The first can be done on the go by using the OwnerID variable attached to the building block in question,
                        therefore sparing you from the need to store the owner information yourself. <br /> You can use friendsapi and clans to handle the friends of the owner. Then all you would need
                        to do is call either or both of those plugins and see if the player is friends with the owner of the block.<br /> Tool cupboard check can be done easily and there is plenty of
                        examples floating around. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">k1lly0u</a>,</span>
                        <a href="{{ '/threads/building-sharing-build-demolish-rotate.17828/#post-203383' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 6, 2016 at 11:15 AM">May 6, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/building-sharing-build-demolish-rotate.17828/#post-203383' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/203383/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-203791" class="message" data-author="IŊŦΣCҴ¤Ŋ">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="IŊŦΣCҴ¤Ŋ" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">IŊŦΣCҴ¤Ŋ</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">Good day,<br />
                        <br /> Thanks for the response. I did consider the friends or clan API prior, but considering that some people might play with friends on in a clan they would build a compound
                        each with their own base (or 2 or 3) people together apart from the rest.<br />
                        <br /> So I felt a separate list for this would be more acceptable than using a API that might be used by other plugins and then forces players to give out access to other
                        people they may not want to have on there.<br />
                        <br /> I will look at the friends API and how they have done that and work from there.<br />
                        <br /> Going forward, is there a way to hook into the Building Menu (right click with Hammer). I know there is the OnHammerHit which I can hook, but I would rather have the
                        flags set on right click.<br />
                        <br /> Currently I am right now using a RaycastHit in OnPlayerInput (checks for right click and if active item is the hammer) to check if there is something in range, but has
                        yet figured out how to get the entity and see if it is a block. Though, if there is a way to hook into the Building Menu it would be better to use.<br />
                        <br /> Regards <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">IŊŦΣCҴ¤Ŋ</a>,</span>
                        <a href="{{ '/threads/building-sharing-build-demolish-rotate.17828/#post-203791' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 7, 2016 at 1:44 PM">May 7, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/building-sharing-build-demolish-rotate.17828/#post-203791' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/203791/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
</ol>
