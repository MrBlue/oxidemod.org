---
layout: forums
title: 'Converting BasePlayer to ProtoBuf.PlayerNameID?'
breadcrumbs:
 - "Plugin Development": "/forums/plugin-development.105/"
 - "Rust Development": "/forums/rust-development.4/"
---
<div class="titleBar">
    <h1>
        <a href="{{ '/threads/converting-baseplayer-to-protobuf-playernameid.22444/' | prepend: site.baseurl }}">Converting BasePlayer to ProtoBuf.PlayerNameID?</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="{{ '/forums/rust-development.4/' | prepend: site.baseurl }}">Rust Development</a>' started by <a class="username" dir="auto">Sir
            BenSon</a>, <a href="{{ '/threads/converting-baseplayer-to-protobuf-playernameid.22444/' | prepend: site.baseurl }}"><span class="DateTime" title="Dec 12, 2016 at 2:22 PM">Dec 12,
                2016</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-276048" class="message" data-author="Sir BenSon">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Sir BenSon" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Sir BenSon</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">Hey there,<br />
                        <br /> is there a way to convert BasePlayer to ProtoBuf.PlayerNameID and back? <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Sir BenSon</a>,</span>
                        <a href="{{ '/threads/converting-baseplayer-to-protobuf-playernameid.22444/' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Dec 12, 2016 at 2:22 PM">Dec 12, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/converting-baseplayer-to-protobuf-playernameid.22444/' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/276048/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-276221" class="message" data-author="Shady757">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Shady757" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Shady757</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">There is no direct way, no. From what I remember, PlayerNameID only stores exactly what it says; the player&#039;s
                        name and ID. You can create one using the info from baseplayer (their name and ID), but you can&#039;t convert these two. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Shady757</a>,</span>
                        <a href="{{ '/threads/converting-baseplayer-to-protobuf-playernameid.22444/#post-276221' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Dec 13, 2016 at 2:26 AM">Dec 13, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/converting-baseplayer-to-protobuf-playernameid.22444/#post-276221' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/276221/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-276486" class="message" data-author="Sir BenSon">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Sir BenSon" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Sir BenSon</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">Okay i changed a liddle bit code but it doesn&#039;t work.<br /> This my way:<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>                        int t = 0;
                        ProtoBuf.PlayerNameID pl = new ProtoBuf.PlayerNameID();
                        pl.userid = players[0].userID;
                        pl.username = players[0].displayName;
                        List&lt;AutoTurret&gt; turrets = Component.FindObjectsOfType&lt;AutoTurret&gt;().ToList();
                        foreach (AutoTurret turret in turrets)
                        {
                            if (turret.OwnerID == player.OwnerID)
                            {
                                if (!turret.authorizedPlayers.Contains(pl))
                                {
                                    turret.authorizedPlayers.Add(pl);
                                    turret.SendNetworkUpdateImmediate();
                                    t++;
                                }
                            }
                        }
                        players[0].SendNetworkUpdateImmediate();</pre>{% endraw %}
                        </div>WHats wrong with it? <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Sir BenSon</a>,</span>
                        <a href="{{ '/threads/converting-baseplayer-to-protobuf-playernameid.22444/#post-276486' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Dec 14, 2016 at 3:16 PM">Dec 14, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/converting-baseplayer-to-protobuf-playernameid.22444/#post-276486' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/276486/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-276493" class="message" data-author="Shady757">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Shady757" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Shady757</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Sir BenSon">
                            <aside>
                                <div class="attribution type">Sir BenSon said: <a href="#post-276486" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Okay i changed a liddle bit code but it doesn&#039;t work.<br /> This my way:<br />
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            {% raw %}<pre>                        int t = 0;
                        ProtoBuf.PlayerNameID pl = new ProtoBuf.PlayerNameID();
                        pl.userid = players[0].userID;
                        pl.username = players[0].displayName;
                        List&lt;AutoTurret&gt; turrets = Component.FindObjectsOfType&lt;AutoTurret&gt;().ToList();
                        foreach (AutoTurret turret in turrets)
                        {
                            if (turret.OwnerID == player.OwnerID)
                            {
                                if (!turret.authorizedPlayers.Contains(pl))
                                {
                                    turret.authorizedPlayers.Add(pl);
                                    turret.SendNetworkUpdateImmediate();
                                    t++;
                                }
                            }
                        }
                        players[0].SendNetworkUpdateImmediate();</pre>{% endraw %}
                                        </div>WHats wrong with it?
                                    </div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>I believe the problem is that PlayerNameIDs are still &#039;unique&#039;, so you can&#039;t just create a new one and check if it exists.<br />
                        <br /> You can also check if a player is authed by simply doing turret.IsAuthed(Player), where Player is BasePlayer.<br />
                        <br /> If you need to do a check through authorizedPlayers, you can do this (using LINQ):<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>
var isAuthed = turret.authorizedPlayers.FirstOrDefault(p =&gt; p.userid == player.userID) != null;
</pre>{% endraw %}
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Shady757</a>,</span>
                        <a href="{{ '/threads/converting-baseplayer-to-protobuf-playernameid.22444/#post-276493' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Dec 14, 2016 at 3:21 PM">Dec 14, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/converting-baseplayer-to-protobuf-playernameid.22444/#post-276493' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/276493/permalink">#4</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-276498" class="message" data-author="Sir BenSon">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Sir BenSon" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Sir BenSon</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">Mhh thanks but it doesnt work. I get 0 players.<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>                        ProtoBuf.PlayerNameID pl = new ProtoBuf.PlayerNameID();
                        pl.userid = players[0].userID;
                        pl.username = players[0].displayName;
                        List&lt;AutoTurret&gt; turrets = Component.FindObjectsOfType&lt;AutoTurret&gt;().ToList();
                        foreach (AutoTurret turret in turrets)
                        {
                            if (turret.OwnerID == player.OwnerID)
                            {
                                var isAuthed = turret.authorizedPlayers.FirstOrDefault(p =&gt; p.userid == players[0].userID) != null;
                                if (isAuthed)
                                {
                                    turret.authorizedPlayers.Remove(pl);
                                    turret.SendNetworkUpdateImmediate();
                                    t++;
                                }
                            }
                        }</pre>{% endraw %}
                        </div>Is there a Field of WhiteList players same as a codelock? <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Sir BenSon</a>,</span>
                        <a href="{{ '/threads/converting-baseplayer-to-protobuf-playernameid.22444/#post-276498' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Dec 14, 2016 at 3:47 PM">Dec 14, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/converting-baseplayer-to-protobuf-playernameid.22444/#post-276498' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/276498/permalink">#5</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-276503" class="message" data-author="Sir BenSon">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Sir BenSon" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Sir BenSon</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">Ahh now i know wthats wrong. <br />
                        <br /> List&lt;AutoTurret&gt; turrets = Component.FindObjectsOfType&lt;AutoTurret&gt;().ToList();<br /> There i get all autoturrets. BUT if i check:<br /> if (turret.OwnerID ==
                        player.OwnerID)<br />
                        <br /> i get false back. So the OwnerID in the turret is null. But why? <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Sir BenSon</a>,</span>
                        <a href="{{ '/threads/converting-baseplayer-to-protobuf-playernameid.22444/#post-276503' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Dec 14, 2016 at 4:31 PM">Dec 14, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/converting-baseplayer-to-protobuf-playernameid.22444/#post-276503' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/276503/permalink">#6</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-276693" class="message" data-author="Shady757">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Shady757" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Shady757</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Sir BenSon">
                            <aside>
                                <div class="attribution type">Sir BenSon said: <a href="#post-276503" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Ahh now i know wthats wrong.<br />
                                        <br /> List&lt;AutoTurret&gt; turrets = Component.FindObjectsOfType&lt;AutoTurret&gt;().ToList();<br /> There i get all autoturrets. BUT if i check:<br /> if
                                        (turret.OwnerID == player.OwnerID)<br />
                                        <br /> i get false back. So the OwnerID in the turret is null. But why?</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>I&#039;m not sure. Are these turrets being placed normally, or are they being placed through a plugin? If normally, I&#039;m not sure why they would lack an owner ID.
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Shady757</a>,</span>
                        <a href="{{ '/threads/converting-baseplayer-to-protobuf-playernameid.22444/#post-276693' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Dec 15, 2016 at 6:43 PM">Dec 15, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/converting-baseplayer-to-protobuf-playernameid.22444/#post-276693' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/276693/permalink">#7</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-276712" class="message" data-author="FuJiCuRa">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="FuJiCuRa" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">FuJiCuRa</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Sir BenSon">
                            <aside>
                                <div class="attribution type">Sir BenSon said: <a href="#post-276503" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">if (turret.OwnerID == player.OwnerID)</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>if ((turret as BaseEntity).OwnerID == player.OwnerID)</pre>{% endraw %}
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">FuJiCuRa</a>,</span>
                        <a href="{{ '/threads/converting-baseplayer-to-protobuf-playernameid.22444/#post-276712' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Dec 15, 2016 at 9:11 PM">Dec 15, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/converting-baseplayer-to-protobuf-playernameid.22444/#post-276712' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/276712/permalink">#8</a>
                </div>
            </div>
        </div>
    </li>
</ol>
