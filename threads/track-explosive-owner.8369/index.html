---
layout: forums
title: 'Solved - Track explosive owner'
breadcrumbs:
 - "Plugin Development": "/forums/plugin-development.105/"
 - "Rust Development": "/forums/rust-development.4/"
---
<div class="titleBar">
    <h1>
        <span class="prefix prefixGreen">Solved</span> <a href="{{ '/threads/track-explosive-owner.8369/' | prepend: site.baseurl }}">Track explosive owner</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="{{ '/forums/rust-development.4/' | prepend: site.baseurl }}">Rust Development</a>' started by <a class="username"
            dir="auto">KillParadise</a>, <a href="{{ '/threads/track-explosive-owner.8369/' | prepend: site.baseurl }}"><span class="DateTime" title="May 11, 2015 at 2:00 AM">May 11, 2015</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-87663" class="message" data-author="KillParadise">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="KillParadise" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">KillParadise</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Is there a route to take to track who threw a grenade, timed explosive, or fired a rocket so you can track who
                        killed who with an explosive? Or is that a no go right now? <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">KillParadise</a>,</span>
                        <a href="{{ '/threads/track-explosive-owner.8369/' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 11, 2015 at 2:00 AM">May 11, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/track-explosive-owner.8369/' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/87663/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-87689" class="message" data-author="Mughisi">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Mughisi" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Mughisi</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> I&#039;ve add the <i>OnWeaponThrown(BasePlayer player, BaseEntity entity) </i>hook a while back so you could use
                        that one. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Mughisi</a>,</span>
                        <a href="{{ '/threads/track-explosive-owner.8369/#post-87689' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 11, 2015 at 5:25 AM">May 11, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/track-explosive-owner.8369/#post-87689' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/87689/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-87690" class="message" data-author="KillParadise">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="KillParadise" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">KillParadise</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Mughisi">
                            <aside>
                                <div class="attribution type">Mughisi said: <a href="#post-87689" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">I&#039;ve add the <i>OnWeaponThrown(BasePlayer player, BaseEntity entity) </i>hook a while back so you could use that one.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Thanks Mughisi. I&#039;ll see what I can do. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">KillParadise</a>,</span>
                        <a href="{{ '/threads/track-explosive-owner.8369/#post-87690' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 11, 2015 at 5:26 AM">May 11, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/track-explosive-owner.8369/#post-87690' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/87690/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-89335" class="message" data-author="tarper24">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="tarper24" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">tarper24</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Hello Mughisi, The <i>OnWeaponThrown </i>helped me to track the owner of all explosives except for the rockets.
                        Do you know of anyway to do this? I was messing about and used a Raycast that went out from the rocket itself backwards. It detects the player almost all the time now, but if
                        it explodes immediately, it may or may not detect the player. Is there any good way to track a rocket&#039;s owner at the moment, or has no one else tried? I can post my code
                        if you want to see what I have for it, but it&#039;s messy. Just let me know if you want to see what I&#039;ve got. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">tarper24</a>,</span>
                        <a href="{{ '/threads/track-explosive-owner.8369/#post-89335' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 16, 2015 at 4:54 PM">May 16, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/track-explosive-owner.8369/#post-89335' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/89335/permalink">#4</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-89433" class="message" data-author="Mughisi">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Mughisi" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Mughisi</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="tarper24">
                            <aside>
                                <div class="attribution type">tarper24 said: <a href="#post-89335" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Hello Mughisi, The <i>OnWeaponThrown </i>helped me to track the owner of all explosives except for the rockets. Do you know of anyway to do this?
                                        I was messing about and used a Raycast that went out from the rocket itself backwards. It detects the player almost all the time now, but if it explodes
                                        immediately, it may or may not detect the player. Is there any good way to track a rocket&#039;s owner at the moment, or has no one else tried? I can post my
                                        code if you want to see what I have for it, but it&#039;s messy. Just let me know if you want to see what I&#039;ve got.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>In the hook&#039;s defense, a rocket is shot and not thrown <img src="{{ '/assets/styles/default/xenforo/clear.png' | prepend: site.baseurl }}" class="mceSmilieSprite mceSmilie2" alt=";)" title="Wink    ;)" />
                        You should be able to grab the position of the rocket when it spawns and then just grab the player by using a spherecast or something, if a lot of players are in the spherecast
                        it will grab multiple people though but you just need the cast to be just big enough to get the player and not anything else <img src="{{ '/assets/styles/default/xenforo/clear.png' | prepend: site.baseurl }}"
                            class="mceSmilieSprite mceSmilie7" alt=":p" title="Stick Out Tongue    :p" /> Or I might look into adding the hook OnFireRocket <img src="{{ '/assets/styles/default/xenforo/clear.png' | prepend: site.baseurl }}"
                            class="mceSmilieSprite mceSmilie7" alt=":p" title="Stick Out Tongue    :p" />
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Mughisi</a>,</span>
                        <a href="{{ '/threads/track-explosive-owner.8369/#post-89433' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 16, 2015 at 8:59 PM">May 16, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/track-explosive-owner.8369/#post-89433' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/89433/permalink">#5</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-89482" class="message" data-author="tarper24">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="tarper24" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">tarper24</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> That&#039;s the problem I saw with a spherecast, so I use a raycast that shoots out of the rockets rear. If you
                        manage to get OnFireRocket that would be great. xP<br /> [DOUBLEPOST=1432007761,1431813114][/DOUBLEPOST]For anyone that comes across this thread, I just added a pull request
                        (<a href="https://github.com/OxideMod/Oxide/pull/360" target="_blank" class="externalLink" rel="nofollow">#360</a>) for OnRocketFired which functions the same way that
                        OnWeaponThrown does. I&#039;m hoping this will get merged, because if it does it means we will also be able to track rocket owners. <div class="messageTextEndMarker">&nbsp;
                        </div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">tarper24</a>,</span>
                        <a href="{{ '/threads/track-explosive-owner.8369/#post-89482' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 19, 2015 at 4:56 AM">May 19, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/track-explosive-owner.8369/#post-89482' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/89482/permalink">#6</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-90690" class="message staff" data-author="Calytic">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a href="members/calytic.58712/" class="avatar Avm" data-avatarhtml="true"><img src="data/avatars/m/58/58712.jpg?1463423255" width="96" height="96" alt="Calytic" /></a>
                </div>
                <h3 class="userText">
                    <a href="members/calytic.58712/" class="username" dir="auto" itemprop="name">Calytic</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                    <em class="userBanner bannerGreen wrapped" itemprop="title"><span class="before"></span><strong>Community Mod</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Hold the phone, this is not solved. I can tell the owner of an explosive when the explosive is thrown, but I
                        can&#039;t store the UID of the explosive and reference it OnEntityDeath to determine who threw what and who it killed.<br />
                        <br /> Please tell me I&#039;m wrong and there is in-fact a way to grab a UID for explosives.<br />
                        <br /> As I understand it right now, even with the new hooks, there is NO WAY to determine who threw the explosive that killed you. This is reflected in DeathNotes that does
                        not reveal the attacker. I spent a futile 3 hours researching the core and oxide which revealed nothing!<br />
                        <br /> The only way to do this is to track the position of who threw it and compare that that against the position of who died. However, this is unreliable and expensive as it
                        requires a ton of processing and may blame multiple players for the same death! <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a href="members/calytic.58712/" class="username author" dir="auto">Calytic</a>,</span>
                        <a href="{{ '/threads/track-explosive-owner.8369/#post-90690' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 20, 2015 at 8:58 PM">May 20, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/track-explosive-owner.8369/#post-90690' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/90690/permalink">#7</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-90808" class="message" data-author="tarper24">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="tarper24" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">tarper24</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>[HookMethod(&quot;OnWeaponThrown&quot;)]
        void OnWeaponThrown(BasePlayer player, BaseEntity entity)
        {            entity.name = String.Format(&quot;{0}[{1}]&quot;, entity.name, player.userID); //Combines to create: item/timed.explosive.deployed(Clone)[76561198076504297]        }</pre>{% endraw %}
                        </div>
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>if (hitInfo.Initiator.ToString().StartsWith(&quot;item&quot;))
                {
                    string[] attackerArray = hitInfo.Initiator.name.ToString().Split('/');
                    attacker = attackerArray[attackerArray.Length - 1]; //timed.explosive.deployed(Clone)[76561198076504297]                    if (hitInfo.Initiator.GetType().ToString().EndsWith(&quot;Explosive&quot;))
                    {
                        string[] attackerArray2 = attacker.Split(new Char[] { '(', ')', '[', ']' }); //'timed.explosive.deployed' 'Clone' '' '76561198076504297' ''
                        weapon = attackerArray2[0]; //timed.explosive.deployed                        attackerID = attackerArray2[3]; //76561198076504297
                        attacker = BasePlayer.Find(attackerID).displayName; //tarper24
                    }
                }</pre>{% endraw %}
                        </div>This is code taken from my plugin that I&#039;m currently working on. It works every time to track the owner of a thrown explosive. I also have added a hook for rockets
                        locally. Once they add that hook, rockets will be able to be tracked in a similar manner. I only need to know the owner of the explosive, so I only attach the ID, but you could
                        attach any information you wanted.<br />
                        <br /> I hope this helps clear things up on how you can use these hooks to track the owner, and other things, if you needed. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">tarper24</a>,</span>
                        <a href="{{ '/threads/track-explosive-owner.8369/#post-90808' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 21, 2015 at 4:27 AM">May 21, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/track-explosive-owner.8369/#post-90808' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/90808/permalink">#8</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-91029" class="message staff" data-author="Calytic">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a href="members/calytic.58712/" class="avatar Avm" data-avatarhtml="true"><img src="data/avatars/m/58/58712.jpg?1463423255" width="96" height="96" alt="Calytic" /></a>
                </div>
                <h3 class="userText">
                    <a href="members/calytic.58712/" class="username" dir="auto" itemprop="name">Calytic</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                    <em class="userBanner bannerGreen wrapped" itemprop="title"><span class="before"></span><strong>Community Mod</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Thank you very much tarper for your detailed and concise reply. This does address the issue and changing the
                        entity name is very clever.<br />
                        <br /> While I expect it is simply an engine limitation, it is still impossible to determine exactly which entity is at fault (with no uid) though your solution does
                        significantly reduce the likelihood of error and for that I appreciate it, thanks. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a href="members/calytic.58712/" class="username author" dir="auto">Calytic</a>,</span>
                        <a href="{{ '/threads/track-explosive-owner.8369/#post-91029' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 21, 2015 at 8:02 PM">May 21, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/track-explosive-owner.8369/#post-91029' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/91029/permalink">#9</a>
                </div>
            </div>
        </div>
    </li>
</ol>
