---
layout: forums
title: 'Solved - Trouble updating a variable (wrong scope)'
breadcrumbs:
 - "Plugin Development": "/forums/plugin-development.105/"
 - "Rust Development": "/forums/rust-development.4/"
---
<div class="titleBar">
    <h1>
        <span class="prefix prefixGreen">Solved</span> <a href="{{ '/threads/trouble-updating-a-variable-wrong-scope.22266/' | prepend: site.baseurl }}">Trouble updating a variable (wrong scope)</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="{{ '/forums/rust-development.4/' | prepend: site.baseurl }}">Rust Development</a>' started by <a class="username" dir="auto">Nathan
            3</a>, <a href="{{ '/threads/trouble-updating-a-variable-wrong-scope.22266/' | prepend: site.baseurl }}"><span class="DateTime" title="Dec 4, 2016 at 12:41 AM">Dec 4, 2016</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-273324" class="message" data-author="Nathan 3">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Nathan 3" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Nathan 3</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Hello,<br />
                        <br /> I am pretty new to OO languages and I am spending some time when it&#039;s available to progress my learning, I am creating a plugin that I thought was working but the
                        variable only seems to update once. I&#039;m guessing it&#039;s because it&#039;s being declared once at startup but I don&#039;t know the OO way of doing it.<br />
                        <br /> How would I update the variable before each save?<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>    class EntityCounter : RustPlugin
    {
      
        private int EntityCount = BaseNetworkable.serverEntities.Count;
        private int MaxEntity = 250000;
  
    void OnServerSave()
    {
        int Remaining = MaxEntity - EntityCount;
      
        if (EntityCount &lt; MaxEntity){            PrintToChat(&quot;Total Entities : {0}, Wipe @ {1}. Remaining Entities to go {2}&quot;, 
        }
        else {
            PrintToChat(&quot;Entity Limit Reached! Admin will be wiping soon.&quot;);
        }
      
    }
    }</pre>{% endraw %}
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Nathan 3</a>,</span>
                        <a href="{{ '/threads/trouble-updating-a-variable-wrong-scope.22266/' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Dec 4, 2016 at 12:41 AM">Dec 4, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/trouble-updating-a-variable-wrong-scope.22266/' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/273324/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-273332" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> The hook is just a trigger that gets called, it wouldn&#039;t be your issue. <div class="messageTextEndMarker">
                            &nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="{{ '/threads/trouble-updating-a-variable-wrong-scope.22266/#post-273332' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Dec 4, 2016 at 1:04 AM">Dec 4, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/trouble-updating-a-variable-wrong-scope.22266/#post-273332' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/273332/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-273334" class="message" data-author="Nathan 3">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Nathan 3" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Nathan 3</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Wulf">
                            <aside>
                                <div class="attribution type">Wulf said: <a href="#post-273332" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">The hook is just a trigger that gets called, it wouldn&#039;t be your issue.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Yeah I know, I think I named the title incorrectly <img src="{{ '/assets/styles/default/xenforo/clear.png' | prepend: site.baseurl }}" class="mceSmilieSprite mceSmilie2" alt=";)" title="Wink    ;)" /> I&#039;ve
                        just not delved into public, private etc yet and I&#039;m wondering how I could get it to be updated when that trigger is called. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Nathan 3</a>,</span>
                        <a href="{{ '/threads/trouble-updating-a-variable-wrong-scope.22266/#post-273334' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Dec 4, 2016 at 1:07 AM">Dec 4, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/trouble-updating-a-variable-wrong-scope.22266/#post-273334' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/273334/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-273336" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Nathan 3">
                            <aside>
                                <div class="attribution type">Nathan 3 said: <a href="#post-273334" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Yeah I know, I think I named the title incorrectly <img src="{{ '/assets/styles/default/xenforo/clear.png' | prepend: site.baseurl }}" class="mceSmilieSprite mceSmilie2" alt=";)"
                                            title="Wink    ;)" /> I&#039;ve just not delved into public, private etc yet and I&#039;m wondering how I could get it to be updated when that trigger is
                                        called.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Your issue is that you are only setting the entity count when the plugin is loaded, so it will never change. You should be checking it each time the hook is called. <div
                            class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="{{ '/threads/trouble-updating-a-variable-wrong-scope.22266/#post-273336' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Dec 4, 2016 at 1:17 AM">Dec 4, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/trouble-updating-a-variable-wrong-scope.22266/#post-273336' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/273336/permalink">#4</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-273480" class="message" data-author="Nathan 3">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Nathan 3" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Nathan 3</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Wulf">
                            <aside>
                                <div class="attribution type">Wulf said: <a href="#post-273336" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Your issue is that you are only setting the entity count when the plugin is loaded, so it will never change. You should be checking it each time
                                        the hook is called.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Yeah I knew that but I&#039;ve figured it out now, Got my book out and did some reading, I appreciate you didn&#039;t give me the quick fix. <div
                            class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Nathan 3</a>,</span>
                        <a href="{{ '/threads/trouble-updating-a-variable-wrong-scope.22266/#post-273480' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Dec 4, 2016 at 12:30 PM">Dec 4, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/trouble-updating-a-variable-wrong-scope.22266/#post-273480' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/273480/permalink">#5</a>
                </div>
            </div>
        </div>
    </li>
</ol>
