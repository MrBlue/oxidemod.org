---
layout: forums
title: 'Getting what item is in your hand?'
breadcrumbs:
 - "Plugin Development": "/forums/plugin-development.105/"
 - "Rust Development": "/forums/rust-development.4/"
---
<div class="titleBar">
    <h1>
        <a href="{{ '/threads/getting-what-item-is-in-your-hand.11872/' | prepend: site.baseurl }}">Getting what item is in your hand?</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="{{ '/forums/rust-development.4/' | prepend: site.baseurl }}">Rust Development</a>' started by <a class="username"
            dir="auto">raholl</a>, <a href="{{ '/threads/getting-what-item-is-in-your-hand.11872/' | prepend: site.baseurl }}"><span class="DateTime" title="Sep 21, 2015 at 5:09 AM">Sep 21,
                2015</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-130526" class="message" data-author="raholl">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="raholl" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">raholl</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> But rly, Wulf, do you know how to check, what item you do have in hand?<br />
                        <br /> I am asking because i have problem finding this item, if i do foreach item in player.inventory.AllItems(), then the gun i am holding in my hand is missing in this list.
                        That means the gun is removed from inventory and goes... where? <img src="{{ '/assets/styles/default/xenforo/clear.png' | prepend: site.baseurl }}" class="mceSmilieSprite mceSmilie8" alt=":D"
                            title="Big Grin    :D" /><br />
                        <br /> Thx for help, rly appreciated <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="editDate"> Last edited by a moderator: <span class="DateTime" title="Sep 21, 2015 at 5:16 AM">Sep 21, 2015</span>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">raholl</a>,</span>
                        <a href="{{ '/threads/getting-what-item-is-in-your-hand.11872/' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Sep 21, 2015 at 5:09 AM">Sep 21, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/getting-what-item-is-in-your-hand.11872/' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/130526/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-130528" class="message" data-author="NobodyFTW">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="NobodyFTW" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">NobodyFTW</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> I believe it&#039;s <b>BasePlayer.vActiveItem<br />
                        </b><br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>
def OnWeaponFired(self, projectile, player, projectile, projectiles):    active_item = player.vActiveItem    print( str( active_item ) )
</pre>{% endraw %}
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">NobodyFTW</a>,</span>
                        <a href="{{ '/threads/getting-what-item-is-in-your-hand.11872/#post-130528' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Sep 21, 2015 at 5:55 AM">Sep 21, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/getting-what-item-is-in-your-hand.11872/#post-130528' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/130528/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-130536" class="message" data-author="raholl">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="raholl" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">raholl</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="SkinN õ.Õ&#039;.|.">
                            <aside>
                                <div class="attribution type">SkinN õ.Õ'.|. said: <a href="#post-130528" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">I believe it&#039;s <b>BasePlayer.vActiveItem<br />
                                        </b><br />
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            {% raw %}<pre>
def OnWeaponFired(self, projectile, player, projectile, projectiles):    active_item = player.vActiveItem    print( str( active_item ) )
</pre>{% endraw %}
                                        </div>
                                    </div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>I have already found out, what was the problem.<br />
                        <br /> Yes, the active item stay in the belt while you are alive, but it is dropped on death.<br />
                        <br /> I was trying to detect active item OnEntityDeath, and indeed, the hook happens before the active item is dropped (thats why i was sure the item is not dropped before my
                        mod does the check).<br />
                        <br /> Problem was, my mod was not using OnEntityDeath directly, it was just called from another mod, by calling my method from my mod, when OnEntityDeath was detected in the
                        mentioned other mod.<br />
                        <br /> Game was apparently not waiting for the other mod to do its work (which is ok), and when my mod was checking the svActiveItem, it was already 0 (item was already dropped
                        by OnKilled).<br />
                        <br /> Anyways i appreciate your help <a href="http://oxidemod.org/members/skinn-o-o.1103/" class="internalLink">SkinN õ.Õ&#039;.|.</a><br />
                        <br />
                        <br /> PS: problem i have now is that if you die by wounds, you drop the weapon before death, so i cant detect the weapon in this case.... any ideas? <img
                            src="{{ '/assets/styles/default/xenforo/clear.png' | prepend: site.baseurl }}" class="mceSmilieSprite mceSmilie8" alt=":D" title="Big Grin    :D" />
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="editDate"> Last edited by a moderator: <span class="DateTime" title="Sep 21, 2015 at 6:45 AM">Sep 21, 2015</span>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">raholl</a>,</span>
                        <a href="{{ '/threads/getting-what-item-is-in-your-hand.11872/#post-130536' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Sep 21, 2015 at 6:33 AM">Sep 21, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/getting-what-item-is-in-your-hand.11872/#post-130536' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/130536/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-130538" class="message" data-author="NobodyFTW">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="NobodyFTW" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">NobodyFTW</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="raholl">
                            <aside>
                                <div class="attribution type">raholl said: <a href="#post-130536" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">I have already found out, what was the problem.<br />
                                        <br /> Yes, the active item stay in the belt while you are alive, but it is dropped on death.<br />
                                        <br /> I was trying to detect active item OnEntityDeath, and indeed, the hook happens before the active item is dropped (thats why i was sure the item is not
                                        dropped before my mod does the check).<br />
                                        <br /> Problem was, my mod was not using OnEntityDeath directly, it was just called from another mod, by calling my method from my mod, when OnEntityDeath was
                                        detected in the mentioned other mod.<br />
                                        <br /> Game was apparently not waiting for the other mod to do its work (which is ok), and when my mod was checking the svActiveItem, it was already 0 (item was
                                        already dropped by OnKilled).<br />
                                        <br /> Anyways i appreciate your help <a href="http://oxidemod.org/members/skinn-o-o.1103/" class="internalLink">SkinN õ.Õ&#039;.|.</a><br />
                                        <br />
                                        <br /> PS: problem i have now is that if you die by wounds, you drop the weapon before death, so i cant detect the weapon in this case.... any ideas? <img
                                            src="{{ '/assets/styles/default/xenforo/clear.png' | prepend: site.baseurl }}" class="mceSmilieSprite mceSmilie8" alt=":D" title="Big Grin    :D" /></div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Well a way around it is that you could cache the active item of the player on CanBeWounded so then if the player actually dies you know what was his active item, though I
                        see only one con in this, and that is, while the player is wounded the player can be looted player any player, and the player can remove the active item from the wounded
                        player, so then the cached item will no longer be the active item. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">NobodyFTW</a>,</span>
                        <a href="{{ '/threads/getting-what-item-is-in-your-hand.11872/#post-130538' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Sep 21, 2015 at 7:02 AM">Sep 21, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/getting-what-item-is-in-your-hand.11872/#post-130538' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/130538/permalink">#4</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-130547" class="message" data-author="raholl">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="raholl" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">raholl</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="SkinN õ.Õ&#039;.|.">
                            <aside>
                                <div class="attribution type">SkinN õ.Õ'.|. said: <a href="#post-130538" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Well a way around it is that you could cache the active item of the player on CanBeWounded so then if the player actually dies you know what was
                                        his active item, though I see only one con in this, and that is, while the player is wounded the player can be looted player any player, and the player can
                                        remove the active item from the wounded player, so then the cached item will no longer be the active item.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Yes, the point why i am doing this, is to find out if player has lost any item before his death. <br /> This active item is special case, because its dropped earlier,
                        when it is not clear, if the player is going to die or not.<br />
                        <br /> I would like to do this:<br /> - life story starts, we have empty list of &quot;itemsDropped&quot;<br /> - if player is wounded and he drops something via dropActive(),
                        then we add this item to the list of itemsDropped<br /> - we also add all other intentory items to this list, because player may be looted while he is wounded and thus before
                        he dies <br /> - if the player gets help and does not die from wounds, then we may clear up the list of itemsDropped<br /> - on death, until new lifestory starts, the
                        itemsDropped list contains &quot;real&quot; list of items, he may lose due to wounds/death event<br />
                        <br /> Problem is that i am quite new to C# and i dont know how to do that. Its maybe possible via extending some existing classes and overriding the functions? Or do i always
                        need a special call hook to do it? There is no call hook in dropActive() function... <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">raholl</a>,</span>
                        <a href="{{ '/threads/getting-what-item-is-in-your-hand.11872/#post-130547' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Sep 21, 2015 at 7:38 AM">Sep 21, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/getting-what-item-is-in-your-hand.11872/#post-130547' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/130547/permalink">#5</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-231496" class="message" data-author="Shotgun Teddy">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Shotgun Teddy" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Shotgun Teddy</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="SkinN õ.Õ&#039;.|.">
                            <aside>
                                <div class="attribution type">SkinN õ.Õ'.|. said: <a href="#post-130538" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Well a way around it is that you could cache the active item of the player on CanBeWounded so then if the player actually dies you know what was
                                        his active item, though I see only one con in this, and that is, while the player is wounded the player can be looted player any player, and the player can
                                        remove the active item from the wounded player, so then the cached item will no longer be the active item.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>How would you do a check on specific items? E.g:<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>hostile_weapons = [ak47, rocketlauncher, thompson, etc...]
active_weapon = player.vActiveItemdef  OnEnterNPC(BasePlayer npc, BasePlayer player)
       if active_weapons == hostile_weapons
              npc_attack()</pre>{% endraw %}
                        </div>Would you check the players items using item ID or the item short name? <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Shotgun Teddy</a>,</span>
                        <a href="{{ '/threads/getting-what-item-is-in-your-hand.11872/#post-231496' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 17, 2016 at 12:30 PM">Jul 17, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/getting-what-item-is-in-your-hand.11872/#post-231496' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/231496/permalink">#6</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-296777" class="message" data-author="Ts3hosting">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Ts3hosting" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Ts3hosting</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Shotgun Teddy">
                            <aside>
                                <div class="attribution type">Shotgun Teddy said: <a href="#post-231496" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">How would you do a check on specific items? E.g:<br />
                                        <br />
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            {% raw %}<pre>hostile_weapons = [ak47, rocketlauncher, thompson, etc...]
active_weapon = player.vActiveItemdef  OnEnterNPC(BasePlayer npc, BasePlayer player)
       if active_weapons == hostile_weapons
              npc_attack()</pre>{% endraw %}
                                        </div>Would you check the players items using item ID or the item short name?
                                    </div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div><br /> How would one make the npc attack? <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Ts3hosting</a>,</span>
                        <a href="{{ '/threads/getting-what-item-is-in-your-hand.11872/#post-296777' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Feb 12, 2017 at 6:32 AM">Feb 12, 2017</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/getting-what-item-is-in-your-hand.11872/#post-296777' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/296777/permalink">#7</a>
                </div>
            </div>
        </div>
    </li>
</ol>
