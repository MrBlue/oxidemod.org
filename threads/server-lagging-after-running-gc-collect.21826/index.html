---
layout: forums
title: 'Server lagging after running gc.collect'
breadcrumbs:
 - "Game Discussion": "/categories/game-discussion.106/"
 - "Rust Discussion": "/forums/rust-discussion.23/"
---
<div class="titleBar">
    <h1>
        <a href="{{ '/threads/server-lagging-after-running-gc-collect.21826/' | prepend: site.baseurl }}">Server lagging after running gc.collect</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="{{ '/forums/rust-discussion.23/' | prepend: site.baseurl }}">Rust Discussion</a>' started by <a class="username"
            dir="auto">garo</a>, <a href="{{ '/threads/server-lagging-after-running-gc-collect.21826/' | prepend: site.baseurl }}"><span class="DateTime" title="Nov 5, 2016 at 7:49 PM">Nov 5,
                2016</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-265807" class="message" data-author="garo">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="garo" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">garo</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Hello guys.<br />
                        <br /> I&#039;ve tried to put gc.collect on console because we had some lag jumps on the server because the high ram usage of this last devblog and now an error spams the
                        console and getting so much lag.<br />
                        <br /> The error:<br />
                        <br /> [Oxide] 20:43 [Error] Failed to call hook &#039;CanUseLock&#039; on plugin &#039;RustCore v1.0.2665&#039; (NullReferenceException: Object reference not set to an
                        instance of an object)<br /> [Oxide] 20:43 [Debug] at Oxide.Game.Rust.RustCore.CanUseLock (.BasePlayer player, .BaseLock lock) [0x00000] in &lt;filename unknown&gt;:0 <br /> at
                        (wrapper managed-to-native) System.Reflection.MonoMethod:InternalInvoke (object,object[],System.Exception&amp;)<br /> at System.Reflection.MonoMethod.Invoke (System.Object obj,
                        BindingFlags invokeAttr, System.Reflection.Binder binder, System.Object[] parameters, System.Globalization.CultureInfo culture) [0x00000] in &lt;filename unknown&gt;:0 <br />
                        <br /> I was looking for a post or something on google but I couldn&#039;t find anything about that. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">garo</a>,</span>
                        <a href="{{ '/threads/server-lagging-after-running-gc-collect.21826/' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Nov 5, 2016 at 7:49 PM">Nov 5, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/server-lagging-after-running-gc-collect.21826/' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/265807/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-265815" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> For the CanUseLock error, update Oxide. The error isn&#039;t related to gc.collect though. <div
                            class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="{{ '/threads/server-lagging-after-running-gc-collect.21826/#post-265815' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Nov 5, 2016 at 8:16 PM">Nov 5, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/server-lagging-after-running-gc-collect.21826/#post-265815' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/265815/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-265817" class="message" data-author="garo">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="garo" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">garo</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> We are on Nitrado Hosting and updated the server when the wipe 03/11 and was working fine until now (when
                        I&#039;ve restarted the server one hour ago). We had not any error since the update those days either. Only since the restart (And only changed the gc.collect from
                        before)<br />
                        <br /> I think error appears when someone opens a door with codelock. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">garo</a>,</span>
                        <a href="{{ '/threads/server-lagging-after-running-gc-collect.21826/#post-265817' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Nov 5, 2016 at 8:22 PM">Nov 5, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/server-lagging-after-running-gc-collect.21826/#post-265817' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/265817/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-265818" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="garo">
                            <aside>
                                <div class="attribution type">garo said: <a href="#post-265817" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">We are on Nitrado Hosting and updated the server when the wipe 03/11 and was working fine until now (when I&#039;ve restarted the server one hour
                                        ago). We had not any error since the update those days either. Only since the restart (And only changed the gc.collect from before)<br />
                                        <br /> I think error appears when someone opens a door with codelock.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Yes, the CanDoorLock issue should have already been resolves as of Oxide build 2669. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="{{ '/threads/server-lagging-after-running-gc-collect.21826/#post-265818' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Nov 5, 2016 at 8:26 PM">Nov 5, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/server-lagging-after-running-gc-collect.21826/#post-265818' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/265818/permalink">#4</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-265828" class="message" data-author="garo">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="garo" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">garo</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> I&#039;m sendind a ticket to the host but the server was running fine until this evening, updated correctly 2
                        days ago. Or that I thought because we had not any problem until now <img src="{{ '/assets/styles/default/xenforo/clear.png' | prepend: site.baseurl }}" class="mceSmilieSprite mceSmilie3" alt=":("
                            title="Frown    :(" />.<br />
                        <br /> I&#039;ll post their answer when I get it. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">garo</a>,</span>
                        <a href="{{ '/threads/server-lagging-after-running-gc-collect.21826/#post-265828' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Nov 5, 2016 at 8:40 PM">Nov 5, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/server-lagging-after-running-gc-collect.21826/#post-265828' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/265828/permalink">#5</a>
                </div>
            </div>
        </div>
    </li>
</ol>
