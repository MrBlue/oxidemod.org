---
layout: forums
title: 'Solved - C# copying items, maps and key data'
breadcrumbs:
 - "Plugin Development": "/forums/plugin-development.105/"
 - "Rust Development": "/forums/rust-development.4/"
---
<div class="titleBar">
    <h1>
        <span class="prefix prefixGreen">Solved</span> <a href="{{ '/threads/c-copying-items-maps-and-key-data.11113/' | prepend: site.baseurl }}">C# copying items, maps and key data</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="{{ '/forums/rust-development.4/' | prepend: site.baseurl }}">Rust Development</a>' started by <a class="username"
            dir="auto">Kayzor</a>, <a href="{{ '/threads/c-copying-items-maps-and-key-data.11113/' | prepend: site.baseurl }}"><span class="DateTime" title="Aug 14, 2015 at 10:11 PM">Aug 14,
                2015</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-120331" class="message" data-author="Kayzor">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Kayzor" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Kayzor</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">I am having a little trouble figuring our what properties of an item contain the map / lock data in order to
                        duplicate the item.<br />
                        <br /> Any pointers or examples would be greatly appreciated, I did search but couldn&#039;t find anything, not entirely sure I know what I am looking for either
                        &gt;.&lt;<br />
                        <br /> Edit, updated:<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>        private Item copyItem(Item item)
        {
            Item copy = ItemManager.CreateByItemID(item.info.itemid, item.amount, item.IsBlueprint());            // If weapon get ammo type and amount
            var weapon = item.GetHeldEntity() as BaseProjectile;
            if (weapon != null)
            {
                (copy.GetHeldEntity() as BaseProjectile).primaryMagazine.contents = weapon.primaryMagazine.contents;
                (copy.GetHeldEntity() as BaseProjectile).primaryMagazine.ammoType = weapon.primaryMagazine.ammoType;
            }            // If map copy images
            var map = item.GetHeldEntity() as MapEntity;
            if (map != null)
            {
                (copy.GetHeldEntity() as MapEntity).fogImages = map.fogImages;
                (copy.GetHeldEntity() as MapEntity).paintImages = map.paintImages;
            }            copy.skin = item.skin;
            copy.condition = item.condition;
            copy.instanceData = item.instanceData;
            copy.contents = item.contents;            return copy;
        }
</pre>{% endraw %}
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="editDate">Last edited by a moderator: <span class="DateTime" title="Aug 17, 2015 at 9:10 PM">Aug 17, 2015</span>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Kayzor</a>,</span>
                        <a href="{{ '/threads/c-copying-items-maps-and-key-data.11113/' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Aug 14, 2015 at 10:11 PM">Aug 14, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/c-copying-items-maps-and-key-data.11113/' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/120331/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-121064" class="message" data-author="Nogrod">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Nogrod" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Nogrod</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">item.GetHeldEntity() as MapEntity? and what lock data do you want? <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Nogrod</a>,</span>
                        <a href="{{ '/threads/c-copying-items-maps-and-key-data.11113/#post-121064' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Aug 17, 2015 at 2:15 PM">Aug 17, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/c-copying-items-maps-and-key-data.11113/#post-121064' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/121064/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-121162" class="message" data-author="Kayzor">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Kayzor" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Kayzor</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">Perfect! Just what I needed for the map thanks <img src="{{ '/assets/styles/default/xenforo/clear.png' | prepend: site.baseurl }}"
                            class="mceSmilieSprite mceSmilie1" alt=":)" title="Smile    :)" /><br />
                        <br /> For the lock I was referring to the door.key item but I have just found that the lock information is contained in item.instanceData <div class="messageTextEndMarker">
                            &nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Kayzor</a>,</span>
                        <a href="{{ '/threads/c-copying-items-maps-and-key-data.11113/#post-121162' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Aug 17, 2015 at 9:09 PM">Aug 17, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/c-copying-items-maps-and-key-data.11113/#post-121162' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/121162/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-273296" class="message" data-author="4lex">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="4lex" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">4lex</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">I am trying to copy a gun, it copies the attachments but then the contents of the gun becomes glitched and the
                        attachments wont view, removing the attachment will give you it but then the slots of the weapon become glitched and cant accept attachments again. <div
                            class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">4lex</a>,</span>
                        <a href="{{ '/threads/c-copying-items-maps-and-key-data.11113/#post-273296' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Dec 3, 2016 at 11:28 PM">Dec 3, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/c-copying-items-maps-and-key-data.11113/#post-273296' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/273296/permalink">#4</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-273413" class="message" data-author="VVoid">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="VVoid" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">VVoid</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>copy.contents = item.contents;</pre>{% endraw %}
                        </div>That&#039;s a very bad practice.<br /> You should create a new instance of every item in <span style="text-decoration: underline">item.contents</span> and only then move
                        it to <span style="text-decoration: underline">copy.contents</span>.<br /> You may use <span style="text-decoration: underline">copyItem(Item item)</span> in recursion for
                        neatness. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">VVoid</a>,</span>
                        <a href="{{ '/threads/c-copying-items-maps-and-key-data.11113/#post-273413' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Dec 4, 2016 at 8:48 AM">Dec 4, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/c-copying-items-maps-and-key-data.11113/#post-273413' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/273413/permalink">#5</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-273423" class="message" data-author="4lex">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="4lex" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">4lex</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">can you please show me an example of copying an item and its contents please <img
                            src="{{ '/assets/styles/default/xenforo/clear.png' | prepend: site.baseurl }}" class="mceSmilieSprite mceSmilie1" alt=":)" title="Smile    :)" />
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">4lex</a>,</span>
                        <a href="{{ '/threads/c-copying-items-maps-and-key-data.11113/#post-273423' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Dec 4, 2016 at 9:20 AM">Dec 4, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/c-copying-items-maps-and-key-data.11113/#post-273423' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/273423/permalink">#6</a>
                </div>
            </div>
        </div>
    </li>
</ol>
