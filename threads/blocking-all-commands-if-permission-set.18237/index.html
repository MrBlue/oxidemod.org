---
layout: forums
title: 'Blocking all commands if permission set?'
breadcrumbs:
 - "Plugin Development": "/forums/plugin-development.105/"
 - "Rust Development": "/forums/rust-development.4/"
---
<div class="titleBar">
    <h1>
        <a href="{{ '/threads/blocking-all-commands-if-permission-set.18237/' | prepend: site.baseurl }}">Blocking all commands if permission set?</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="{{ '/forums/rust-development.4/' | prepend: site.baseurl }}">Rust Development</a>' started by <a class="username"
            dir="auto">Crushed</a>, <a href="{{ '/threads/blocking-all-commands-if-permission-set.18237/' | prepend: site.baseurl }}"><span class="DateTime" title="May 22, 2016 at 10:20 AM">May 22,
                2016</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-208531" class="message" data-author="Crushed">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Crushed" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Crushed</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>object OnRunCommand(ConsoleSystem.Arg arg)
{
    string message = arg.GetString(0);
    BasePlayer player = arg.connection.player as BasePlayer;    if (permission.UserHasPermission(player.UserIDString, &quot;commandblock.have&quot;))
    {
        if (message.StartsWith(&quot;/&quot;))
        {
            SendReply(player,&quot;You are expelled. Chat commands don't work for you.&quot;);
        }       
        return true;
    }
    return null;
}</pre>{% endraw %}
                        </div><br /> Want to just restrict every command for someone who got the perm . <br /> Commands still run :s <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="editDate">Last edited by a moderator: <span class="DateTime" title="May 22, 2016 at 10:31 AM">May 22, 2016</span>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Crushed</a>,</span>
                        <a href="{{ '/threads/blocking-all-commands-if-permission-set.18237/' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 22, 2016 at 10:20 AM">May 22, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/blocking-all-commands-if-permission-set.18237/' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/208531/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-208535" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">You&#039;ll likely need to hook into OnPlayerChat if you are trying to handle chat commands, the OnRunCommand hook
                        is only for console commands. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="{{ '/threads/blocking-all-commands-if-permission-set.18237/#post-208535' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 22, 2016 at 10:33 AM">May 22, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/blocking-all-commands-if-permission-set.18237/#post-208535' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/208535/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-208542" class="message" data-author="sqroot">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="sqroot" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">sqroot</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Wulf">
                            <aside>
                                <div class="attribution type">Wulf said: <a href="#post-208535" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">You&#039;ll likely need to hook into OnPlayerChat if you are trying to handle chat commands, the OnRunCommand hook is only for console commands.
                                    </div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Did that change?<br /> The docs still state: &quot;Useful for intercepting commands before they get to their intended target (like chat.say)&quot; <div
                            class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">sqroot</a>,</span>
                        <a href="{{ '/threads/blocking-all-commands-if-permission-set.18237/#post-208542' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 22, 2016 at 10:52 AM">May 22, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/blocking-all-commands-if-permission-set.18237/#post-208542' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/208542/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-208546" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="sqroot">
                            <aside>
                                <div class="attribution type">sqroot said: <a href="#post-208542" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Did that change?<br /> The docs still state: &quot;Useful for intercepting commands before they get to their intended target (like
                                        chat.say)&quot;</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>That is a console command. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="{{ '/threads/blocking-all-commands-if-permission-set.18237/#post-208546' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 22, 2016 at 11:14 AM">May 22, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/blocking-all-commands-if-permission-set.18237/#post-208546' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/208546/permalink">#4</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-208551" class="message" data-author="sqroot">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="sqroot" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">sqroot</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">Sure, but all chat commands (and chat messages) are effectively executed as chat.say (or atleast they used to),
                        meaning OnRunCommand can (could?) handle chat commands and chat messages as well.<br /> I&#039;m not saying that it&#039;d be the best approach, since OnPlayerChat exists, but
                        I&#039;m wondering whether it&#039;s still the case that OnRunCommand can be used to work with all chat messages and commands. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">sqroot</a>,</span>
                        <a href="{{ '/threads/blocking-all-commands-if-permission-set.18237/#post-208551' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 22, 2016 at 11:24 AM">May 22, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/blocking-all-commands-if-permission-set.18237/#post-208551' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/208551/permalink">#5</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-208553" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="sqroot">
                            <aside>
                                <div class="attribution type">sqroot said: <a href="#post-208551" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Sure, but all chat commands (and chat messages) are effectively executed as chat.say (or atleast they used to), meaning OnRunCommand can (could?)
                                        handle chat commands and chat messages as well.<br /> I&#039;m not saying that it&#039;d be the best approach, since OnPlayerChat exists, but I&#039;m wondering
                                        whether it&#039;s still the case that OnRunCommand can be used to work with all chat messages and commands.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>You can, you&#039;d just need to handle it using a check like you mentioned. The hooks will all be getting overhauled for Covalence, so this is something we&#039;ll
                        likely tidy up. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="{{ '/threads/blocking-all-commands-if-permission-set.18237/#post-208553' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 22, 2016 at 11:40 AM">May 22, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/blocking-all-commands-if-permission-set.18237/#post-208553' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/208553/permalink">#6</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-208600" class="message" data-author="Crushed">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Crushed" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Crushed</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <span style="font-size: 18px"><b>OnPlayerChat</b></span><br /> void OnPlayerChat(ConsoleSystem.Arg arg)<br /> {<br /> Puts(&quot;OnPlayerChat works!&quot;);<br /> }<br />
                        <br />
                        <ul>
                            <li>Called when a player sends chat to the server</li>
                            <li>Returning true overrides default behavior of chat, not commands</li>
                        </ul><br />
                        <br /> - Not commands..... so.... its useless for what i wanted it? <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Crushed</a>,</span>
                        <a href="{{ '/threads/blocking-all-commands-if-permission-set.18237/#post-208600' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 22, 2016 at 2:40 PM">May 22, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/blocking-all-commands-if-permission-set.18237/#post-208600' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/208600/permalink">#7</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-208608" class="message" data-author="sqroot">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="sqroot" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">sqroot</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Crushed">
                            <aside>
                                <div class="attribution type">Crushed said: <a href="#post-208600" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote"><span style="font-size: 18px"><b>OnPlayerChat</b></span><br /> void OnPlayerChat(ConsoleSystem.Arg arg)<br /> {<br /> Puts(&quot;OnPlayerChat
                                        works!&quot;);<br /> }<br />
                                        <br />
                                        <ul>
                                            <li>Called when a player sends chat to the server</li>
                                            <li>Returning true overrides default behavior of chat, not commands</li>
                                        </ul><br />
                                        <br /> - Not commands..... so.... its useless for what i wanted it?
                                    </div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>-snip-<br /> OnPlayerChat for chat commands, OnRunCommand for commands.<br /> OnRunCommand can be used for both as well. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">sqroot</a>,</span>
                        <a href="{{ '/threads/blocking-all-commands-if-permission-set.18237/#post-208608' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 22, 2016 at 2:55 PM">May 22, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/blocking-all-commands-if-permission-set.18237/#post-208608' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/208608/permalink">#8</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-208687" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Crushed">
                            <aside>
                                <div class="attribution type">Crushed said: <a href="#post-208600" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote"><span style="font-size: 18px"><b>OnPlayerChat</b></span><br /> void OnPlayerChat(ConsoleSystem.Arg arg)<br /> {<br /> Puts(&quot;OnPlayerChat
                                        works!&quot;);<br /> }<br />
                                        <br />
                                        <ul>
                                            <li>Called when a player sends chat to the server</li>
                                            <li>Returning true overrides default behavior of chat, not commands</li>
                                        </ul><br />
                                        <br /> - Not commands..... so.... its useless for what i wanted it?
                                    </div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Chat commands are chat, and can be handled in that hook. You can use OnRunCommand thought like <a href="https://oxidemod.org/members/81111/" class="username"
                            data-user="81111, @sqroot">@sqroot</a> mentioned, you&#039;d just need to check for chat.say as the command as well as check the message from the chat to see what command
                        it is. If you want to just handle chat commands, then it would work with either hook. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="{{ '/threads/blocking-all-commands-if-permission-set.18237/#post-208687' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 22, 2016 at 5:56 PM">May 22, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/blocking-all-commands-if-permission-set.18237/#post-208687' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/208687/permalink">#9</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-208746" class="message" data-author="Crushed">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Crushed" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Crushed</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">aaaaaah..... i got it wrong. xd yea. &quot; not commands&quot; there are ment the console ones. Allright. Thanks
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Crushed</a>,</span>
                        <a href="{{ '/threads/blocking-all-commands-if-permission-set.18237/#post-208746' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 22, 2016 at 8:06 PM">May 22, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/blocking-all-commands-if-permission-set.18237/#post-208746' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/208746/permalink">#10</a>
                </div>
            </div>
        </div>
    </li>
</ol>
