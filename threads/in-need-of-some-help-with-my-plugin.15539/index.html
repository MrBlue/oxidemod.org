---
layout: forums
title: 'Solved - In need of some help with &quot;my plugin&quot;'
breadcrumbs:
 - "Plugin Development": "/forums/plugin-development.105/"
 - "Rust Development": "/forums/rust-development.4/"
---
<div class="titleBar">
    <h1>
        <span class="prefix prefixGreen">Solved</span> <a href="{{ '/threads/in-need-of-some-help-with-my-plugin.15539/' | prepend: site.baseurl }}">In need of some help with &quot;my plugin&quot;</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="{{ '/forums/rust-development.4/' | prepend: site.baseurl }}">Rust Development</a>' started by <a class="username"
            dir="auto">t0kenz</a>, <a href="{{ '/threads/in-need-of-some-help-with-my-plugin.15539/' | prepend: site.baseurl }}"><span class="DateTime" title="Feb 7, 2016 at 8:54 PM">Feb 7,
                2016</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-174091" class="message" data-author="t0kenz">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="t0kenz" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">t0kenz</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Hiho,<br />
                        <br /> I&#039;ve recently started getting more and more interested in oxide plugins, and therefore decided to make me one myself as a learning opportunity. I&#039;ve written
                        some lua before, but in a different game with different functions etc.<br />
                        <br /> I have some problems understanding what exactly I should write to execute my idea. I want it to print in colors e.g &lt;color=#5F8D4D&gt;[AdminsOnline]&lt;/color&gt;
                        &lt;color=#c58016&gt;Admins online:&lt;/color&gt; t0kenz, t0kenz1, t0kenz2\nt0kenz3,t0kenz4...<br />
                        <br /> What i&#039;ve written so far:<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>PLUGIN.Title        = &quot;Admin list&quot;
PLUGIN.Description  = &quot;Shows online admins&quot;
PLUGIN.Author       = &quot;t0kenz&quot;
PLUGIN.Version      = V(0, 0, 1)function PLUGIN:Init()
    command.AddChatCommand(&quot;admins&quot;, self.Object, &quot;cmdAdmins&quot;)
    permission.RegisterPermission(&quot;permission.online.admins&quot;, self.Plugin)
endlocal function IsAdmin(player)
    return player:GetComponent(&quot;BaseNetworkable&quot;).net.connection.authLevel &gt; 1
endlocal function HasPermission(steamId, perm)
    if permission.UserHasPermission(steamId, perm) then return true end
    return false
endfunction PLUGIN:cmdAdmins(player)</pre>{% endraw %}
                        </div>Kind regards,<br />
                        <br /> t0kenz <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="editDate"> Last edited by a moderator: <span class="DateTime" title="Feb 7, 2016 at 9:01 PM">Feb 7, 2016</span>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">t0kenz</a>,</span>
                        <a href="{{ '/threads/in-need-of-some-help-with-my-plugin.15539/' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Feb 7, 2016 at 8:54 PM">Feb 7, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/in-need-of-some-help-with-my-plugin.15539/' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/174091/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-174096" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>rust.SendChatMessage(player, &quot;&lt;color=#c58016&gt;Admins online:&lt;/color&gt; t0kenz, t0kenz1, t0kenz2\nt0kenz3,t0kenz4...&quot;)</pre>{% endraw %}
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="{{ '/threads/in-need-of-some-help-with-my-plugin.15539/#post-174096' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Feb 7, 2016 at 9:03 PM">Feb 7, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/in-need-of-some-help-with-my-plugin.15539/#post-174096' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/174096/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-174111" class="message" data-author="t0kenz">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="t0kenz" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">t0kenz</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Not sure if you understood what I meant, and i&#039;m sorry for being too unprecise. <br />
                        <br /> I&#039;m aware I need to send that to the player, but I want it to happen once you execute the command /admins, then it prints that message. <br /> I know i&#039;m
                        supposed to use function PLUGIN:cmdAdmins(player)<br /> but after that, i&#039;m a bit stuck. <br />
                        <br /> Hope you can assist me better with that said!<br />
                        <br /> Kind regards,<br />
                        <br /> t0kenz <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">t0kenz</a>,</span>
                        <a href="{{ '/threads/in-need-of-some-help-with-my-plugin.15539/#post-174111' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Feb 7, 2016 at 9:25 PM">Feb 7, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/in-need-of-some-help-with-my-plugin.15539/#post-174111' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/174111/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-174116" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="t0kenz">
                            <aside>
                                <div class="attribution type">t0kenz said: <a href="#post-174111" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Not sure if you understood what I meant, and i&#039;m sorry for being too unprecise.<br />
                                        <br /> I&#039;m aware I need to send that to the player, but I want it to happen once you execute the command /admins, then it prints that message.<br /> I know
                                        i&#039;m supposed to use function PLUGIN:cmdAdmins(player)<br /> but after that, i&#039;m a bit stuck.<br />
                                        <br /> Hope you can assist me better with that said!<br />
                                        <br /> Kind regards,<br />
                                        <br /> t0kenz</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>What I gave you goes inside your command function, so when they use the command, it will show the message. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="{{ '/threads/in-need-of-some-help-with-my-plugin.15539/#post-174116' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Feb 7, 2016 at 9:37 PM">Feb 7, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/in-need-of-some-help-with-my-plugin.15539/#post-174116' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/174116/permalink">#4</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-174118" class="message" data-author="t0kenz">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="t0kenz" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">t0kenz</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Wulf">
                            <aside>
                                <div class="attribution type">Wulf said: <a href="#post-174116" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">What I gave you goes inside your command function, so when they use the command, it will show the message.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>I&#039;d like it to list all admins online, not the exact message. When I meant t0kenz, t0kenz1, t0kenz2 I was talking about it listing 3 admins per &quot;row&quot;. e.g
                        /admins = [AdminsOnline] Admins online: FirstOnlineAdmin, SecondOnlineAdmin ...<br />
                        <br /> Or, is it as easy as you told me it&#039;d be, or is that simply one part of the whole command function? <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">t0kenz</a>,</span>
                        <a href="{{ '/threads/in-need-of-some-help-with-my-plugin.15539/#post-174118' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Feb 7, 2016 at 9:41 PM">Feb 7, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/in-need-of-some-help-with-my-plugin.15539/#post-174118' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/174118/permalink">#5</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-174119" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="t0kenz">
                            <aside>
                                <div class="attribution type">t0kenz said: <a href="#post-174118" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">I&#039;d like it to list all admins online, not the exact message. When I meant t0kenz, t0kenz1, t0kenz2 I was talking about it listing 3 admins
                                        per &quot;row&quot;. e.g /admins = [AdminsOnline] Admins online: FirstOnlineAdmin, SecondOnlineAdmin ...<br />
                                        <br /> Or, is it as easy as you told me it&#039;d be, or is that simply one part of the whole command function?</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>I&#039;d recommend taking a look at the existing Player List for Rust plugin for an idea of how it works. What I gave you was just the chat sending portion. <div
                            class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="{{ '/threads/in-need-of-some-help-with-my-plugin.15539/#post-174119' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Feb 7, 2016 at 9:42 PM">Feb 7, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/in-need-of-some-help-with-my-plugin.15539/#post-174119' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/174119/permalink">#6</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-174923" class="message" data-author="t0kenz">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="t0kenz" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">t0kenz</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> I contacted <a href="https://oxidemod.org/members/3412/" class="username"
                            data-user="3412, @Domestos">@Domestos</a> about my issue. He responded with possible &quot;solutions&quot; that he claimed to be outdated.<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>PLUGIN.Title = &quot;Admin list&quot;
PLUGIN.Description = &quot;Shows online admins&quot;
PLUGIN.Author = &quot;t0kenz&quot;
PLUGIN.Version = V(0, 0, 1)function PLUGIN:Init()
command.AddChatCommand(&quot;admins&quot;, self.Object, &quot;cmdAdmins&quot;)
permission.RegisterPermission(&quot;permission.online.admins&quot;, self.Plugin)
endlocal function IsAdmin(player)
return player:GetComponent(&quot;BaseNetworkable&quot;).net.connection.authLevel &gt; 1
endlocal function HasPermission(steamId, perm)
if permission.UserHasPermission(steamId, perm) then return true end
return false
endfunction PLUGIN:cmdAdmins(player)
if not player then return end
local playerList = player.activePlayerList
local enum = playerList:GetEnumerator()
local playerCount, adminCount, allCount = 0, 0, 0
local playerString, adminString = &quot;&quot;, &quot;&quot;
local playerStringTbl, adminStringTbl = {}, {}
local i = 0
local maxPlayersPerLine = 3
while enum:MoveNext() do
if IsAdmin(enum.Current) then
adminCount = adminCount + 1
allCount = allCount + 1
adminString = adminString..enum.Current.displayName..&quot;, &quot;
if adminCount == maxPlayersPerLine then
adminStringTbl[i + 1] = adminString
adminString = &quot;&quot;
i = i + 1
end
else
playerCount = playerCount + 1
allCount = allCount + 1
playerString = playerString..enum.Current.displayName..&quot;, &quot;
if playerCount == maxPlayersPerLine then
playerStringTbl[i + 1] = playerString
playerString = &quot;&quot;
i = i + 1
end
end
end
if allCount == 1 then
rust.SendChatMessage(player, &quot; You are the only one online&quot;)
return
end
-- remove comma at the end
if string.sub(playerString, -2, -2) == &quot;,&quot; then
playerString = string.sub(playerString, 1, -3)
end
if string.sub(adminString, -2, -2) == &quot;,&quot; then
adminString = string.sub(adminString, 1, -3)
end
-- Build admin message
if adminCount == 0 then
rust.SendChatMessage(player, &quot;No Admins Online&quot;)
else
local msg = string.gsub(&quot;{count} admins online: &quot;, &quot;{count}&quot;, tostring(adminCount))
rust.SendChatMessage(player, msg)if #adminStringTbl &gt;= 1 then
local msg = string.gsub(&quot;{count} admins online: &quot;, &quot;{count}&quot;, tostring(adminCount))
rust.SendChatMessage(player, msg)
for i = 1, #adminStringTbl, 1 do
rust.SendChatMessage(player, adminStringTbl)
end
rust.SendChatMessage(player, adminString)
else
local msg = string.gsub(&quot;{count} admins online: &quot;, &quot;{count}&quot;, tostring(adminCount))
rust.SendChatMessage(player, msg..adminString)
end
end
end</pre>{% endraw %}
                        </div>It&#039;s meant to check only Admins online, but it doesn&#039;t care neither for permission nor if you&#039;re an admin or not.<br /> Any ideas? <a
                            href="https://oxidemod.org/members/1115/" class="username" data-user="1115, @Wulf">@Wulf</a><br />
                        <br /> kind regards,<br />
                        <br /> t0kenz<br /> [DOUBLEPOST=1455068664][/DOUBLEPOST]Nevermind, figured out a solution. Thanks anyhow!<br /> [DOUBLEPOST=1455068686][/DOUBLEPOST]Feel free to close this
                        thread. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="editDate"> Last edited by a moderator: <span class="DateTime" title="Feb 10, 2016 at 12:00 AM">Feb 10, 2016</span>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">t0kenz</a>,</span>
                        <a href="{{ '/threads/in-need-of-some-help-with-my-plugin.15539/#post-174923' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Feb 9, 2016 at 11:53 PM">Feb 9, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/in-need-of-some-help-with-my-plugin.15539/#post-174923' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/174923/permalink">#7</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-174986" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Sorry, I was away at a movie screening. Glad you got it worked out though! <div class="messageTextEndMarker">
                            &nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="{{ '/threads/in-need-of-some-help-with-my-plugin.15539/#post-174986' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Feb 10, 2016 at 5:07 AM">Feb 10, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/in-need-of-some-help-with-my-plugin.15539/#post-174986' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/174986/permalink">#8</a>
                </div>
            </div>
        </div>
    </li>
</ol>
