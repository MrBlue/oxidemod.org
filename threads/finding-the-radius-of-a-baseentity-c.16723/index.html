---
layout: forums
title: 'Finding the radius of a BaseEntity? (C#)'
breadcrumbs:
 - "Plugin Development": "/forums/plugin-development.105/"
 - "Rust Development": "/forums/rust-development.4/"
---
<div class="titleBar">
    <h1>
        <a href="{{ '/threads/finding-the-radius-of-a-baseentity-c.16723/' | prepend: site.baseurl }}">Finding the radius of a BaseEntity? (C#)</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="{{ '/forums/rust-development.4/' | prepend: site.baseurl }}">Rust Development</a>' started by <a class="username"
            dir="auto">Me_Goes_RAWR</a>, <a href="{{ '/threads/finding-the-radius-of-a-baseentity-c.16723/' | prepend: site.baseurl }}"><span class="DateTime" title="Mar 17, 2016 at 6:12 PM">Mar 17,
                2016</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-188191" class="message" data-author="Me_Goes_RAWR">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Me_Goes_RAWR" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Me_Goes_RAWR</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Hello. Does anyone know how to find the radius of a base entity? I&#039;m trying to make a plugin that will
                        detect if a player is in a radius of a building/base entity and if they placed any of the objects in the radius.<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>        bool isNearOtherBuilding(BasePlayer player, int distance, List&lt;BaseEntity&gt; be)
        {
            bool value = false;
            BaseEntity building = be.Find(x =&gt; x);
            if (be.Exists(x =&gt; x.OwnerID.ToString() != player.OwnerID.ToString()))
            {
                value = true;
            }
            if (Vector3.Distance(player.GetEstimatedWorldPosition(), building.GetEstimatedWorldPosition()) &lt;= distance &amp;&amp; player.OwnerID.ToString() != building.OwnerID.ToString())
            {
                return true;
            }
            return value;
        }</pre>{% endraw %}
                        </div>I got this so far and i don&#039;t think it will work....<br /> the list is for this:<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>                            List&lt;BaseEntity&gt; list = new List&lt;BaseEntity&gt;();
                            Vis.Entities&lt;BaseEntity&gt;(locDeath[player.displayName].GetPosition(), distance, list); </pre>{% endraw %}
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Me_Goes_RAWR</a>,</span>
                        <a href="{{ '/threads/finding-the-radius-of-a-baseentity-c.16723/' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Mar 17, 2016 at 6:12 PM">Mar 17, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/finding-the-radius-of-a-baseentity-c.16723/' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/188191/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-188332" class="message" data-author="azalea`">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="azalea`" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">azalea`</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>private bool AnyEntity(Vector3 position, int radius, BaseEntity IgnoreEntity)
{
            var allColliders = Physics.OverlapSphere(position, radius);            foreach (Collider collider in allColliders)
            {
                if(collider.gameObject.ToBaseEntity() != null)
                {
                    BaseEntity entity = collider.gameObject.ToBaseEntity();                    if(entity != IgnoreEntity)
                    return true;
                }
            }            return false;
}</pre>{% endraw %}
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="editDate"> Last edited by a moderator: <span class="DateTime" title="Mar 18, 2016 at 8:39 AM">Mar 18, 2016</span>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">azalea`</a>,</span>
                        <a href="{{ '/threads/finding-the-radius-of-a-baseentity-c.16723/#post-188332' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Mar 18, 2016 at 2:48 AM">Mar 18, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/finding-the-radius-of-a-baseentity-c.16723/#post-188332' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/188332/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-188747" class="message" data-author="Me_Goes_RAWR">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Me_Goes_RAWR" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Me_Goes_RAWR</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Thanks! I will see if this will fit for me. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Me_Goes_RAWR</a>,</span>
                        <a href="{{ '/threads/finding-the-radius-of-a-baseentity-c.16723/#post-188747' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Mar 19, 2016 at 1:53 PM">Mar 19, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/finding-the-radius-of-a-baseentity-c.16723/#post-188747' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/188747/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-205313" class="message" data-author="Absolut">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Absolut" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Absolut</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> I am looking to make a chat command such as /tc auth &quot;name&quot; to allow a player to authorize another play
                        on all tool cupboards within radius owned by the argument initiator. I think the examples provided are in line with what I am trying to accomplish. Would I go about it the same
                        way meaning, <br />
                        <br /> find all base entitities within given radius<br /> foreach entity check if ToolCupboard. <br /> If ToolCupboard.ownerID is arg.ownerID<br /> authorize.&quot;player&quot;
                        on entity<br />
                        <br />
                        <br /> Obviously this is a verbal rundown versus code but would it work? <br />
                        <br /> My challenge is understanding how to identify radius not so much checking entities.<br />
                        <br /> Im novice... lol<br />
                        <br /> Thanks!<br /> [DOUBLEPOST=1463096321,1463080006][/DOUBLEPOST] <div class="bbCodeBlock bbCodeQuote" data-author="Absolut">
                            <aside>
                                <div class="attribution type">Absolut said: <a href="#post-205313" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">I am looking to make a chat command such as /tc auth &quot;name&quot; to allow a player to authorize another play on all tool cupboards within
                                        radius owned by the argument initiator. I think the examples provided are in line with what I am trying to accomplish. Would I go about it the same way
                                        meaning,<br />
                                        <br /> find all base entitities within given radius<br /> foreach entity check if ToolCupboard.<br /> If ToolCupboard.ownerID is arg.ownerID<br />
                                        authorize.&quot;player&quot; on entity<br />
                                        <br />
                                        <br /> Obviously this is a verbal rundown versus code but would it work?<br />
                                        <br /> My challenge is understanding how to identify radius not so much checking entities.<br />
                                        <br /> Im novice... lol<br />
                                        <br /> Thanks!</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>You can disregard this.. I am almost done with the code just having some issues resolving the Vector3.<br />
                        <br /> Thanks! This helped get me going. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Absolut</a>,</span>
                        <a href="{{ '/threads/finding-the-radius-of-a-baseentity-c.16723/#post-205313' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 13, 2016 at 12:38 AM">May 13, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/finding-the-radius-of-a-baseentity-c.16723/#post-205313' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/205313/permalink">#4</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-205450" class="message" data-author="DylanSMR">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="DylanSMR" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">DylanSMR</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Absolut">
                            <aside>
                                <div class="attribution type">Absolut said: <a href="#post-205313" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">I am looking to make a chat command such as /tc auth &quot;name&quot; to allow a player to authorize another play on all tool cupboards within
                                        radius owned by the argument initiator. I think the examples provided are in line with what I am trying to accomplish. Would I go about it the same way
                                        meaning,<br />
                                        <br /> find all base entitities within given radius<br /> foreach entity check if ToolCupboard.<br /> If ToolCupboard.ownerID is arg.ownerID<br />
                                        authorize.&quot;player&quot; on entity<br />
                                        <br />
                                        <br /> Obviously this is a verbal rundown versus code but would it work?<br />
                                        <br /> My challenge is understanding how to identify radius not so much checking entities.<br />
                                        <br /> Im novice... lol<br />
                                        <br /> Thanks!<br /> [DOUBLEPOST=1463096321,1463080006][/DOUBLEPOST]<br />
                                        <br /> You can disregard this.. I am almost done with the code just having some issues resolving the Vector3.<br />
                                        <br /> Thanks! This helped get me going.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Just incase you need help, you can look at my CupboardLogs and I have a fair example of how that kind of works.<br /> [DOUBLEPOST=1463100237][/DOUBLEPOST]So like: <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>
List&lt;BaseEntity&gt; nearby = new List&lt;BaseEntity&gt;();
Vis.Entities(player.transform.position, 3, nearby);
    foreach (var ent in nearby) 
    {
         if(player.userID == cupboard.OwnerID) copboard.auth(player);
         else return;
    }</pre>{% endraw %}
                        </div>[DOUBLEPOST=1463100259][/DOUBLEPOST]You would also have to check if int is cupboard like: if(ent.LookupPrefabName().Contains(&quot;cupboard&quot;)) <div
                            class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">DylanSMR</a>,</span>
                        <a href="{{ '/threads/finding-the-radius-of-a-baseentity-c.16723/#post-205450' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 13, 2016 at 1:41 AM">May 13, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/finding-the-radius-of-a-baseentity-c.16723/#post-205450' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/205450/permalink">#5</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-205451" class="message" data-author="Absolut">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Absolut" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Absolut</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Here is what I have thus far and I am working out an error on &#039;BaseEntity&#039; does not contain a
                        definition for &#039;authorizedPlayers&#039;. I did something similiar for AutoTurrets so I&#039;m sure I fat fingering or overlooking something!<br />
                        <br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>      [ChatCommand(&quot;tcauth&quot;)]
        void cmdAuthPlayer(BasePlayer player, string cmd, string[] args)
        {
            if (player != null)
            if (args.Length == 0)
            {
                    SendReply(player, &quot;Syntax: /tcauth &lt;PARTIAL_PLAYERNAME&gt;&quot;);
                return;
            }            if (args.Length == 1)
            {
                var partialPlayerName = args[0];
                var foundPlayers = FindPlayer(partialPlayerName);
                if (foundPlayers.Count == 0)
                {
                    SendReply(player, &quot;No players found&quot;);
                    return;
                }
                if (foundPlayers.Count &gt; 1)
                {
                    SendReply(player, &quot;Multiple players found&quot;);
                    return;
                }
                if (foundPlayers[0] != null)
                {
                    var position = player.transform.position;
                    //SendReply(player, $&quot;Target player is {foundPlayers[0]}&quot;);
                    GetPlayerTCs(player, foundPlayers[0], position);
                    return;
                }
            }
        } void GetPlayerTCs(BasePlayer player, BasePlayer target, Vector3 position)
        {
            ToolCupboardPrefabId = StringPool.Get(ToolCupboardPrefab);
            if (AuthorizedTC(player))
               
            {
                //SendReply(player, $&quot;You are authorized on a nearby ToolCupboard - target is {target}&quot;);
                float distance = 2f;
                List&lt;BaseEntity&gt; list = new List&lt;BaseEntity&gt;();
                Vis.Entities&lt;BaseEntity&gt;(position, distance, list);                foreach (BaseEntity entity in list)
                {
                    if (entity.prefabID == ToolCupboardPrefabId)
                    {
                        //SendReply(player, &quot;There is a ToolCupboard nearby that you are authroized on!&quot;);
                        entity.authorizedPlayers.Add(new ProtoBuf.PlayerNameID() { userid = target.userID, username = target.displayName });
                    }
                }
            }
            else if (!AuthorizedTC(player)) SendReply(player, &quot;You are not authorized on a nearby ToolCupboard&quot;);        }</pre>{% endraw %}
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Absolut</a>,</span>
                        <a href="{{ '/threads/finding-the-radius-of-a-baseentity-c.16723/#post-205451' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 13, 2016 at 1:52 AM">May 13, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/finding-the-radius-of-a-baseentity-c.16723/#post-205451' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/205451/permalink">#6</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-205453" class="message" data-author="DylanSMR">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="DylanSMR" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">DylanSMR</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Absolut">
                            <aside>
                                <div class="attribution type">Absolut said: <a href="#post-205451" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Here is what I have thus far and I am working out an error on &#039;BaseEntity&#039; does not contain a definition for
                                        &#039;authorizedPlayers&#039;. I did something similiar for AutoTurrets so I&#039;m sure I fat fingering or overlooking something!<br />
                                        <br />
                                        <br />
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            {% raw %}<pre>      [ChatCommand(&quot;tcauth&quot;)]
        void cmdAuthPlayer(BasePlayer player, string cmd, string[] args)
        {
            if (player != null)
            if (args.Length == 0)
            {
                    SendReply(player, &quot;Syntax: /tcauth &lt;PARTIAL_PLAYERNAME&gt;&quot;);
                return;
            }            if (args.Length == 1)
            {
                var partialPlayerName = args[0];
                var foundPlayers = FindPlayer(partialPlayerName);
                if (foundPlayers.Count == 0)
                {
                    SendReply(player, &quot;No players found&quot;);
                    return;
                }
                if (foundPlayers.Count &gt; 1)
                {
                    SendReply(player, &quot;Multiple players found&quot;);
                    return;
                }
                if (foundPlayers[0] != null)
                {
                    var position = player.transform.position;
                    //SendReply(player, $&quot;Target player is {foundPlayers[0]}&quot;);
                    GetPlayerTCs(player, foundPlayers[0], position);
                    return;
                }
            }
        }void GetPlayerTCs(BasePlayer player, BasePlayer target, Vector3 position)
        {
            ToolCupboardPrefabId = StringPool.Get(ToolCupboardPrefab);
            if (AuthorizedTC(player))
              
            {
                //SendReply(player, $&quot;You are authorized on a nearby ToolCupboard - target is {target}&quot;);
                float distance = 2f;
                List&lt;BaseEntity&gt; list = new List&lt;BaseEntity&gt;();
                Vis.Entities&lt;BaseEntity&gt;(position, distance, list);                foreach (BaseEntity entity in list)
                {
                    if (entity.prefabID == ToolCupboardPrefabId)
                    {
                        //SendReply(player, &quot;There is a ToolCupboard nearby that you are authroized on!&quot;);
                        entity.authorizedPlayers.Add(new ProtoBuf.PlayerNameID() { userid = target.userID, username = target.displayName });
                    }
                }
            }
            else if (!AuthorizedTC(player)) SendReply(player, &quot;You are not authorized on a nearby ToolCupboard&quot;);        }</pre>{% endraw %}
                                        </div>
                                    </div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Give me a few moments, I will look into it!<br /> [DOUBLEPOST=1463102299][/DOUBLEPOST] <div class="bbCodeBlock bbCodeQuote" data-author="Absolut">
                            <aside>
                                <div class="attribution type">Absolut said: <a href="#post-205451" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Here is what I have thus far and I am working out an error on &#039;BaseEntity&#039; does not contain a definition for
                                        &#039;authorizedPlayers&#039;. I did something similiar for AutoTurrets so I&#039;m sure I fat fingering or overlooking something!<br />
                                        <br />
                                        <br />
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            {% raw %}<pre>      [ChatCommand(&quot;tcauth&quot;)]
        void cmdAuthPlayer(BasePlayer player, string cmd, string[] args)
        {
            if (player != null)
            if (args.Length == 0)
            {
                    SendReply(player, &quot;Syntax: /tcauth &lt;PARTIAL_PLAYERNAME&gt;&quot;);
                return;
            }            if (args.Length == 1)
            {
                var partialPlayerName = args[0];
                var foundPlayers = FindPlayer(partialPlayerName);
                if (foundPlayers.Count == 0)
                {
                    SendReply(player, &quot;No players found&quot;);
                    return;
                }
                if (foundPlayers.Count &gt; 1)
                {
                    SendReply(player, &quot;Multiple players found&quot;);
                    return;
                }
                if (foundPlayers[0] != null)
                {
                    var position = player.transform.position;
                    //SendReply(player, $&quot;Target player is {foundPlayers[0]}&quot;);
                    GetPlayerTCs(player, foundPlayers[0], position);
                    return;
                }
            }
        }void GetPlayerTCs(BasePlayer player, BasePlayer target, Vector3 position)
        {
            ToolCupboardPrefabId = StringPool.Get(ToolCupboardPrefab);
            if (AuthorizedTC(player))
              
            {
                //SendReply(player, $&quot;You are authorized on a nearby ToolCupboard - target is {target}&quot;);
                float distance = 2f;
                List&lt;BaseEntity&gt; list = new List&lt;BaseEntity&gt;();
                Vis.Entities&lt;BaseEntity&gt;(position, distance, list);                foreach (BaseEntity entity in list)
                {
                    if (entity.prefabID == ToolCupboardPrefabId)
                    {
                        //SendReply(player, &quot;There is a ToolCupboard nearby that you are authroized on!&quot;);
                        entity.authorizedPlayers.Add(new ProtoBuf.PlayerNameID() { userid = target.userID, username = target.displayName });
                    }
                }
            }
            else if (!AuthorizedTC(player)) SendReply(player, &quot;You are not authorized on a nearby ToolCupboard&quot;);        }</pre>{% endraw %}
                                        </div>
                                    </div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>This should work. If your wondering what I did.<br /> *I created a new local variable defining every ent found in a radius(var ent).<br /> *I then defined a new
                        variable(tce).<br /> *I defined that as (ent as BuildingPrivlidge) which allowed it to realize what authorizedPlayers meant.<br /> *Took me a few moments but this should work.
                        <br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>        void GetPlayerTCs(BasePlayer player, BasePlayer target, Vector3 position)
        {
            ToolCupboardPrefabId = StringPool.Get(ToolCupboardPrefab);
            if (AuthorizedTC(player))
              
            {
                //SendReply(player, $&quot;You are authorized on a nearby ToolCupboard - target is {target}&quot;);
                float distance = 2f;
                List&lt;BaseEntity&gt; list = new List&lt;BaseEntity&gt;();
                Vis.Entities&lt;BaseEntity&gt;(position, distance, list);                foreach (var ent in list)
                {
                    if (ent.prefabID == ToolCupboardPrefabId)
                    {
                        var tce = ent as BuildingPrivlidge;
                        //SendReply(player, &quot;There is a ToolCupboard nearby that you are authroized on!&quot;);
                        tce.authorizedPlayers.Add(new ProtoBuf.PlayerNameID() { userid = target.userID, username = target.displayName });
                    }
                }
            }
            else if (!AuthorizedTC(player)) SendReply(player, &quot;You are not authorized on a nearby ToolCupboard&quot;);
        }</pre>{% endraw %}
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">DylanSMR</a>,</span>
                        <a href="{{ '/threads/finding-the-radius-of-a-baseentity-c.16723/#post-205453' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 13, 2016 at 2:08 AM">May 13, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/finding-the-radius-of-a-baseentity-c.16723/#post-205453' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/205453/permalink">#7</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-205460" class="message" data-author="Absolut">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Absolut" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Absolut</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Ahh I was on to it but couldnt figure it out! Thank you so much I really appreciate it. I think this concludes my
                        server modifications (I&#039;ve said that way to many times... lol)<br /> [DOUBLEPOST=1463107921][/DOUBLEPOST]Ahh false alarm! It just doesn&#039;t seem to work but there are
                        no errors. This should be adding and removing someone from the building privileged list.<br />
                        <br /> I am getting the SendReply as notification of what it is attempting but as mentioned the cupboard never updates. Any idea why? <div class="messageTextEndMarker">&nbsp;
                        </div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Absolut</a>,</span>
                        <a href="{{ '/threads/finding-the-radius-of-a-baseentity-c.16723/#post-205460' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 13, 2016 at 2:25 AM">May 13, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/finding-the-radius-of-a-baseentity-c.16723/#post-205460' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/205460/permalink">#8</a>
                </div>
            </div>
        </div>
    </li>
</ol>
