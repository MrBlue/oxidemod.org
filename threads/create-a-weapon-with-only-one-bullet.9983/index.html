---
layout: forums
title: 'Create a weapon with only one bullet'
breadcrumbs:
 - "Plugin Development": "/forums/plugin-development.105/"
 - "Rust Development": "/forums/rust-development.4/"
---
<div class="titleBar">
    <h1>
        <a href="{{ '/threads/create-a-weapon-with-only-one-bullet.9983/' | prepend: site.baseurl }}">Create a weapon with only one bullet</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="{{ '/forums/rust-development.4/' | prepend: site.baseurl }}">Rust Development</a>' started by <a class="username"
            dir="auto">Rouss</a>, <a href="{{ '/threads/create-a-weapon-with-only-one-bullet.9983/' | prepend: site.baseurl }}"><span class="DateTime" title="Jul 3, 2015 at 9:59 PM">Jul 3,
                2015</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-105474" class="message" data-author="Rouss">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Rouss" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Rouss</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">Hi,<br />
                        <br /> I&#039;m trying to create a weapon, like an ak-47, or a shotgun, but only with one or two bullet in the magazine.<br /> I create the item via
                        &quot;ItemManager.CreateByName...&quot;.<br />
                        <br /> I know that there is a BaseProjectile entity created for that item with a related Magazine that I could manipulate, but how can I retrieve the BaseProjectile from the
                        newly created Item ?<br />
                        <br /> Thanks for your help<br /> [DOUBLEPOST=1435959566][/DOUBLEPOST]I&#039;ve managed to do something that might work, but I&#039;m not sure what would occur if a
                        &quot;rifle_ak&quot; was crafted.<br /> Here is what I&#039;ve done so far:<br /> In case AddRandomItemToContainer is called, an ak-47 with only 2 bullets is added to the
                        container<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>        private void AddRandomItemToContainer(BasePlayer player, ItemContainer container)
        {
// ... Removed code, to randomize the item to put in container
            string currentItemName = &quot;rifle_ak&quot;;
// ....            validateNewItemConfig = true;
            Item item = ItemManager.CreateByName(currentItemName);
            validateNewItemConfig = false;            item.MoveToContainer(container);
        }        bool validateNewItemConfig = false;        void OnEntitySpawned(BaseNetworkable entity)
        {
            BaseProjectile projectile = entity.GetComponent&lt;BaseProjectile&gt;();            if (projectile == null)
                return;            if(projectile.name == &quot;weapons/rifle/ak47u.weapon&quot; &amp;&amp; validateNewItemConfig)
            {
                switch(projectile.name)
                {
                    case &quot;weapons/rifle/ak47u.weapon&quot;:
                        projectile.primaryMagazine.contents = 2;
                        break;
                }
            }
        }</pre>{% endraw %}
                        </div>[DOUBLEPOST=1435959720][/DOUBLEPOST]Obviously, the switch in the last &quot;if&quot; block is totaly useless. Just some testing code not really ended... <div
                            class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Rouss</a>,</span>
                        <a href="{{ '/threads/create-a-weapon-with-only-one-bullet.9983/' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 3, 2015 at 9:59 PM">Jul 3, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/create-a-weapon-with-only-one-bullet.9983/' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/105474/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-106759" class="message" data-author="Norn">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Norn" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Norn</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">From what I&#039;ve seen ammo doesn&#039;t become a thing in the gun until it&#039;s equipped. <div
                            class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Norn</a>,</span>
                        <a href="{{ '/threads/create-a-weapon-with-only-one-bullet.9983/#post-106759' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 9, 2015 at 1:45 AM">Jul 9, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/create-a-weapon-with-only-one-bullet.9983/#post-106759' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/106759/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
</ol>
