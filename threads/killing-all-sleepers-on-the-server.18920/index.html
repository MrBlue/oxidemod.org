---
layout: forums
title: 'Killing all sleepers on the server'
breadcrumbs:
 - "Plugin Development": "/forums/plugin-development.105/"
 - "Rust Development": "/forums/rust-development.4/"
---
<div class="titleBar">
    <h1>
        <a href="{{ '/threads/killing-all-sleepers-on-the-server.18920/' | prepend: site.baseurl }}">Killing all sleepers on the server</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="{{ '/forums/rust-development.4/' | prepend: site.baseurl }}">Rust Development</a>' started by <a class="username"
            dir="auto">ThunderZ</a>, <a href="{{ '/threads/killing-all-sleepers-on-the-server.18920/' | prepend: site.baseurl }}"><span class="DateTime" title="Jun 24, 2016 at 6:21 AM">Jun 24,
                2016</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-218681" class="message" data-author="ThunderZ">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="ThunderZ" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">ThunderZ</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> How to do it by looping through the sleeper list? I tried<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>            for (var p = 0; p &lt; BasePlayer.sleepingPlayerList.Count; p++) {
                BasePlayer player = BasePlayer.sleepingPlayerList[p];
               
                player.Hurt(1000,Rust.DamageType.Suicide,null);
            }</pre>{% endraw %}
                        </div>But it just crashes the plugin. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">ThunderZ</a>,</span>
                        <a href="{{ '/threads/killing-all-sleepers-on-the-server.18920/' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jun 24, 2016 at 6:21 AM">Jun 24, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/killing-all-sleepers-on-the-server.18920/' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/218681/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-218683" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> player.Die() <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="{{ '/threads/killing-all-sleepers-on-the-server.18920/#post-218683' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jun 24, 2016 at 6:22 AM">Jun 24, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/killing-all-sleepers-on-the-server.18920/#post-218683' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/218683/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-218685" class="message" data-author="ThunderZ">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="ThunderZ" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">ThunderZ</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Wulf">
                            <aside>
                                <div class="attribution type">Wulf said: <a href="#post-218683" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">player.Die()</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Is there a list of these functions? I don&#039;t see them in the API Docs. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">ThunderZ</a>,</span>
                        <a href="{{ '/threads/killing-all-sleepers-on-the-server.18920/#post-218685' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jun 24, 2016 at 6:23 AM">Jun 24, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/killing-all-sleepers-on-the-server.18920/#post-218685' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/218685/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-218686" class="message staff" data-author="Wulf">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Wulf" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto" itemprop="name">Wulf</a>
                    <em class="userBanner bannerRed wrapped" itemprop="title"><span class="before"></span><strong>Community Admin</strong><span class="after"></span></em>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="ThunderZ">
                            <aside>
                                <div class="attribution type">ThunderZ said: <a href="#post-218685" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Is there a list of these functions? I don&#039;t see them in the API Docs.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>It&#039;s not from Oxide, it&#039;s from Rust. You&#039;d need to use JustDecompile or another decompiler to view most of it. <div class="messageTextEndMarker">&nbsp;
                        </div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Wulf</a>,</span>
                        <a href="{{ '/threads/killing-all-sleepers-on-the-server.18920/#post-218686' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jun 24, 2016 at 6:25 AM">Jun 24, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/killing-all-sleepers-on-the-server.18920/#post-218686' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/218686/permalink">#4</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-218690" class="message" data-author="ThunderZ">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="ThunderZ" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">ThunderZ</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Wulf">
                            <aside>
                                <div class="attribution type">Wulf said: <a href="#post-218686" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">It&#039;s not from Oxide, it&#039;s from Rust. You&#039;d need to use JustDecompile or another decompiler to view most of it.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Hm it&#039;s still crashing regardless.<br />
                        <br /> I&#039;m probably doing this wrong but i&#039;m getting this error:<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>05:28 [Info] NukeTown was compiled successfully in 2111ms
05:28 [Info] Loaded plugin NukeTown v1.0.0 by Delusion
05:28 [Error] Failed to run a 1.00 timer in 'NukeTown v1.0.0' (InvalidOperationException: Collection was modified; enumeration operation may not execute.)
05:28 [Debug]   at System.Collections.Generic.List`1+Enumerator[BasePlayer].VerifyState () [0x00000] in &lt;filename unknown&gt;:0
  at System.Collections.Generic.List`1+Enumerator[BasePlayer].MoveNext () [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Plugins.NukeTown.&lt;Init&gt;m__0 () [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Core.Libraries.Timer+TimerInstance.FireCallback () [0x00000] in &lt;filename unknown&gt;:0 </pre>{% endraw %}
                        </div><br /> is the code running im thinking i shouldnt be using timer repeat? is whats causing it?<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>timer.Repeat(1f, 0, () =&gt;
            {
                if(currTick == maxTick-5){
                    rust.BroadcastChat(string.Format(&quot;[NukeTown] Switching to {0} in 5.&quot;, nextMap),null,null);
                }
               
                if(currTick == maxTick-4){
                    rust.BroadcastChat(string.Format(&quot;[NukeTown] Switching to {0} in 4.&quot;, nextMap),null,null);
                }
               
                if(currTick == maxTick-3){
                    rust.BroadcastChat(string.Format(&quot;[NukeTown] Switching to {0} in 3.&quot;, nextMap),null,null);
                }
               
                if(currTick == maxTick-2){
                    rust.BroadcastChat(string.Format(&quot;[NukeTown] Switching to {0} in 2.&quot;, nextMap),null,null);
                }
               
                if(currTick == maxTick-1){
                    rust.BroadcastChat(string.Format(&quot;[NukeTown] Switching to {0} in 1.&quot;, nextMap),null,null);
                }
               
                if(currTick == minute*3){
                    rust.BroadcastChat(string.Format(&quot;[NukeTown] 5 Minutes left.&quot;, nextMap),null,null);
                }
               
                if(currTick == minute*5){
                    rust.BroadcastChat(string.Format(&quot;[NukeTown] 3 Minutes left.&quot;, nextMap),null,null);
                }
               
                if(currTick == minute*7){
                    rust.BroadcastChat(string.Format(&quot;[NukeTown] 1 Minute left.&quot;, nextMap),null,null);
                }
               
                if(currTick &gt; maxTick){
                    rust.BroadcastChat(string.Format(&quot;[NukeTown] Switching to {0}.&quot;, nextMap),null,null);
                   
                    foreach (var sleeper in BasePlayer.sleepingPlayerList){
                        sleeper.Hurt(1000,Rust.DamageType.Suicide,null);
                    }
                   
                    relocatePlayers(nextMap);
                   
                    if(nextMap == &quot;Powerplant&quot;){
                        spawnsname = &quot;Powerplant&quot;;
                        nextMap = &quot;Satellite&quot;;
                    }
                    else if(nextMap == &quot;Satellite&quot;){
                        spawnsname = &quot;Satellite&quot;;
                        nextMap = &quot;Water Treatment&quot;;
                    }
                    else if(nextMap == &quot;Water Treatment&quot;){
                        spawnsname = &quot;Water Treatment&quot;;
                        nextMap = &quot;Powerplant&quot;;
                    }
                   
                    currTick = 0;
                }
               
                rust.BroadcastChat(string.Format(&quot;{0} {1} {3}/{2}&quot;, currTick, maxTick, nextMap, spawnsname),null,null);
               
                currTick++;
            });</pre>{% endraw %}
                        </div>[DOUBLEPOST=1466746249][/DOUBLEPOST]Nevermind i forgot to remove a piece of code lol lemme try that derp. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">ThunderZ</a>,</span>
                        <a href="{{ '/threads/killing-all-sleepers-on-the-server.18920/#post-218690' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jun 24, 2016 at 6:30 AM">Jun 24, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/killing-all-sleepers-on-the-server.18920/#post-218690' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/218690/permalink">#5</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-228884" class="message" data-author="Caffeine">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Caffeine" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Caffeine</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> You already got your question resolved so this is a bit unrelated and you don&#039;t have to answer but i&#039;m
                        curious why do you want to kill all sleepers? Is your server unique in its purpose or what? <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Caffeine</a>,</span>
                        <a href="{{ '/threads/killing-all-sleepers-on-the-server.18920/#post-228884' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 14, 2016 at 6:53 PM">Jul 14, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/killing-all-sleepers-on-the-server.18920/#post-228884' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/228884/permalink">#6</a>
                </div>
            </div>
        </div>
    </li>
</ol>
