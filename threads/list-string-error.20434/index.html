---
layout: forums
title: 'Solved - List&lt;string&gt; error'
breadcrumbs:
 - "Plugin Development": "/forums/plugin-development.105/"
 - "Rust Development": "/forums/rust-development.4/"
---
<div class="titleBar">
    <h1>
        <span class="prefix prefixGreen">Solved</span> <a href="{{ '/threads/list-string-error.20434/' | prepend: site.baseurl }}">List&lt;string&gt; error</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="{{ '/forums/rust-development.4/' | prepend: site.baseurl }}">Rust Development</a>' started by <a class="username"
            dir="auto">DylanSMR</a>, <a href="{{ '/threads/list-string-error.20434/' | prepend: site.baseurl }}"><span class="DateTime" title="Aug 20, 2016 at 2:04 AM">Aug 20, 2016</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-243274" class="message" data-author="DylanSMR">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="DylanSMR" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">DylanSMR</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> So heres the code I am using currently:<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>            void GiveAllItems()
            {
                foreach(var player in BasePlayer.activePlayerList)
                {
                    var createChance = Oxide.Core.Random.Range(0, 1);   
                    List&lt;string&gt; shorts = new List&lt;string&gt;();
                    for(var i = 0; i &lt; happyData.hData[CurrentEvent].iData.Count; i++)
                    {
                        if(happyData.hData[CurrentEvent].iData[i].Rarity &gt;= createChance) shorts.Add(happyData.hData[CurrentEvent].iData[i].ItemShortName);
                    }
                   
                    var iChance = Oxide.Core.Random.Range(1, shorts.Count);
                    var givenItem = shorts[iChance];
                    var amount = 0;                    for(var i = 0; i &lt; happyData.hData[CurrentEvent].iData.Count; i++)
                    {
                        if(happyData.hData[CurrentEvent].iData[i].ItemShortName == givenItem) amount = happyData.hData[CurrentEvent].iData[i].Amount;
                    }                    var definition = FindItemDefinition(givenItem);
                    if (definition != null)
                    {
                        var item = ItemManager.Create(definition, amount);
                        if (item != null) player.inventory.GiveItem(item, player.inventory.containerMain);
                        SendReply(player, lang.GetMessage(&quot;GivenItem&quot;, this, player.UserIDString), amount, givenItem);
                    }
                }       
            }</pre>{% endraw %}
                        </div>You can see this code where the error is forming(Keeping in-mind there is something in that file upon it being called:<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>var givenItem = shorts[iChance];</pre>{% endraw %}
                        </div>
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>[Oxide] 20:00 [Error] Failed to call hook 'Test' on plugin 'HappyHour v0.1.0' (ArgumentOutOfRangeException: Argument is out of range.
Parameter name: index)
[Oxide] 20:00 [Debug]   at System.Collections.Generic.List`1[System.String].get_Item (Int32 index) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Plugins.HappyHour.GiveAllItems () [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Plugins.HappyHour.Test () [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Plugins.HappyHour.DirectCallHook (System.String name, System.Object&amp; ret, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Plugins.CSharpPlugin.InvokeMethod (HookMethod method, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Core.Plugins.CSPlugin.OnCallHook (System.String name, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Core.Plugins.Plugin.CallHook (System.String name, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0</pre>{% endraw %}
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">DylanSMR</a>,</span>
                        <a href="{{ '/threads/list-string-error.20434/' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime" title="Aug 20, 2016 at 2:04 AM">Aug
                                20, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/list-string-error.20434/' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/243274/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-243299" class="message" data-author="Shady757">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Shady757" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Shady757</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> If it&#039;s empty, it will probably give you that exception. I just quickly looked over it, so I may be guessing
                        wrong. Another thing you <i>may</i> want to change the Random Range to 0 instead of 1, since the index actually starts at 0.<br />
                        <br /> EDIT: You say there&#039;s something in the file, but just for the sake of it, try doing a foreach and print the contents of it and see if there actually is something
                        there, or check the count. Otherwise, the error seems quite strange and I&#039;m just not seeing it. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Shady757</a>,</span>
                        <a href="{{ '/threads/list-string-error.20434/#post-243299' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Aug 20, 2016 at 3:00 AM">Aug 20, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/list-string-error.20434/#post-243299' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/243299/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-243336" class="message" data-author="k1lly0u">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="k1lly0u" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">k1lly0u</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Shady is on the ball, to expand on .what he said about using 0 as the first number in iChance, you also need to
                        subtract 1 from the count. Since the first entry index is 0 the last entry index will be 1 less then the count. I know you already knew this though <img
                            src="{{ '/assets/styles/default/xenforo/clear.png' | prepend: site.baseurl }}" class="mceSmilieSprite mceSmilie2" alt=";)" title="Wink    ;)" />
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">k1lly0u</a>,</span>
                        <a href="{{ '/threads/list-string-error.20434/#post-243336' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Aug 20, 2016 at 5:39 AM">Aug 20, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/list-string-error.20434/#post-243336' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/243336/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-243359" class="message" data-author="Shady757">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Shady757" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Shady757</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="k1lly0u">
                            <aside>
                                <div class="attribution type">k1lly0u said: <a href="#post-243336" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Shady is on the ball, to expand on .what he said about using 0 as the first number in iChance, you also need to subtract 1 from the count. Since
                                        the first entry index is 0 the last entry index will be 1 less then the count. I know you already knew this though <img src="{{ '/assets/styles/default/xenforo/clear.png' | prepend: site.baseurl }}"
                                            class="mceSmilieSprite mceSmilie2" alt=";)" title="Wink    ;)" /></div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div><br /> Ahh, yes, that&#039;s it! I knew it was something simple, but looking at the code I couldn&#039;t quite get it, I was half way there, at least. <img
                            src="{{ '/assets/styles/default/xenforo/clear.png' | prepend: site.baseurl }}" class="mceSmilieSprite mceSmilie2" alt=";)" title="Wink    ;)" />
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Shady757</a>,</span>
                        <a href="{{ '/threads/list-string-error.20434/#post-243359' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Aug 20, 2016 at 6:16 AM">Aug 20, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/list-string-error.20434/#post-243359' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/243359/permalink">#4</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-243540" class="message" data-author="DylanSMR">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="DylanSMR" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">DylanSMR</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Thanks guys. I probably should have noticed the 1 instead of a 0 but it happens. <img
                            src="{{ '/assets/styles/default/xenforo/clear.png' | prepend: site.baseurl }}" class="mceSmilieSprite mceSmilie1" alt=":)" title="Smile    :)" />
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">DylanSMR</a>,</span>
                        <a href="{{ '/threads/list-string-error.20434/#post-243540' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Aug 20, 2016 at 5:32 PM">Aug 20, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/list-string-error.20434/#post-243540' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/243540/permalink">#5</a>
                </div>
            </div>
        </div>
    </li>
</ol>
