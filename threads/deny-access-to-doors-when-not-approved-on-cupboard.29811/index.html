---
layout: forums
title: 'Rust - Deny Access To doors when not approved on Cupboard'
breadcrumbs:
 - "Plugin Requests": "/forums/plugin-requests.10/"
---
<div class="titleBar">
    <h1>
        <span class="prefix prefixRed">Rust</span> <a href="{{ '/threads/deny-access-to-doors-when-not-approved-on-cupboard.29811/' | prepend: site.baseurl }}">Deny Access To doors when not approved
            on Cupboard</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="{{ '/forums/plugin-requests.10/' | prepend: site.baseurl }}">Plugin Requests</a>' started by <a class="username"
            dir="auto">virobeast</a>, <a href="{{ '/threads/deny-access-to-doors-when-not-approved-on-cupboard.29811/' | prepend: site.baseurl }}"><span class="DateTime"
                title="Mar 7, 2018 at 7:31 PM">Mar 7, 2018</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-390370" class="message" data-author="virobeast">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="virobeast" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">virobeast</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">I am currently developing a solo only server concept and want to achieve the following<br />
                        <ul>
                            <li>Single set exclusion by use of the TC</li>
                        </ul><b>Outline</b><br /> Check for tc priv<br /> If no tc priv do any of the following (Configurable)<br />
                        <ul>
                            <li>Do not allow Lock </li>
                            <li>Do not allow Unlock</li>
                            <li>Disable opening doors alltogether (Even if you had been previously authorised through code)</li>
                            <li>Disable opening entities such as furnaces and boxes</li>
                        </ul><br /> The configurable options above should nut out most possibilities of abuse.<br />
                        <br /> Further forward you can also add<br /> CanAssignBed = False for both people with and without tc <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">virobeast</a>,</span>
                        <a href="{{ '/threads/deny-access-to-doors-when-not-approved-on-cupboard.29811/' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Mar 7, 2018 at 7:31 PM">Mar 7, 2018</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/deny-access-to-doors-when-not-approved-on-cupboard.29811/' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/390370/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-390383" class="message" data-author="hoppel">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="hoppel" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">hoppel</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <a href="https://oxidemod.org/plugins/group-limits.2504/" class="internalLink">Group Limits</a>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">hoppel</a>,</span>
                        <a href="{{ '/threads/deny-access-to-doors-when-not-approved-on-cupboard.29811/#post-390383' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Mar 7, 2018 at 8:45 PM">Mar 7, 2018</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/deny-access-to-doors-when-not-approved-on-cupboard.29811/#post-390383' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/390383/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-390422" class="message" data-author="virobeast">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="virobeast" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">virobeast</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">Group limits has 2 failings that the request above addresses to prevent them being circumvented and with as little
                        need for admin input as possible.<br />
                        <ul>
                            <li>De-authorise on cupboard place alternate lock for entrance</li>
                            <li>Place and authorise additional locks for additional people before tc</li>
                        </ul>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">virobeast</a>,</span>
                        <a href="{{ '/threads/deny-access-to-doors-when-not-approved-on-cupboard.29811/#post-390422' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Mar 7, 2018 at 11:35 PM">Mar 7, 2018</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/deny-access-to-doors-when-not-approved-on-cupboard.29811/#post-390422' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/390422/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-390610" class="message" data-author="virobeast">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="virobeast" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">virobeast</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">General idea of what i wish to achieve, it is likely wrong but will give an idea.<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>        object CanUseLockedEntity(BasePlayer player, BaseLock door)
        {
            if (!initialized) return null;
            var parent = door.parentEntity.Get(true);
            var prefab = parent.LookupPrefab();
            if (parent.IsOpen()) return true;
            {
                if (AllowedToBuild(player)) return true;
            }
            else return false;
            
        }</pre>{% endraw %}
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">virobeast</a>,</span>
                        <a href="{{ '/threads/deny-access-to-doors-when-not-approved-on-cupboard.29811/#post-390610' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Mar 9, 2018 at 7:47 AM">Mar 9, 2018</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/deny-access-to-doors-when-not-approved-on-cupboard.29811/#post-390610' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/390610/permalink">#4</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-390634" class="message" data-author="virobeast">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="virobeast" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">virobeast</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">Achieved by adding the following to the shared doors plugin<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>            private bool CanOpenCodeLock(CodeLock door, BasePlayer player)
            {
                bool canUse = false;                canUse = (player.CanBuild() &amp;&amp; checker.IsPlayerAuthorized());                return canUse;
            }            private bool CanOpenKeyLock(KeyLock door, BasePlayer player)
            {
                bool canUse = false;                canUse = (player.CanBuild() &amp;&amp; checker.IsPlayerAuthorized());                return canUse;
            }</pre>{% endraw %}
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">virobeast</a>,</span>
                        <a href="{{ '/threads/deny-access-to-doors-when-not-approved-on-cupboard.29811/#post-390634' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span
                                class="DateTime" title="Mar 9, 2018 at 1:58 PM">Mar 9, 2018</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/deny-access-to-doors-when-not-approved-on-cupboard.29811/#post-390634' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/390634/permalink">#5</a>
                </div>
            </div>
        </div>
    </li>
</ol>
