---
layout: forums
title: 'Solved - NullPointerException with OnEntityDeath (JS)'
breadcrumbs:
 - "Game Discussion": "/categories/game-discussion.106/"
 - "Rust Discussion": "/forums/rust-discussion.23/"
---
<div class="titleBar">
    <h1>
        <span class="prefix prefixGreen">Solved</span> <a href="{{ '/threads/nullpointerexception-with-onentitydeath-js.8590/' | prepend: site.baseurl }}">NullPointerException with OnEntityDeath
            (JS)</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="{{ '/forums/rust-discussion.23/' | prepend: site.baseurl }}">Rust Discussion</a>' started by <a class="username"
            dir="auto">KillParadise</a>, <a href="{{ '/threads/nullpointerexception-with-onentitydeath-js.8590/' | prepend: site.baseurl }}"><span class="DateTime" title="May 19, 2015 at 2:33 PM">May
                19, 2015</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-90369" class="message" data-author="KillParadise">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="KillParadise" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">KillParadise</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> With the latest build of Oxide it seems that the setup I have for OnEntityDeath is now broken, I&#039;m not 100%
                        sure why and maybe it&#039;s just the setup I am using.<br /> It seems like Walls, Barricades, and when a server removes extra animal entities from the map the Hook throws a
                        NullPointerException, Even with checks that say if the entities are not players then to just return false out the Exception sends.<br />
                        <br /> The return being mainly:<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>NullReferenceException: Object reference not set to an instance of an object</pre>{% endraw %}
                        </div>I&#039;ve even attempted to instead of checking with my main if to make this check it&#039;s own return like so:<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>
attacker = hitinfo.Initiator;
victim = entity;
if (!attacker.ToPlayer() || !victim.ToPlayer()) return false;
</pre>{% endraw %}
                        </div>However it still seems that this issue is slipping through the cracks anyway. Am I approaching this incorrectly? Even if the items sent back to the OnEntityDeath are not
                        an object that means they should still fail the above check and stop the process. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">KillParadise</a>,</span>
                        <a href="{{ '/threads/nullpointerexception-with-onentitydeath-js.8590/' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 19, 2015 at 2:33 PM">May 19, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/nullpointerexception-with-onentitydeath-js.8590/' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/90369/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-90416" class="message" data-author="Hatemail">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Hatemail" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Hatemail</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Check if attacker is undefined or null <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Hatemail</a>,</span>
                        <a href="{{ '/threads/nullpointerexception-with-onentitydeath-js.8590/#post-90416' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 19, 2015 at 5:54 PM">May 19, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/nullpointerexception-with-onentitydeath-js.8590/#post-90416' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/90416/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-90418" class="message" data-author="Mughisi">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Mughisi" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Mughisi</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> The <i>OnEntityDeath </i>hook hasn&#039;t changed in months, keep in mind that hitinfo can be null (which is also
                        mentioned in the docs). <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Mughisi</a>,</span>
                        <a href="{{ '/threads/nullpointerexception-with-onentitydeath-js.8590/#post-90418' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 19, 2015 at 5:56 PM">May 19, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/nullpointerexception-with-onentitydeath-js.8590/#post-90418' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/90418/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-90424" class="message" data-author="KillParadise">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="KillParadise" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">KillParadise</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Mughisi">
                            <aside>
                                <div class="attribution type">Mughisi said: <a href="#post-90418" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">The <i>OnEntityDeath </i>hook hasn&#039;t changed in months, keep in mind that hitinfo can be null (which is also mentioned in the docs).</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>After what what hatemail said I literally just remembered that could be the case, (but since this is the first time it&#039;s started pop up I guess it slipped my mind)
                        thanks guys. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">KillParadise</a>,</span>
                        <a href="{{ '/threads/nullpointerexception-with-onentitydeath-js.8590/#post-90424' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 19, 2015 at 6:02 PM">May 19, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/nullpointerexception-with-onentitydeath-js.8590/#post-90424' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/90424/permalink">#4</a>
                </div>
            </div>
        </div>
    </li>
</ol>
