---
layout: forums
title: 'Solved - Getting player killed helicopter? (C#)'
breadcrumbs:
 - "Plugin Development": "/forums/plugin-development.105/"
 - "Rust Development": "/forums/rust-development.4/"
---
<div class="titleBar">
    <h1>
        <span class="prefix prefixGreen">Solved</span> <a href="{{ '/threads/getting-player-killed-helicopter-c.18826/' | prepend: site.baseurl }}">Getting player killed helicopter? (C#)</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="{{ '/forums/rust-development.4/' | prepend: site.baseurl }}">Rust Development</a>' started by <a class="username"
            dir="auto">JoeSheep</a>, <a href="{{ '/threads/getting-player-killed-helicopter-c.18826/' | prepend: site.baseurl }}"><span class="DateTime" title="Jun 19, 2016 at 1:35 AM">Jun 19,
                2016</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-217027" class="message" data-author="JoeSheep">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="JoeSheep" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">JoeSheep</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Hi!<br />
                        <br /> I am trying to get the player&#039;s name who got the last shot on a helicopter taking it down.<br />
                        <br /> I have the code:<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>void OnEntityDeath(BaseCombatEntity entity, HitInfo info)
        {
            if (helicopterDeathAnnouncement &amp;&amp; entity is BaseHelicopter)
            {
                if (helicopterDeathAnnouncementWithKiller)
                {
                    Puts(&quot;1&quot;);
                    BasePlayer attacker = (BasePlayer)info.Initiator;
                    Puts(&quot;2&quot;);
                    CreateMsgGUI(Lang(&quot;HelicopterDeathAnnouncementWithPlayer&quot;).Replace(&quot;{playername}&quot;, attacker.displayName), bannerTintRed, textWhite);
                    Puts(&quot;3&quot;);
                }
                else
                {
                    CreateMsgGUI(Lang(&quot;HelicopterDeathAnnouncement&quot;), bannerTintRed, textWhite);
                }
            }
        }</pre>{% endraw %}
                        </div>It gets to outputting 2 in the console, then results in an object NRE when I shoot down a helicopter.<br /> Any idea what I am doing wrong? <div
                            class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="editDate"> Last edited by a moderator: <span class="DateTime" title="Jun 19, 2016 at 1:59 AM">Jun 19, 2016</span>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">JoeSheep</a>,</span>
                        <a href="{{ '/threads/getting-player-killed-helicopter-c.18826/' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jun 19, 2016 at 1:35 AM">Jun 19, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/getting-player-killed-helicopter-c.18826/' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/217027/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-217038" class="message" data-author="k1lly0u">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="k1lly0u" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">k1lly0u</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> The HitInfo doesn&#039;t contain a Initiator for downed helicopters. I worked around this in Quests by storing
                        each hit from OnEntityTakeDamage then working out who had the highest hitpoints but this could also be done to work out the final attacker <div class="messageTextEndMarker">
                            &nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">k1lly0u</a>,</span>
                        <a href="{{ '/threads/getting-player-killed-helicopter-c.18826/#post-217038' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jun 19, 2016 at 3:40 AM">Jun 19, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/getting-player-killed-helicopter-c.18826/#post-217038' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/217038/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-217188" class="message" data-author="JoeSheep">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="JoeSheep" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">JoeSheep</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <a href="https://oxidemod.org/members/36455/" class="username" data-user="36455, @k1lly0u">@k1lly0u</a><br /> Yeah I wasn&#039;t sure when looking through my references.<br />
                        I will see what I can come up with, cheers dude. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">JoeSheep</a>,</span>
                        <a href="{{ '/threads/getting-player-killed-helicopter-c.18826/#post-217188' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jun 19, 2016 at 11:52 AM">Jun 19, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/getting-player-killed-helicopter-c.18826/#post-217188' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/217188/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-217198" class="message" data-author="sqroot">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="sqroot" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">sqroot</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="JoeSheep">
                            <aside>
                                <div class="attribution type">JoeSheep said: <a href="#post-217188" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote"><a href="https://oxidemod.org/members/36455/" class="username" data-user="36455, @k1lly0u">@k1lly0u</a><br /> Yeah I wasn&#039;t sure when
                                        looking through my references.<br /> I will see what I can come up with, cheers dude.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Notifier also displays players getting killed by helis, you could have a look at that. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">sqroot</a>,</span>
                        <a href="{{ '/threads/getting-player-killed-helicopter-c.18826/#post-217198' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jun 19, 2016 at 12:12 PM">Jun 19, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/getting-player-killed-helicopter-c.18826/#post-217198' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/217198/permalink">#4</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-217212" class="message" data-author="JoeSheep">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="JoeSheep" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">JoeSheep</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> At the moment I have a list which will store a player&#039;s name when they attack the heli, OnEntityDeath will
                        get the last item in the list and use that. Seems a little bit of a perhaps slow way to do it, unless I can use a hashset as long as it just adds on to the list at the bottom
                        so I can still get the last item as the last player to hit the heli? <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">JoeSheep</a>,</span>
                        <a href="{{ '/threads/getting-player-killed-helicopter-c.18826/#post-217212' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jun 19, 2016 at 12:48 PM">Jun 19, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/getting-player-killed-helicopter-c.18826/#post-217212' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/217212/permalink">#5</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-217219" class="message" data-author="sqroot">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="sqroot" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">sqroot</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="JoeSheep">
                            <aside>
                                <div class="attribution type">JoeSheep said: <a href="#post-217212" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">At the moment I have a list which will store a player&#039;s name when they attack the heli, OnEntityDeath will get the last item in the list and
                                        use that. Seems a little bit of a perhaps slow way to do it, unless I can use a hashset as long as it just adds on to the list at the bottom so I can still get
                                        the last item as the last player to hit the heli?</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>You only need to store a single player to keep track of the last attacker, why use a list at all? <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">sqroot</a>,</span>
                        <a href="{{ '/threads/getting-player-killed-helicopter-c.18826/#post-217219' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jun 19, 2016 at 1:06 PM">Jun 19, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/getting-player-killed-helicopter-c.18826/#post-217219' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/217219/permalink">#6</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-217262" class="message" data-author="JoeSheep">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="JoeSheep" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">JoeSheep</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="sqroot">
                            <aside>
                                <div class="attribution type">sqroot said: <a href="#post-217219" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">You only need to store a single player to keep track of the last attacker, why use a list at all?</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>It was the first solution that came to mind. What method would you suggest? <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">JoeSheep</a>,</span>
                        <a href="{{ '/threads/getting-player-killed-helicopter-c.18826/#post-217262' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jun 19, 2016 at 3:59 PM">Jun 19, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/getting-player-killed-helicopter-c.18826/#post-217262' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/217262/permalink">#7</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-217265" class="message" data-author="sqroot">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="sqroot" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">sqroot</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="JoeSheep">
                            <aside>
                                <div class="attribution type">JoeSheep said: <a href="#post-217262" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">It was the first solution that came to mind. What method would you suggest?</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Just storing the last player. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">sqroot</a>,</span>
                        <a href="{{ '/threads/getting-player-killed-helicopter-c.18826/#post-217265' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jun 19, 2016 at 4:02 PM">Jun 19, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/getting-player-killed-helicopter-c.18826/#post-217265' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/217265/permalink">#8</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-217273" class="message" data-author="JoeSheep">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="JoeSheep" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">JoeSheep</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="sqroot">
                            <aside>
                                <div class="attribution type">sqroot said: <a href="#post-217265" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Just storing the last player.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>So perhaps a var that is accessible from all scopes and have that change each time the helicopter takes damage? <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">JoeSheep</a>,</span>
                        <a href="{{ '/threads/getting-player-killed-helicopter-c.18826/#post-217273' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jun 19, 2016 at 4:44 PM">Jun 19, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/getting-player-killed-helicopter-c.18826/#post-217273' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/217273/permalink">#9</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-217356" class="message" data-author="JoeSheep">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="JoeSheep" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">JoeSheep</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Ok I declared BasePlayer LastHitPlayer null in the plugin scope, every time the helicopter gets hit LastHitPlayer
                        = (BasePlayer)info.Initiator.<br /> Then LastHitPlayer.displayName replaces {playername} in the message sent in OnEntityDeath.<br />
                        <br /> Thanks for the help <a href="https://oxidemod.org/members/36455/" class="username" data-user="36455, @k1lly0u">@k1lly0u</a> and <a
                            href="https://oxidemod.org/members/81111/" class="username" data-user="81111, @sqroot">@sqroot</a>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">JoeSheep</a>,</span>
                        <a href="{{ '/threads/getting-player-killed-helicopter-c.18826/#post-217356' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jun 19, 2016 at 7:51 PM">Jun 19, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/getting-player-killed-helicopter-c.18826/#post-217356' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/217356/permalink">#10</a>
                </div>
            </div>
        </div>
    </li>
</ol>
