---
layout: forums
title: 'Solved - Airdrop to player (JavaScript)'
breadcrumbs:
 - "Plugin Development": "/forums/plugin-development.105/"
 - "Rust Development": "/forums/rust-development.4/"
---
<div class="titleBar">
    <h1>
        <span class="prefix prefixGreen">Solved</span> <a href="{{ '/threads/airdrop-to-player-javascript.8017/' | prepend: site.baseurl }}">Airdrop to player (JavaScript)</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="{{ '/forums/rust-development.4/' | prepend: site.baseurl }}">Rust Development</a>' started by <a class="username"
            dir="auto">wh1tegray</a>, <a href="{{ '/threads/airdrop-to-player-javascript.8017/' | prepend: site.baseurl }}"><span class="DateTime" title="Apr 27, 2015 at 9:27 AM">Apr 27,
                2015</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-82850" class="message" data-author="wh1tegray">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="wh1tegray" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">wh1tegray</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">Hi!<br /> I have question: what about airdrop to player? If I add spec code for target in your example:<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>
var player = global.BasePlayer.FindByID(&quot;myID&quot;);
var destination =  player.transform.position.normalized;
var quaternion = new UnityEngine.Quaternion(0, 0, 0, 0);
global.GameManager.server.CreateEntity(&quot;events/cargo_plane&quot;, destination, quaternion).Spawn(true);</pre>{% endraw %}
                        </div>its not work... supply not dropps on me( maybe problem in quaternion? what is it?<br /> can you help me, guys?<br /> p.s. sorry for my english. <div
                            class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="editDate">Last edited by a moderator: <span class="DateTime" title="Apr 28, 2015 at 8:33 AM">Apr 28, 2015</span>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">wh1tegray</a>,</span>
                        <a href="{{ '/threads/airdrop-to-player-javascript.8017/' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 27, 2015 at 9:27 AM">Apr 27, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/airdrop-to-player-javascript.8017/' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/82850/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-82856" class="message" data-author="Mughisi">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Mughisi" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Mughisi</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="wh1tegray">
                            <aside>
                                <div class="attribution type">wh1tegray said: <a href="#post-82850" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Hi!<br /> I have question: what about airdrop to player? If I add spec code for target in your example:<br />
                                        <div class="bbCodeBlock bbCodeCode">
                                            <div class="type">Code:</div>
                                            {% raw %}<pre>
var player = global.BasePlayer.FindByID(&quot;myID&quot;);
var destination =  player.transform.position.normalized;
var quaternion = new UnityEngine.Quaternion(0, 0, 0, 0);
global.GameManager.server.CreateEntity(&quot;events/cargo_plane&quot;, destination, quaternion).Spawn(true);</pre>{% endraw %}
                                        </div>its not work... supply not dropps on me( maybe problem in quaternion? what is it?<br /> can you halp me, guys?<br /> p.s. sorry for my english.
                                    </div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>The vector specified when the entity (in this case cargoplane) is spawned is the spawn location, at that point a destination is calculated and the crate will drop in the
                        center of those locations so you will need to add more logic to it that modifies the destination to get to a set location. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Mughisi</a>,</span>
                        <a href="{{ '/threads/airdrop-to-player-javascript.8017/#post-82856' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 27, 2015 at 10:49 AM">Apr 27, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/airdrop-to-player-javascript.8017/#post-82856' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/82856/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-82861" class="message" data-author="wh1tegray">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="wh1tegray" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">wh1tegray</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">I&#039;ve got it. Thanks! This pluhin <a href="http://oxidemod.org/plugins/airdrop-controller.804/"
                            class="internalLink">http://oxidemod.org/plugins/airdrop-controller.804/</a> can drop supply from cargoplane right on the player... but it wrote on C# and I don&#039;t know
                        how to convert written in javascript... ( <br /> I tried a lot, but my knowledge is clearly not enough.. okay, thanks, I will torment code on))<br />
                        [DOUBLEPOST=1430198344,1430129704][/DOUBLEPOST]I have a new question: when I try to subtract one vector from another (in JS), I get an error.<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>var UnityEngine = importNamespace(&quot;UnityEngine&quot;);
        var targetPos = player.transform.position;
        var centerPos = UnityEngine.Vector3(0,0,0);
        var directionFromCenter = (targetPos - centerPos).normalized;
        var directionAngles = UnityEngine.Quaternion.LookRotation(directionFromCenter);
        var toRight = directionAngles * UnityEngine.Vector3.right;
        var toLeft = directionAngles * UnityEngine.Vector3.left;
        startpos = targetPos;</pre>{% endraw %}
                        </div>Error:<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>Failed to call hook 'life' on plugin 'lifestat' (InvalidOperationException: No matching indexer found.)
8:21 AM [Debug]   at Jint.Runtime.Descriptors.Specialized.IndexDescriptor..ctor (Jint.Engine engine, System.Type targetType, System.String key, System.Object item) [0x00000] in &lt;filename unknown&gt;:0
  at Jint.Runtime.Descriptors.Specialized.IndexDescriptor..ctor (Jint.Engine engine, System.String key, System.Object item) [0x00000] in &lt;filename unknown&gt;:0
  at Jint.Runtime.Interop.ObjectWrapper.GetOwnProperty (System.String propertyName) [0x00000] in &lt;filename unknown&gt;:0
  at Jint.Native.Object.ObjectInstance.GetProperty (System.String propertyName) [0x00000] in &lt;filename unknown&gt;:0
  at Jint.Native.Object.ObjectInstance.Get (System.String propertyName) [0x00000] in &lt;filename unknown&gt;:0
  at Jint.Native.Object.ObjectInstance.DefaultValue (Types hint) [0x00000] in &lt;filename unknown&gt;:0
  at Jint.Runtime.TypeConverter.ToPrimitive (JsValue input, Types preferredType) [0x00000] in &lt;filename unknown&gt;:0
  at Jint.Runtime.TypeConverter.ToNumber (JsValue o) [0x00000] in &lt;filename unknown&gt;:0
  at Jint.Runtime.ExpressionInterpreter.EvaluateBinaryExpression (Jint.Parser.Ast.BinaryExpression expression) [0x00000] in &lt;filename unknown&gt;:0
  at Jint.Engine.EvaluateExpression (Jint.Parser.Ast.Expression expression) [0x00000] in &lt;filename unknown&gt;:0
  at Jint.Runtime.ExpressionInterpreter.EvaluateExpression (Jint.Parser.Ast.Expression expression) [0x00000] in &lt;filename unknown&gt;:0
  at Jint.Runtime.ExpressionInterpreter.EvaluateMemberExpression (Jint.Parser.Ast.MemberExpression memberExpression) [0x00000] in &lt;filename unknown&gt;:0
  at Jint.Engine.EvaluateExpression (Jint.Parser.Ast.Expression expression) [0x00000] in &lt;filename unknown&gt;:0
  at Jint.Runtime.StatementInterpreter.ExecuteVariableDeclaration (Jint.Parser.Ast.VariableDeclaration statement) [0x00000] in &lt;filename unknown&gt;:0
  at Jint.Engine.ExecuteStatement (Jint.Parser.Ast.Statement statement) [0x00000] in &lt;filename unknown&gt;:0
  at Jint.Runtime.StatementInterpreter.ExecuteStatement (Jint.Parser.Ast.Statement statement) [0x00000] in &lt;filename unknown&gt;:0
  at Jint.Runtime.StatementInterpreter.ExecuteStatementList (IEnumerable`1 statementList) [0x00000] in &lt;filename unknown&gt;:0
  at Jint.Runtime.StatementInterpreter.ExecuteBlockStatement (Jint.Parser.Ast.BlockStatement blockStatement) [0x00000] in &lt;filename unknown&gt;:0
  at Jint.Engine.ExecuteStatement (Jint.Parser.Ast.Statement statement) [0x00000] in &lt;filename unknown&gt;:0
  at Jint.Native.Function.ScriptFunctionInstance.Call (JsValue thisArg, Jint.Native.JsValue[] arguments) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Ext.JavaScript.Plugins.JavaScriptPlugin.CallFunction (System.String name, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Ext.JavaScript.Plugins.JavaScriptPlugin.OnCallHook (System.String hookname, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
  at Oxide.Core.Plugins.Plugin.CallHook (System.String hookname, System.Object[] args) [0x00000] in &lt;filename unknown&gt;:0
</pre>{% endraw %}
                        </div>can be in javascript vectors are deducted differently?<br /> [DOUBLEPOST=1430198492][/DOUBLEPOST]For understanding I am trying to alter this function to javascript
                        =)<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>void FindStartAndEndPos(Vector3 target, out Vector3 startpos, out Vector3 endpos, out float distance)
        {
            var directionFromCenter = (target - centerPos).normalized;
            var directionAngles = Quaternion.LookRotation( directionFromCenter );
            var toRight = directionAngles * Vector3.right;
            var toLeft = directionAngles * Vector3.left;
            startpos = target;
            var multiplier = 1000f;
            var i = 0f;
            for(int o=0;o&lt;50;o++)
            {
                var temPos = startpos + toRight * i * multiplier;
                if (((float)Math.Abs(temPos.x + multiplier) &gt; (World.Size / 2)) || ((float)Math.Abs(temPos.x - multiplier) &gt; (World.Size / 2)) || ((float)Math.Abs(temPos.z - multiplier) &gt; (World.Size / 2)) || ((float)Math.Abs(temPos.z + multiplier) &gt; (World.Size / 2)))
                {
                    multiplier = multiplier / 10f;
                    i = 0f;
                }
                else
                {
                    temPos.y = startpos.y;
                    startpos = temPos;
                    i = i + 1f;
                }
                if (multiplier &lt; 1f)
                {
                    break;
                }
            }
            distance = Vector3.Distance(startpos, target);
            endpos = target - toRight * distance;
        }</pre>{% endraw %}
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">wh1tegray</a>,</span>
                        <a href="{{ '/threads/airdrop-to-player-javascript.8017/#post-82861' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 28, 2015 at 6:19 AM">Apr 28, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/airdrop-to-player-javascript.8017/#post-82861' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/82861/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-83057" class="message" data-author="Mughisi">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Mughisi" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Mughisi</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">In C# you can subtract them normally by using &quot;MyFirstVector - MySecondVector&quot; as Vector3 has different
                        operator methods available, I can&#039;t really say for sure for JavaScript, but for lua I had to actually call that method so I&#039;m guessing it will be something similar
                        for JS, I&#039;m just afraid I can&#039;t tell you which as I have not used JavaScript to write plugins before. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Mughisi</a>,</span>
                        <a href="{{ '/threads/airdrop-to-player-javascript.8017/#post-83057' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 28, 2015 at 6:25 AM">Apr 28, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/airdrop-to-player-javascript.8017/#post-83057' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/83057/permalink">#4</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-83060" class="message" data-author="wh1tegray">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="wh1tegray" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">wh1tegray</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">Thank you for trying to help me! I got rid of the error, if subtract like this, but I&#039;m not sure that this
                        method gives me the correct result =)<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>var directionFromCenter = UnityEngine.Vector3(centerPos.x-targetPos.x, centerPos.y-targetPos.y, centerPos.z-targetPos.z).normalized;</pre>{% endraw %}
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">wh1tegray</a>,</span>
                        <a href="{{ '/threads/airdrop-to-player-javascript.8017/#post-83060' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Apr 28, 2015 at 6:35 AM">Apr 28, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/airdrop-to-player-javascript.8017/#post-83060' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/83060/permalink">#5</a>
                </div>
            </div>
        </div>
    </li>
</ol>
