---
layout: forums
title: 'Multiline timers with C#'
breadcrumbs:
 - "Plugin Development": "/forums/plugin-development.105/"
 - "Rust Development": "/forums/rust-development.4/"
---
<div class="titleBar">
    <h1>
        <a href="{{ '/threads/multiline-timers-with-c.10007/' | prepend: site.baseurl }}">Multiline timers with C#</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="{{ '/forums/rust-development.4/' | prepend: site.baseurl }}">Rust Development</a>' started by <a class="username"
            dir="auto">PaiN</a>, <a href="{{ '/threads/multiline-timers-with-c.10007/' | prepend: site.baseurl }}"><span class="DateTime" title="Jul 4, 2015 at 7:39 PM">Jul 4, 2015</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-105698" class="message" data-author="PaiN">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="PaiN" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">PaiN</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> So i want to repeat a multi-line function with a timer. Somehow it doesnt work .. maybe i dont know the proper
                        way.. trying for 20mins to figure it out. in lua it was easier <img src="{{ '/assets/styles/default/xenforo/clear.png' | prepend: site.baseurl }}" class="mceSmilieSprite mceSmilie7" alt=":p"
                            title="Stick Out Tongue    :p" /><br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>
        var timerrepeat = timer.Repeat(1, 0, ()
        {
            foreach(BasePlayer current in frozenPlayers)
            { 
                var position = current.transform.position;
                var configPos = new Vector3(position.x, position.y , position.z);
                if(Vector3.Distance(current.transform.position, configPos) &lt; 1)
                {
                    current.ClientRPCPlayer(null, current, &quot;ForcePositionTo&quot;, new object[] { configPos });
                    current.TransformChanged();
                }
            }
        )
</pre>{% endraw %}
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">PaiN</a>,</span>
                        <a href="{{ '/threads/multiline-timers-with-c.10007/' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 4, 2015 at 7:39 PM">Jul 4, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/multiline-timers-with-c.10007/' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/105698/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-105704" class="message" data-author="Vilsol">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Vilsol" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Vilsol</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>var timerrepeat = timer.Repeat(1, 0, () =&gt; {
    foreach(BasePlayer current in frozenPlayers) {
        var position = current.transform.position;
        var configPos = new Vector3(position.x, position.y, position.z);
        if(Vector3.Distance(current.transform.position, configPos) &lt; 1) {
            current.ClientRPCPlayer(null, current, &quot;ForcePositionTo&quot;, new object[] { configPos });
            current.TransformChanged();
        }
    }
});</pre>{% endraw %}
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Vilsol</a>,</span>
                        <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105704' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 4, 2015 at 7:47 PM">Jul 4, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105704' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/105704/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-105707" class="message" data-author="PaiN">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="PaiN" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">PaiN</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Error:<br />
                        <a href="http://screenshot.sh/mMdc6MOsyP0Cs" target="_blank" class="externalLink" rel="nofollow">http://screenshot.sh/mMdc6MOsyP0Cs</a><br />
                        <br /> Code:<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>
            timer.Repeat(1, 0, () =&gt; {
       
            foreach(BasePlayer current in frozenPlayers) {
           
                var position = current.transform.position;
                var configPos = new Vector3(position.x, position.y, position.z);
                if(Vector3.Distance(current.transform.position, configPos) &lt; 1)
                {
               
                var timer = timer.Repeat(1, 0, () =&gt; current.ClientRPCPlayer(null, current, &quot;ForcePositionTo&quot;, new object[] { configPos }));
                    current.TransformChanged();
               
                }
            }
        });</pre>{% endraw %}
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">PaiN</a>,</span>
                        <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105707' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 4, 2015 at 7:56 PM">Jul 4, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105707' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/105707/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-105709" class="message" data-author="Vilsol">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Vilsol" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Vilsol</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Are you sure that the error is inside this code block? Check the line number <div class="messageTextEndMarker">
                            &nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Vilsol</a>,</span>
                        <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105709' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 4, 2015 at 7:57 PM">Jul 4, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105709' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/105709/permalink">#4</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-105711" class="message" data-author="PaiN">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="PaiN" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">PaiN</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Vilsol">
                            <aside>
                                <div class="attribution type">Vilsol said: <a href="#post-105709" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Are you sure that the error is inside this code block? Check the line number</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>yep its the last line that i gave u above<br /> the &quot;});&quot; <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">PaiN</a>,</span>
                        <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105711' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 4, 2015 at 7:58 PM">Jul 4, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105711' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/105711/permalink">#5</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-105713" class="message" data-author="Vilsol">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Vilsol" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Vilsol</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> The code block that I posted has properly matching brackets, it must be something outside of it affecting it.
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Vilsol</a>,</span>
                        <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105713' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 4, 2015 at 8:00 PM">Jul 4, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105713' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/105713/permalink">#6</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-105714" class="message" data-author="PaiN">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="PaiN" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">PaiN</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Vilsol">
                            <aside>
                                <div class="attribution type">Vilsol said: <a href="#post-105713" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">The code block that I posted has properly matching brackets, it must be something outside of it affecting it.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>I will just give u all the code <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>
using System.Collections.Generic;
using System.Reflection;
using System;
using System.Data;
using UnityEngine;
using Oxide.Core;namespace Oxide.Plugins
{
    [Info(&quot;Mind Freeze&quot;, &quot;PaiN&quot;, &quot;1.2.0&quot;, ResourceId = 1198)]
    [Description(&quot;Allows you to freeze players with a legit way.&quot;)]
    class MindFreeze : RustPlugin
    {
       
        void Loaded()
        {
        if (!permission.PermissionExists(&quot;canmindfreeze&quot;)) permission.RegisterPermission(&quot;canmindfreeze&quot;, this);
            //LoadDefaultConfig(); Maybe gonna add this later.
        }
           
       List&lt;BasePlayer&gt; frozenPlayers = new List&lt;BasePlayer&gt;();  
         
        private Timer timer;
       
        [ChatCommand(&quot;freeze&quot;)]
        void cmdFreeze(BasePlayer player, string cmd, string[] args)
        {
            var target = BasePlayer.Find(args[0]);
            frozenPlayers.Add(target);
        }
   
       
        [ChatCommand(&quot;unfreeze&quot;)]
        void cmdUnFreeze(BasePlayer player, string cmd, string[] args)
        {
            var target = BasePlayer.Find(args[0]);
            if (frozenPlayers.Contains(target)) 
            {
                frozenPlayers.Remove(target);
            }
                   
        }
       
        [ChatCommand(&quot;unfreezeall&quot;)]
        void cmdUnFreezeAll(BasePlayer player, string cmd, string[] args)
        {
            frozenPlayers.Clear();       
        }
       
   
            timer.Repeat(1, 0, () =&gt; {
       
            foreach(BasePlayer current in frozenPlayers) {
           
                var position = current.transform.position;
                var configPos = new Vector3(position.x, position.y, position.z);
                if(Vector3.Distance(current.transform.position, configPos) &lt; 1)
                {
               
                var timer = timer.Repeat(1, 0, () =&gt; current.ClientRPCPlayer(null, current, &quot;ForcePositionTo&quot;, new object[] { configPos }));
                    current.TransformChanged();
               
                }
            }
        });
       
     
         void Unloaded()
        {
            timer.Destroy(); 
            frozenPlayers.Clear();
        }
    }}
</pre>{% endraw %}
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">PaiN</a>,</span>
                        <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105714' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 4, 2015 at 8:01 PM">Jul 4, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105714' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/105714/permalink">#7</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-105715" class="message" data-author="Vilsol">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Vilsol" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Vilsol</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> All you have done is placed the timer in the general class directory... it isn&#039;t in any method, the error
                        has nothing to do with brackets, you have to put it in a proper method. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Vilsol</a>,</span>
                        <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105715' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 4, 2015 at 8:03 PM">Jul 4, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105715' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/105715/permalink">#8</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-105730" class="message" data-author="PaiN">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="PaiN" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">PaiN</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Vilsol">
                            <aside>
                                <div class="attribution type">Vilsol said: <a href="#post-105715" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">All you have done is placed the timer in the general class directory... it isn&#039;t in any method, the error has nothing to do with brackets,
                                        you have to put it in a proper method.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>I&#039;m probably dumb.. these timers are so annoying ;/<br />
                        <br /> I did something.. but errorhttp://screenshot.sh/ouZ3pWKSCuSnS<br /> here is my code:<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>
using System.Collections.Generic;
using System.Reflection;
using System;
using System.Data;
using UnityEngine;
using Oxide.Core;namespace Oxide.Plugins
{
    [Info(&quot;Mind Freeze&quot;, &quot;PaiN&quot;, &quot;1.2.0&quot;, ResourceId = 1198)]
    [Description(&quot;Allows you to freeze players with a legit way.&quot;)]
    class MindFreeze : RustPlugin
    {
       
        void Loaded()
        {
        if (!permission.PermissionExists(&quot;canmindfreeze&quot;)) permission.RegisterPermission(&quot;canmindfreeze&quot;, this);
            //LoadDefaultConfig(); Maybe gonna add this later.
        Timer();
        }
           
       List&lt;BasePlayer&gt; frozenPlayers = new List&lt;BasePlayer&gt;();  
         
        private Timer timerrepeat;
       
        [ChatCommand(&quot;freeze&quot;)]
        void cmdFreeze(BasePlayer player, string cmd, string[] args)
        {
            var target = BasePlayer.Find(args[0]);
            frozenPlayers.Add(target);
        }
   
       
        [ChatCommand(&quot;unfreeze&quot;)]
        void cmdUnFreeze(BasePlayer player, string cmd, string[] args)
        {
            var target = BasePlayer.Find(args[0]);
            if (frozenPlayers.Contains(target)) 
            {
                frozenPlayers.Remove(target);
            }
                   
        }
       
        [ChatCommand(&quot;unfreezeall&quot;)]
        void cmdUnFreezeAll(BasePlayer player, string cmd, string[] args)
        {
            frozenPlayers.Clear();       
        }
       
        void Timer(BasePlayer player, string cmd, string[] args)
        {
                timer.Repeat(1, 0, () =&gt; {
       
                foreach(BasePlayer current in frozenPlayers) {
           
                var position = current.transform.position;
                var configPos = new Vector3(position.x, position.y, position.z);
                if(Vector3.Distance(current.transform.position, configPos) &lt; 1)
                {
               
                    var timerrepeat = timer.Repeat(1, 0, () =&gt; current.ClientRPCPlayer(null, current, &quot;ForcePositionTo&quot;, new object[] { configPos }));
                    current.TransformChanged();
               
                }
            }
        }
    }); //Error line.. but its probably not from this
       
     
         void Unloaded()
        {
            timerepeat.Destroy(); 
            frozenPlayers.Clear();
        }
    }}
</pre>{% endraw %}
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">PaiN</a>,</span>
                        <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105730' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 4, 2015 at 8:24 PM">Jul 4, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105730' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/105730/permalink">#9</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-105734" class="message" data-author="Deicide666ra">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Deicide666ra" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Deicide666ra</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> I think it would be much simpler if you made a function for the timer. Right now you&#039;re creating a new
                        anonymous function with () =&gt; and you&#039;re simply mixing your brackets.<br /> [DOUBLEPOST=1436038846][/DOUBLEPOST] <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>    // your version fixed:
    void Timer(BasePlayer player, string cmd, string[] args)
    {
        timer.Repeat(1, 0, () =&gt;
            {
                foreach (BasePlayer current in frozenPlayers)
                {                    var position = current.transform.position;
                    var configPos = new Vector3(position.x, position.y, position.z);
                    if (Vector3.Distance(current.transform.position, configPos) &lt; 1)
                    {                        var timerrepeat = timer.Repeat(1, 0, () =&gt; current.ClientRPCPlayer(null, current, &quot;ForcePositionTo&quot;, new object[] { configPos }));
                        current.TransformChanged();                    }
                }
            }
        );
    }    // Version that avoids the confusion
    void Timer(BasePlayer player, string cmd, string[] args)
    {
        timer.Repeat(1, 0, OnTimer);
    }    void OnTimer()
    {
        foreach (BasePlayer current in frozenPlayers)
        {            var position = current.transform.position;
            var configPos = new Vector3(position.x, position.y, position.z);
            if (Vector3.Distance(current.transform.position, configPos) &lt; 1)
            {                var timerrepeat = timer.Repeat(1, 0, () =&gt; current.ClientRPCPlayer(null, current, &quot;ForcePositionTo&quot;, new object[] { configPos }));
                current.TransformChanged();            }
        }
    }
</pre>{% endraw %}
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Deicide666ra</a>,</span>
                        <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105734' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 4, 2015 at 8:29 PM">Jul 4, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105734' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/105734/permalink">#10</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-105745" class="message" data-author="PaiN">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="PaiN" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">PaiN</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Well the code works.<br />
                        <br /> Freeze = Works<br /> Unfreeze = No<br />
                        <br /> Ehh what to do .. the unfreeze command is good but doesnt working thats what i dont like in coding <img src="{{ '/assets/styles/default/xenforo/clear.png' | prepend: site.baseurl }}"
                            class="mceSmilieSprite mceSmilie7" alt=":p" title="Stick Out Tongue    :p" /><br />
                        <br /> my current code:<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>
using System.Collections.Generic;
using System.Reflection;
using System;
using System.Data;
using UnityEngine;
using Oxide.Core;namespace Oxide.Plugins
{
    [Info(&quot;Mind Freeze&quot;, &quot;PaiN&quot;, &quot;1.2.0&quot;, ResourceId = 1198)]
    [Description(&quot;Allows you to freeze players with a legit way.&quot;)]
    class MindFreeze : RustPlugin
    {
        private Timer timerrepeat;
        void Loaded()
        {
        if (!permission.PermissionExists(&quot;canmindfreeze&quot;)) permission.RegisterPermission(&quot;canmindfreeze&quot;, this);
            //LoadDefaultConfig(); Maybe gonna add this later. 
        TimerStart();
        }
           
       List&lt;BasePlayer&gt; frozenPlayers = new List&lt;BasePlayer&gt;();  
         
       
        [ChatCommand(&quot;freeze&quot;)]
        void cmdFreeze(BasePlayer player, string cmd, string[] args)
        {
            var target = BasePlayer.Find(args[0]);
            frozenPlayers.Add(target);
        }
   
       
        [ChatCommand(&quot;unfreeze&quot;)]
        void cmdUnFreeze(BasePlayer player, string cmd, string[] args)
        {
            var target = BasePlayer.Find(args[0]);                frozenPlayers.Remove(target);
                   
        }
       
        [ChatCommand(&quot;unfreezeall&quot;)]
        void cmdUnFreezeAll(BasePlayer player, string cmd, string[] args)
        {
            frozenPlayers.Clear();       
        }
       
        void TimerStart()
        {
        timer.Repeat(5, 0, OnTimer);
        }    void OnTimer()
    {
        foreach (BasePlayer current in frozenPlayers)
        {            var position = current.transform.position;
            var configPos = new Vector3(position.x, position.y, position.z);
            if (Vector3.Distance(current.transform.position, configPos) &lt; 1)
            {                var timerrepeat = timer.Repeat(1, 0, () =&gt; current.ClientRPCPlayer(null, current, &quot;ForcePositionTo&quot;, new object[] { configPos }));
                current.TransformChanged();            }
        }
    }
       
     
         void Unloaded()
        {
            timerrepeat.Destroy(); 
            frozenPlayers.Clear();
        }
    }}
</pre>{% endraw %}
                        </div>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">PaiN</a>,</span>
                        <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105745' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 4, 2015 at 9:11 PM">Jul 4, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105745' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/105745/permalink">#11</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-105756" class="message" data-author="Deicide666ra">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Deicide666ra" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Deicide666ra</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> OK I looked a little more closely at your code. <br />
                        <br /> You don&#039;t need to start a new timer for forcePositionTo, simply call current.ClientRPCPlayer directly. What you are doing with your current code is that every 5
                        seconds, you start a new timer for every frozen player that brings them back to their position. All you want is to bring them back to their position once every second, so
                        change your main timer to 1 second (the one that calls &quot;OnTimer&quot;) and remove the other timer.<br />
                        <br /> This will make it so that every 1 second, OnTimer will be called and that function will simply loop through frozenPlayers and bring them back to their position. As soon
                        as you .Remove them from the frozenPlayer list, they&#039;ll be free to move (unless you added them several times -- a list allows that -- you might want to check the list
                        before adding to make sure you&#039;re not adding a player multiple times).<br />
                        <br /> Also, you should clean up the code a bit. No need to have the function TimerStart, just put it&#039;s line of code straight into ServerInitialized. Make sure you KEEP
                        that timer as well and on the unload of the plugin, you&#039;ll want to destroy it.<br />
                        <br /> Finally, dunno if it&#039;s because you aren&#039;t finished or I misunderstand how permissions work, but I have a feeling you are not checking for permissions currently
                        (only registering a permission type). <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Deicide666ra</a>,</span>
                        <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105756' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 4, 2015 at 9:43 PM">Jul 4, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105756' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/105756/permalink">#12</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-105760" class="message" data-author="PaiN">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="PaiN" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">PaiN</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Deicide666ra">
                            <aside>
                                <div class="attribution type">Deicide666ra said: <a href="#post-105756" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">OK I looked a little more closely at your code.<br />
                                        <br /> You don&#039;t need to start a new timer for forcePositionTo, simply call current.ClientRPCPlayer directly. What you are doing with your current code is
                                        that every 5 seconds, you start a new timer for every frozen player that brings them back to their position. All you want is to bring them back to their
                                        position once every second, so change your main timer to 1 second (the one that calls &quot;OnTimer&quot;) and remove the other timer.<br />
                                        <br /> This will make it so that every 1 second, OnTimer will be called and that function will simply loop through frozenPlayers and bring them back to their
                                        position. As soon as you .Remove them from the frozenPlayer list, they&#039;ll be free to move (unless you added them several times -- a list allows that -- you
                                        might want to check the list before adding to make sure you&#039;re not adding a player multiple times).<br />
                                        <br /> Also, you should clean up the code a bit. No need to have the function TimerStart, just put it&#039;s line of code straight into ServerInitialized. Make
                                        sure you KEEP that timer as well and on the unload of the plugin, you&#039;ll want to destroy it.<br />
                                        <br /> Finally, dunno if it&#039;s because you aren&#039;t finished or I misunderstand how permissions work, but I have a feeling you are not checking for
                                        permissions currently (only registering a permission type).</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Okay so your post just made me to think better.. about the permission yes yes i know i will add it later.. i will make a cleanup also before posting an update.. Thank you
                        so much.. only some people are so helpfull like you.<br />
                        <br /> And you said about checking the list.. ? Where is it ? <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">PaiN</a>,</span>
                        <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105760' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 4, 2015 at 9:59 PM">Jul 4, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105760' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/105760/permalink">#13</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-105762" class="message" data-author="Deicide666ra">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Deicide666ra" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Deicide666ra</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> C# is a very powerful language but it can definitely be confusing until you got some good experience with it.
                        Most of my experience is with C++ so the transition wasn&#039;t so bad for me (C++ is a lot worse than C# in terms of complexity), but I can totally understand having trouble
                        if you&#039;re coming from LUA or other &quot;simple&quot; scripting languages. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Deicide666ra</a>,</span>
                        <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105762' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 4, 2015 at 10:02 PM">Jul 4, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105762' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/105762/permalink">#14</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-105766" class="message" data-author="PaiN">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="PaiN" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">PaiN</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Deicide666ra">
                            <aside>
                                <div class="attribution type">Deicide666ra said: <a href="#post-105762" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">C# is a very powerful language but it can definitely be confusing until you got some good experience with it. Most of my experience is with C++
                                        so the transition wasn&#039;t so bad for me (C++ is a lot worse than C# in terms of complexity), but I can totally understand having trouble if you&#039;re
                                        coming from LUA or other &quot;simple&quot; scripting languages.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Also i wanted to explain why i had 2 timers.. <br /> The first calls the OnTimer.<br /> THE SECOND:<br /> So without the second timer the first timer every 1 sec saves
                        the position that the player is on right now(So if i dont have the timer there and the freezed target runs it will save the position that he is running every 1 sec and will
                        just rollback him just a bit). What do i need to do ? Probably save the position in the /freeze functions. But how.. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">PaiN</a>,</span>
                        <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105766' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 4, 2015 at 10:11 PM">Jul 4, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105766' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/105766/permalink">#15</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-105775" class="message" data-author="Bombardir">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Bombardir" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Bombardir</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Your first timer will Repeat and call new Timers again and again...<br /> + Some Lua &lt;-&gt; C#
                        analogies:<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>C#:
...
var timerrepeat = ...Lua:
...
local timerrepeat = ...
---------------------------------------------------------
</pre>{% endraw %}
                        </div>You just create new local var and not use your &#039;private Timer timerrepeat;&#039; var.<br /> Also it&#039;s not a table of timers, it&#039;s variable that contain
                        only <b>one </b>timer. (you need to use <b>List&lt;Timer&gt;</b> or <b>HashSet&lt;Timer&gt;</b> or<b> Timer[]</b>)<br /> + If u want to unfreeze 1 player then you need to use
                        <b>Dictionary&lt;ulong, Timer&gt; </b>(in lua: local table[steam] = timer), google for more info. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Bombardir</a>,</span>
                        <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105775' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 4, 2015 at 10:51 PM">Jul 4, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/multiline-timers-with-c.10007/#post-105775' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/105775/permalink">#16</a>
                </div>
            </div>
        </div>
    </li>
</ol>
