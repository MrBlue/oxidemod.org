---
layout: forums
title: 'Memory leak (RustDedicated using 4.6gb of Ram)'
breadcrumbs:
 - "Game Discussion": "/categories/game-discussion.106/"
 - "Rust Discussion": "/forums/rust-discussion.23/"
---
<div class="titleBar">
    <h1>
        <a href="{{ '/threads/memory-leak-rustdedicated-using-4-6gb-of-ram.8197/' | prepend: site.baseurl }}">Memory leak (RustDedicated using 4.6gb of Ram)</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="{{ '/forums/rust-discussion.23/' | prepend: site.baseurl }}">Rust Discussion</a>' started by <a class="username" dir="auto">Ray
            Meres</a>, <a href="{{ '/threads/memory-leak-rustdedicated-using-4-6gb-of-ram.8197/' | prepend: site.baseurl }}"><span class="DateTime" title="May 5, 2015 at 3:02 AM">May 5,
                2015</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-85517" class="message" data-author="Ray Meres">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Ray Meres" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Ray Meres</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Wulf please help me solve this riddle!<br />
                        <br />
                        <img src="proxy.php?image=http%3A%2F%2Fi.imgur.com%2Fu3PNtR5.png&amp;hash=5d1a1b09f1efa1a74c1f4c094c660715" class="bbCodeImage LbImage" alt="[&#x200B;IMG]"
                            data-url="http://i.imgur.com/u3PNtR5.png" /><br />
                        <br />
                        <img src="proxy.php?image=http%3A%2F%2Fi.imgur.com%2FfjU35Er.png&amp;hash=a3233ceec50c16089b4f0292f2442e78" class="bbCodeImage LbImage" alt="[&#x200B;IMG]"
                            data-url="http://i.imgur.com/fjU35Er.png" /><br />
                        <br /> My server currently has 37 plugins.<br /> 150k entities on the map. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Ray Meres</a>,</span>
                        <a href="{{ '/threads/memory-leak-rustdedicated-using-4-6gb-of-ram.8197/' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 5, 2015 at 3:02 AM">May 5, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/memory-leak-rustdedicated-using-4-6gb-of-ram.8197/' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/85517/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-85522" class="message" data-author="seanterris">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="seanterris" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">seanterris</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> what makes you think it&#039;s a memory leak? does it get worse with time? do you have any errors in logs? does
                        it depend on number of players in game?<br />
                        <br /> do you have a test server you could try few things on? if yes:<br /> copy your server profile on the test server<br /> rename plugins directory to something
                        temporary<br /> note the memory usage<br /> rename plugins directory back to &quot;plugins&quot;<br /> note the memory usage<br /> give it some time, at least one day/night
                        in-game cycle<br /> fly around the map, spawn a lot of bears and hunt them with c4, invite some friends over. try to run most of the commands you have in your plugins. keep an
                        eye on the memory usage. if you see rapid increases note what you did just before them.<br /> if the memory usage stays high but stable (or increases in reasonable speed),
                        chances are it&#039;s not a leak and that is what heavily modded, heavily used rust server needs.<br /> if the memory usage however keeps climbing even if you doesn&#039;t do
                        anything, it might be a leak. somewhere objects are being created in memory and not disposed properly after we don&#039;t need them anymore. if that&#039;s the case:<br /> in
                        your console, use oxide.Unload on every single plugin. keep an eye on the memory usage while you do it. if you are lucky, the memory usage will stop raising when you unload one
                        of them. this would probably be your culprit.<br /> if you don&#039;t see anything obvious, restart your rust server and keep adding plugins one by one, every time playing on
                        the map a little bit and playing with the plugin too if possible. keep an eye on that memory. hopefully you would find the trouble maker that way<br />
                        <br /> this is a mundane thing to do but it might be necessary unfortunately. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">seanterris</a>,</span>
                        <a href="{{ '/threads/memory-leak-rustdedicated-using-4-6gb-of-ram.8197/#post-85522' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 5, 2015 at 4:36 AM">May 5, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/memory-leak-rustdedicated-using-4-6gb-of-ram.8197/#post-85522' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/85522/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-85531" class="message" data-author="Ray Meres">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Ray Meres" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Ray Meres</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="seanterris">
                            <aside>
                                <div class="attribution type">seanterris said: <a href="#post-85522" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">what makes you think it&#039;s a memory leak? does it get worse with time? do you have any errors in logs? does it depend on number of players in
                                        game?</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Definitely a memory leak. I don&#039;t have a test server. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Ray Meres</a>,</span>
                        <a href="{{ '/threads/memory-leak-rustdedicated-using-4-6gb-of-ram.8197/#post-85531' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 5, 2015 at 6:00 AM">May 5, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/memory-leak-rustdedicated-using-4-6gb-of-ram.8197/#post-85531' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/85531/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-85533" class="message" data-author="seanterris">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="seanterris" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">seanterris</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Ray Meres">
                            <aside>
                                <div class="attribution type">Ray Meres said: <a href="#post-85531" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Definitely a memory leak.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div> You don&#039;t know that unless you check that. Unless you have some extra info you didn&#039;t provide.<br /> If you doesn&#039;t have a test server you would have to
                        do it on your live one. Backup everything and close the server for 6 hours when it&#039;s least populated. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">seanterris</a>,</span>
                        <a href="{{ '/threads/memory-leak-rustdedicated-using-4-6gb-of-ram.8197/#post-85533' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 5, 2015 at 6:16 AM">May 5, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/memory-leak-rustdedicated-using-4-6gb-of-ram.8197/#post-85533' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/85533/permalink">#4</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-85537" class="message" data-author="Ray Meres">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Ray Meres" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Ray Meres</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="seanterris">
                            <aside>
                                <div class="attribution type">seanterris said: <a href="#post-85533" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">You don&#039;t know that unless you check that. Unless you have some extra info you didn&#039;t provide.<br /> If you doesn&#039;t have a test
                                        server you would have to do it on your live one. Backup everything and close the server for 6 hours when it&#039;s least populated.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Do you run a server? <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Ray Meres</a>,</span>
                        <a href="{{ '/threads/memory-leak-rustdedicated-using-4-6gb-of-ram.8197/#post-85537' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 5, 2015 at 6:26 AM">May 5, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/memory-leak-rustdedicated-using-4-6gb-of-ram.8197/#post-85537' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/85537/permalink">#5</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-85545" class="message" data-author="seanterris">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="seanterris" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">seanterris</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> not a public one, no, we are preparing one. whatever you are hinting at though, those are the correct steps to
                        debug an issue like this -.-. but instead you choose to refuse to provide any extra info, you expect someone to solve/find you a &quot;memory leak&quot; on a server that has to
                        stay live based on a screenshot from windows task manager. you need a master debugger and a remote psychic in one. &quot;good luck with that, lol&quot;. <div
                            class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">seanterris</a>,</span>
                        <a href="{{ '/threads/memory-leak-rustdedicated-using-4-6gb-of-ram.8197/#post-85545' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 5, 2015 at 6:57 AM">May 5, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/memory-leak-rustdedicated-using-4-6gb-of-ram.8197/#post-85545' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/85545/permalink">#6</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-85548" class="message" data-author="Ray Meres">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Ray Meres" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Ray Meres</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="seanterris">
                            <aside>
                                <div class="attribution type">seanterris said: <a href="#post-85545" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">not a public one, no, we are preparing one. whatever you are hinting at though, those are the correct steps to debug an issue like this -.-. but
                                        instead you choose to refuse to provide any extra info, you expect someone to solve/find you a &quot;memory leak&quot; on a server that has to stay live based
                                        on a screenshot from windows task manager. you need a master debugger and a remote psychic in one. &quot;good luck with that, lol&quot;.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Well I could tell you don&#039;t because if you did you would know that 4.6gb of RAM is far from normal. I just restarted the server and it went down to 2gb RAM. The only
                        explanation for that is a memory leak of some kind. RAM usage seems to increase the longer the server session has been running. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Ray Meres</a>,</span>
                        <a href="{{ '/threads/memory-leak-rustdedicated-using-4-6gb-of-ram.8197/#post-85548' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 5, 2015 at 7:06 AM">May 5, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/memory-leak-rustdedicated-using-4-6gb-of-ram.8197/#post-85548' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/85548/permalink">#7</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-85560" class="message" data-author="seanterris">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="seanterris" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">seanterris</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Ray Meres">
                            <aside>
                                <div class="attribution type">Ray Meres said: <a href="#post-85548" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Well I could tell you don&#039;t because if you did you would know that 4.6gb of RAM is far from normal. I just restarted the server and it went
                                        down to 2gb RAM. The only explanation for that is a memory leak of some kind. RAM usage seems to increase the longer the server session has been running.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Look, that doesn&#039;t really mean anything yet. I don&#039;t have an experience running a Big&amp;Successful rust server, but i done &#039;couple&#039; of years in
                        systems&amp;networks penitentiary. what may seem like a memory leak doesn&#039;t necessarily have to be a memory leak. you don&#039;t know if facepunch hadn&#039;t change their
                        caching mechanisms for the dedicated servers, maybe the server see that there is constantly the same amount of RAM available and steals a bit after a bit to avoid disk I/O
                        operations. but even if it&#039;s not something like that:<br />
                        <br /> memory leak means that the program doesn&#039;t manage its memory correctly, as in forgets free up a memory regions it doesn&#039;t need anymore. that doesn&#039;t have
                        to be a case here, maybe oxide and all the plugins would work perfectly normal when run separate. something in your setup may cause for example two plugins to call third
                        plugins method too quickly one after another, and a logical switch somewhere gets flipped at the bad moment - and instead of two objects you get four. that doesn&#039;t really
                        count as a memory leak since the software works as designed, you are just not executing it properly <img src="{{ '/assets/styles/default/xenforo/clear.png' | prepend: site.baseurl }}"
                            class="mceSmilieSprite mceSmilie1" alt=":)" title="Smile    :)" /> bugs like this would be very hard (if not impossible) to find by reading logs or source code files, even
                        by very experienced programmers. you need a running server to run tests on, trust me, i&#039;m trying to save you some wasted hours here. you can always try to get a free few
                        days trial for a half-decent vps, or if you have to run RustDedicated.exe on your local machine. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">seanterris</a>,</span>
                        <a href="{{ '/threads/memory-leak-rustdedicated-using-4-6gb-of-ram.8197/#post-85560' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="May 5, 2015 at 8:00 AM">May 5, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/memory-leak-rustdedicated-using-4-6gb-of-ram.8197/#post-85560' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/85560/permalink">#8</a>
                </div>
            </div>
        </div>
    </li>
</ol>
