---
layout: forums
title: 'Solved - Need coding advice on Item control'
breadcrumbs:
 - "Plugin Development": "/forums/plugin-development.105/"
 - "Rust Development": "/forums/rust-development.4/"
---
<div class="titleBar">
    <h1>
        <span class="prefix prefixGreen">Solved</span> <a href="{{ '/threads/need-coding-advice-on-item-control.19891/' | prepend: site.baseurl }}">Need coding advice on Item control</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="{{ '/forums/rust-development.4/' | prepend: site.baseurl }}">Rust Development</a>' started by <a class="username"
            dir="auto">Yatta</a>, <a href="{{ '/threads/need-coding-advice-on-item-control.19891/' | prepend: site.baseurl }}"><span class="DateTime" title="Jul 24, 2016 at 3:00 PM">Jul 24,
                2016</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-234774" class="message" data-author="Yatta">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Yatta" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Yatta</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Hello. <br />
                        <b>I want to prevent players from picking some (not all) items from a container.</b><br />
                        <br /> My first approach is to use OnItemRemovedFromContainer, if item is &#039;protected&#039; dont allow the transfert. <br /> That works ... <i>for full stacks</i>.<br />
                        For splits I then use OnItemSplit, but since you cant check who is doing the spliting I just do a dirty thing telling any nearby players to send back to the container any item
                        of the same kind they just received.<br /> That kinda works ... <i>for spliting items to an empty slot</i>.<br /> For split from a stack to another stack I tried to work
                        arround that but ... its really not reliable.<br />
                        <br /> Right now im with a system that randomly works and has quite some weird glitches which I suspect arent all because of my code.<br />
                        <br /> So Im looking for a better way to allow / prevent a player to pick/split/dropt one or more specific items/stacks of a container. I was thinking about :<br />
                        <br /> - <b>Intercepting &#039;raw player command&#039; </b>that the client sends to the server asking to &#039;pick x from container&#039; and cancel it before it is actually
                        managed by the item system.<br />
                        <br /> - <b>Hooking something on the Item.OnChanged() method</b>, but my C# knowledge is not enough to figure out how to do that.<br />
                        <br /> Any help / idea appreciated <img src="{{ '/assets/styles/default/xenforo/clear.png' | prepend: site.baseurl }}" class="mceSmilieSprite mceSmilie1" alt=":)" title="Smile    :)" />
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Yatta</a>,</span>
                        <a href="{{ '/threads/need-coding-advice-on-item-control.19891/' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 24, 2016 at 3:00 PM">Jul 24, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/need-coding-advice-on-item-control.19891/' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/234774/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-234962" class="message" data-author="Mughisi">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Mughisi" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Mughisi</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Haven&#039;t done any testing or anything but have you tried using the hook `CanAcceptItem(ItemContainer
                        container, Item item)` and returning `ItemContainer.CanAcceptResult.CannotAccept;`? <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Mughisi</a>,</span>
                        <a href="{{ '/threads/need-coding-advice-on-item-control.19891/#post-234962' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 25, 2016 at 2:00 AM">Jul 25, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/need-coding-advice-on-item-control.19891/#post-234962' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/234962/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-235184" class="message" data-author="Yatta">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Yatta" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Yatta</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Thanks a lot for your suggestion, it was a good idea. It didnt prevent every &#039;steal&#039; case but gave me a
                        solid base and I just had to manage the rest (splits &amp; drops). My system feels rather solid now thanks to you.<br />
                        <br /> How did you figure out you could return ItemContainer.CanAcceptResult values ? <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Yatta</a>,</span>
                        <a href="{{ '/threads/need-coding-advice-on-item-control.19891/#post-235184' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 25, 2016 at 3:48 PM">Jul 25, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/need-coding-advice-on-item-control.19891/#post-235184' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/235184/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-235186" class="message" data-author="Mughisi">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Mughisi" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Mughisi</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> I was looking at the Assembly-CSharp.dll and not at the docs at the time, the docs are actually wrong regarding
                        the return behavior of the hook, basically returning true won&#039;t change anything, returning a value from the CanAcceptResult enum will chang the return behavior <img
                            src="{{ '/assets/styles/default/xenforo/clear.png' | prepend: site.baseurl }}" class="mceSmilieSprite mceSmilie1" alt=":)" title="Smile    :)" />
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Mughisi</a>,</span>
                        <a href="{{ '/threads/need-coding-advice-on-item-control.19891/#post-235186' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 25, 2016 at 4:02 PM">Jul 25, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/need-coding-advice-on-item-control.19891/#post-235186' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/235186/permalink">#4</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-235362" class="message" data-author="Yatta">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Yatta" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Yatta</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> If I may ask, how do you explore that kind of information in Visual Studio ? I can use the object browser to see
                        a bunch of info, but the search feature doesnt seem to work. For instance if I search for &quot;CanAcceptItem&quot; I get no results. I understand this must be quite a novice
                        question ... :s <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Yatta</a>,</span>
                        <a href="{{ '/threads/need-coding-advice-on-item-control.19891/#post-235362' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 26, 2016 at 12:22 AM">Jul 26, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/need-coding-advice-on-item-control.19891/#post-235362' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/235362/permalink">#5</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-235374" class="message" data-author="Mughisi">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Mughisi" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Mughisi</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Yatta">
                            <aside>
                                <div class="attribution type">Yatta said: <a href="#post-235362" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">If I may ask, how do you explore that kind of information in Visual Studio ? I can use the object browser to see a bunch of info, but the search
                                        feature doesnt seem to work. For instance if I search for &quot;CanAcceptItem&quot; I get no results. I understand this must be quite a novice question ... :s
                                    </div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>CanAcceptItem is a hook that we provide, all available hooks can (normally) be found in our docs: <a href="http://docs.oxidemod.org/rust/#canacceptitem" target="_blank"
                            class="externalLink" rel="nofollow">Oxide API for Rust</a><br />
                        <br /> You won&#039;t be able to actually search for CanAcceptItem unless you have a decompiler for Assembly-CSharp.dll that includes the values of variables/methods in the
                        search, or if you fully decompile the dll file and create a VS project out of it, and at that point you are able to look it up in VS. <div class="messageTextEndMarker">&nbsp;
                        </div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Mughisi</a>,</span>
                        <a href="{{ '/threads/need-coding-advice-on-item-control.19891/#post-235374' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 26, 2016 at 12:54 AM">Jul 26, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/need-coding-advice-on-item-control.19891/#post-235374' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/235374/permalink">#6</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-235572" class="message" data-author="Yatta">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Yatta" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Yatta</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Thanks for the information. Ill try to figure out how to decompile that, I think I saw info about that arround
                        here. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Yatta</a>,</span>
                        <a href="{{ '/threads/need-coding-advice-on-item-control.19891/#post-235572' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 26, 2016 at 2:26 PM">Jul 26, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/need-coding-advice-on-item-control.19891/#post-235572' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/235572/permalink">#7</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-235574" class="message" data-author="Mughisi">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Mughisi" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Mughisi</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml"> Some posts where using a decompiler was discussed:<br />
                        <a href="http://oxidemod.org/threads/understanding-namespaces-in-assembly-csharp-and-how-to-use-them.6853/#post-67291" class="internalLink">Understanding &quot;namespaces&quot;
                            in Assembly-CSharp and how to use them | Oxide</a><br />
                        <a href="http://oxidemod.org/threads/modify-assembly-csharp.11881/#post-130794" class="internalLink">Solved - Modify Assembly-CSharp | Oxide</a><br />
                        <a href="http://oxidemod.org/threads/nullify-damage-with-onplayerattack.6711/#post-64575" class="internalLink">Nullify damage with OnPlayerAttack | Oxide</a>
                        <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Mughisi</a>,</span>
                        <a href="{{ '/threads/need-coding-advice-on-item-control.19891/#post-235574' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Jul 26, 2016 at 2:28 PM">Jul 26, 2016</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/need-coding-advice-on-item-control.19891/#post-235574' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/235574/permalink">#8</a>
                </div>
            </div>
        </div>
    </li>
</ol>
