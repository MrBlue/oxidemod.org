---
layout: forums
title: 'Damage Types'
breadcrumbs:
 - "Plugin Development": "/forums/plugin-development.105/"
 - "Rust Development": "/forums/rust-development.4/"
---
<div class="titleBar">
    <h1>
        <a href="{{ '/threads/damage-types.11155/' | prepend: site.baseurl }}">Damage Types</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="{{ '/forums/rust-development.4/' | prepend: site.baseurl }}">Rust Development</a>' started by <a class="username"
            dir="auto">Chinchy</a>, <a href="{{ '/threads/damage-types.11155/' | prepend: site.baseurl }}"><span class="DateTime" title="Aug 16, 2015 at 3:56 PM">Aug 16, 2015</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-120787" class="message" data-author="Chinchy">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Chinchy" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Chinchy</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">So I&#039;ll start off by being frank I&#039;m new to making mods for rust and could use a little help, the idea
                        behind my mod is dedicated raiding times for my server IE only certain times of the day explosions will do damage. I seem to have ran into a problem I can&#039;t seem to find
                        how to specify explosion damage against buildings and its completely stumped me. My Coding skills are very basic so plopping down a big wall of code isn&#039;t going to help me
                        to much a small explanation to what&#039;s going on would help a lot if anyone is interested in helping me.<br />
                        <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>using System.Collections.Generic;
using System;
using Rust;namespace Oxide.Plugins
{
   [Info(&quot;Build&amp;Raid&quot;, &quot;Chinchy&quot;, 0.0.1, ResourceId = 000)]
   [Description(&quot;This plugin sets specific times for raiding.&quot;)]
 
   public class Build&amp;Raid : RustPlugin
   {
       string RaidTime = &quot;20:00&quot;;
       string RaidEnd = &quot;24:00&quot;;
     
      void OnTick()
      {
        if (DateTime.Now.TimeOfDay = RaidTime)
        {
            BeginRaid();
        }  
        if (DateTime.Now.TimeOfDay = RaidEnd)
        {
            EndRaid();
        }      
      }  
    
      void BeginRaid()
      {
        
      }
    
      void EndRaid()
      {
        
      }
   }
}</pre>{% endraw %}
                        </div>I would also like to point out I&#039;m using this plugin as a basis to me learning C# as I mostly do all my stuff in BP for UE4 so the understanding is their but I have
                        a severe lack of code knowledge. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Chinchy</a>,</span>
                        <a href="{{ '/threads/damage-types.11155/' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime" title="Aug 16, 2015 at 3:56 PM">Aug 16,
                                2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/damage-types.11155/' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/120787/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-120800" class="message" data-author="Bacon8tor">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Bacon8tor" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Bacon8tor</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">I am in sort of the same boat as you, I am quite a beginner in C# i just really learn as I go. But from what I can
                        see(and sry this isnt a detailed example or anything ) OnEntityTakeDamage (<a href="http://docs.oxidemod.org/rust/#onentitytakedamage" target="_blank"
                            class="externalLink" rel="nofollow">http://docs.oxidemod.org/rust/#onentitytakedamage</a>) is what you want. I am trying to find exactly how to use it and if it would work
                        for walls. Hopefully this helps. I am stuck myself with mysql at the moment , If i find any more info to help you I will edit this post. <div class="messageTextEndMarker">
                            &nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Bacon8tor</a>,</span>
                        <a href="{{ '/threads/damage-types.11155/#post-120800' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Aug 16, 2015 at 4:25 PM">Aug 16, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/damage-types.11155/#post-120800' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/120800/permalink">#2</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-120802" class="message" data-author="Deicide666ra">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Deicide666ra" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Deicide666ra</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">Look @ the NoDecay mod I did for reference... It&#039;s built to mitigate Decay damage but the same method could
                        be applied to prevent ALL damage to structures. Also, keep in mind blocking only explosions will still allow for tool raiding... Tools have different types of damage (blunt,
                        slash, etc.) so you&#039;ll most likely want to just block all damage to building blocks. Be careful the collection of building blocks I use includes some deployables like
                        barricades and such so you might want to look at specific prefab names. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Deicide666ra</a>,</span>
                        <a href="{{ '/threads/damage-types.11155/#post-120802' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Aug 16, 2015 at 4:26 PM">Aug 16, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/damage-types.11155/#post-120802' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/120802/permalink">#3</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-120919" class="message" data-author="Chinchy">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Chinchy" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Chinchy</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Deicide666ra">
                            <aside>
                                <div class="attribution type">Deicide666ra said: <a href="#post-120802" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">Look @ the NoDecay mod I did for reference... It&#039;s built to mitigate Decay damage but the same method could be applied to prevent ALL damage
                                        to structures. Also, keep in mind blocking only explosions will still allow for tool raiding... Tools have different types of damage (blunt, slash, etc.) so
                                        you&#039;ll most likely want to just block all damage to building blocks. Be careful the collection of building blocks I use includes some deployables like
                                        barricades and such so you might want to look at specific prefab names.</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>So I have a couple questions first off what does =&gt; mean, in my mind it means equal to or greater than but for some reason you use it to load a config and I&#039;m not
                        sure as to what&#039;s going on, also <br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>void ProcessBuildingDamage(BuildingBlock block, HitInfo hitInfo)
        {
            var multiplier = 1.0f;
            string type = &quot;other&quot;;
            switch (block.grade)
            {
                case BuildingGrade.Enum.Twigs:
                    multiplier = c_twigMultiplier;
                    type = &quot;twig&quot;;
                    break;
                case BuildingGrade.Enum.Wood:
                    multiplier = c_woodMultiplier;
                    type = &quot;wood&quot;;
                    break;
                case BuildingGrade.Enum.Stone:
                    multiplier = c_stoneMultiplier;
                    type = &quot;stone&quot;;
                    break;
                case BuildingGrade.Enum.Metal:
                    multiplier = c_sheetMultiplier;
                    type = &quot;sheet&quot;;
                    break;
                case BuildingGrade.Enum.TopTier:
                    multiplier = c_armoredMultiplier;
                    type = &quot;armored&quot;;
                    break;
            };</pre>{% endraw %}
                        </div>This looks like the part that edits the damage multipliers on the server side, however I have never dealt with an Enum so I&#039;m not 100% sure this is what I&#039;m
                        looking for a small description of this snippet would be nice I&#039;ll also be sure to give you a credit for in making my mod as I would be borrowing from your work. <div
                            class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Chinchy</a>,</span>
                        <a href="{{ '/threads/damage-types.11155/#post-120919' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Aug 17, 2015 at 12:31 AM">Aug 17, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/damage-types.11155/#post-120919' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/120919/permalink">#4</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-120979" class="message" data-author="Deicide666ra">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Deicide666ra" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Deicide666ra</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">=&gt; can mean different things in different contexts but it basically revolves around lambda expressions which
                        are a bit hard to explain to the non-initiated. In this particular case, it&#039;s simply a shorthand version of the &quot;overrides&quot; keyword.<br />
                        <br /> So this:<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>void Loaded() =&gt; LoadConfigValues();</pre>{% endraw %}
                        </div>is the same as this:<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>void overrides Loaded() {
    LoadConfigValues();
}</pre>{% endraw %}
                        </div>That keyword is also abundantly used with LINQ, another pretty unorthodox syntax that allows you to query any data array or list-type structure like you would an SQL
                        table. This for example (assuming an array of strings containing player names for example):<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>var matches= playerArray.Where(playerName =&gt; playerName.Contains(&quot;bonez&quot;));</pre>{% endraw %}
                        </div>- The .Where is a LINQ function<br /> - playerName =&gt; just names the element from the list so you can use it to do whatever<br /> - What follows =&gt; a true/false
                        equation telling LINQ if you want that specific element or not<br />
                        <br /> The code here would return an array containing all players whose name contains &quot;bonez&quot; as a new IEnumerable (list, more or less).<br />
                        <br /> Now, back to your plugin... this is the important part in my code:<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>hitInfo.damageTypes.Scale(Rust.DamageType.Decay, multiplier);</pre>{% endraw %}
                        </div>This is what scales down or up the amount of damage of the current attack.<br />
                        <br /> So when you get an OnEntityTakeDamage, you&#039;ll want to:<br />
                        <br /> 1. Make sure it&#039;s a construction block<br /> 2. Make sure it&#039;s one of the block types we want to prevent damage to<br /> 3. Make sure the type of damage is one
                        that you want to block<br /> 4. If applicable, use hitInfo.damageTypes.Scale(Rust.DamageType.XXXX, 0); for each type of damage you want to prevent<br />
                        <br /> More info on each of these:<br />
                        <br /> 1. <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>var block = entity as BuildingBlock;</pre>{% endraw %}
                        </div>After this line, check if block is null. If it&#039;s null, it&#039;s NOT a block (could be an animal, resource node, player, whatever)<br />
                        <br /> 2. You probably don&#039;t want to prevent twig destruction, so check for block.grade<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>if (block.grade == BuildingGrade.Enum.Twigs) return;</pre>{% endraw %}
                        </div>You also want to make sure it&#039;s one of the building blocks that you want to prevent destruction for:<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>var blocksToProtect= new [] {
&quot;assets/bundled/prefabs/build/block.halfheight.prefab&quot;,
&quot;assets/bundled/prefabs/build/block.halfheight.slanted.prefab&quot;,
&quot;assets/bundled/prefabs/build/block.stair.lshape.prefab&quot;,
&quot;assets/bundled/prefabs/build/block.stair.ushape.prefab&quot;,
&quot;assets/bundled/prefabs/build/floor.prefab&quot;,
&quot;assets/bundled/prefabs/build/floor.triangle.prefab&quot;,
&quot;assets/bundled/prefabs/build/foundation.prefab&quot;,
&quot;assets/bundled/prefabs/build/foundation.steps.prefab&quot;,
&quot;assets/bundled/prefabs/build/foundation.triangle.prefab&quot;,
&quot;assets/bundled/prefabs/build/roof.prefab&quot;,
&quot;assets/bundled/prefabs/build/wall.prefab&quot;,
&quot;assets/bundled/prefabs/build/wall.doorway.prefab&quot;,
&quot;assets/bundled/prefabs/build/wall.window.prefab&quot;,
&quot;assets/bundled/prefabs/build/door.hinged.prefab&quot;,
&quot;assets/bundled/prefabs/build/pillar.prefab&quot;,
&quot;assets/bundled/prefabs/build/wall.low.prefab&quot;,
&quot;assets/bundled/prefabs/build/wall.window.bars.prefab&quot;,
&quot;assets/content/building/wall.external.high.stone/wall.external.high.stone.prefab&quot;,
&quot;assets/content/building/wall.external.high.wood/wall.external.high.wood.prefab&quot;
}if (blocksToProtect.Contains(block.fullName)) { // scale down dmg! }</pre>{% endraw %}
                        </div>4. Finally, make sure it&#039;s one of the damage types we want to block. You could prevent all damage.. but this would prevent decay as well. Maybe you want to scale to
                        zero all types of damage EXCEPT decay... Checl the hitInfo.Scale function (at start of msg). You can find the other enum values for it by decompiling Assembly-csharp.dll. <div
                            class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Deicide666ra</a>,</span>
                        <a href="{{ '/threads/damage-types.11155/#post-120979' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Aug 17, 2015 at 6:56 AM">Aug 17, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/damage-types.11155/#post-120979' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/120979/permalink">#5</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-121184" class="message" data-author="Chinchy">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Chinchy" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Chinchy</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">
                        <div class="bbCodeBlock bbCodeQuote" data-author="Deicide666ra">
                            <aside>
                                <div class="attribution type">Deicide666ra said: <a href="#post-120979" class="AttributionLink">&uarr;</a>
                                </div>
                                <blockquote class="quoteContainer">
                                    <div class="quote">*Snip*</div>
                                    <div class="quoteExpand">Click to expand...</div>
                                </blockquote>
                            </aside>
                        </div>Any program you would recommend for decompiling a DLL? also your breakdown was a great help. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Chinchy</a>,</span>
                        <a href="{{ '/threads/damage-types.11155/#post-121184' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Aug 17, 2015 at 10:23 PM">Aug 17, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/damage-types.11155/#post-121184' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/121184/permalink">#6</a>
                </div>
            </div>
        </div>
    </li>
    <li id="post-121193" class="message" data-author="baton256">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="baton256" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">baton256</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">I&#039;d recommend <a href="https://www.jetbrains.com/decompiler/" target="_blank" class="externalLink  rel="
                            nofollow">https://www.jetbrains.com/decompiler/</a><br /> Plus <a href="https://oxidemod.org/members/1115/" class="username" data-user="1115, @Wulf">@Wulf</a> has been
                        writing about <a href="http://www.telerik.com/products/decompiler.aspx" target="_blank" class="externalLink  rel="
                            nofollow">http://www.telerik.com/products/decompiler.aspx</a><br />
                        <br /> But I like the former more. <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">baton256</a>,</span>
                        <a href="{{ '/threads/damage-types.11155/#post-121193' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Aug 17, 2015 at 11:17 PM">Aug 17, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/damage-types.11155/#post-121193' | prepend: site.baseurl }}" title="Permalink" class="item muted postNumber hashPermalink OverlayTrigger"
                        data-href="posts/121193/permalink">#7</a>
                </div>
            </div>
        </div>
    </li>
</ol>
