---
layout: forums
title: 'Solved - Calling Libarary and Other Plugin&#039;s Functions Without Ref.'
breadcrumbs:
 - "Plugin Development": "/forums/plugin-development.105/"
 - "Rust Development": "/forums/rust-development.4/"
---
<div class="titleBar">
    <h1>
        <span class="prefix prefixGreen">Solved</span> <a href="{{ '/threads/calling-libarary-and-other-plugins-functions-without-ref.6857/' | prepend: site.baseurl }}">Calling Libarary and Other
            Plugin&#039;s Functions Without Ref.</a>
    </h1>
    <p id="pageDescription" class="muted">Discussion in '<a href="{{ '/forums/rust-development.4/' | prepend: site.baseurl }}">Rust Development</a>' started by <a class="username"
            dir="auto">Feramor</a>, <a href="{{ '/threads/calling-libarary-and-other-plugins-functions-without-ref.6857/' | prepend: site.baseurl }}"><span class="DateTime"
                title="Feb 14, 2015 at 7:02 PM">Feb 14, 2015</span></a>.
    </p>
</div>
<ol class="messageList" id="messageList">
    <li id="post-67002" class="message" data-author="Feramor">
        <div class="messageUserInfo">
            <div class="messageUserBlock">
                <div class="avatarHolder">
                    <span class="helper"></span>
                    <a class="avatar Avm" data-avatarhtml="true"><img src="{{ '/assets/styles/oxide/logo.og.png' | prepend: site.baseurl }}" width="96" height="96" alt="Feramor" /></a>
                </div>
                <h3 class="userText">
                    <a class="username" dir="auto">Feramor</a>
                </h3>
                <span class="arrow"></span>
            </div>
        </div>
        <div class="messageInfo primaryContent">
            <div class="messageContent">
                <article>
                    <blockquote class="messageText SelectQuoteContainer ugc baseHtml">Calling Library functions with C# I used RustWeb Library to demonstrate.<br /> To get structure and function list
                        of library<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>        List&lt;string&gt; GetFunctionList(string LibraryName)
        {
            List&lt;string&gt; FunctionList = new List&lt;string&gt;();
            Library CurrentLib = Interface.GetMod().GetLibrary&lt;Library&gt;(LibraryName);
            if (CurrentLib != null)
            {
                foreach(string Current in CurrentLib.GetFunctionNames())
                {
                    System.Reflection.MethodInfo CurrentMethod = CurrentLib.GetFunction(Current);
                    FunctionList.Add(CurrentMethod.ToString());
                }
            }
            return FunctionList;
        }</pre>{% endraw %}
                        </div>Example<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>            List&lt;string&gt; FunctionList = GetFunctionList(&quot;RustWeb&quot;);
            foreach (string Current in FunctionList)
            {
                Puts(Current);
            }</pre>{% endraw %}
                        </div>
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>[2/14/2015 7:53:52 PM] [Oxide] 7:53 PM [Info] System.String GetRootDir()
[2/14/2015 7:53:52 PM] [Oxide] 7:53 PM [Info] System.String GetIp()
[2/14/2015 7:53:52 PM] [Oxide] 7:53 PM [Info] Int32 GetPort()
[2/14/2015 7:53:52 PM] [Oxide] 7:53 PM [Info] System.String GetConfigString(System.String, System.String)
[2/14/2015 7:53:52 PM] [Oxide] 7:53 PM [Info] Boolean GetConfigBool(System.String, Boolean)
[2/14/2015 7:53:52 PM] [Oxide] 7:53 PM [Info] Int32 GetConfigBool(System.String, Int32)
[2/14/2015 7:53:52 PM] [Oxide] 7:53 PM [Info] Boolean AddFriend(System.String, System.String)
[2/14/2015 7:53:52 PM] [Oxide] 7:53 PM [Info] Boolean DeleteFriend(System.String, System.String)
[2/14/2015 7:53:52 PM] [Oxide] 7:53 PM [Info] Boolean HasFriend(System.String, System.String, Boolean)</pre>{% endraw %}
                        </div>To run a Library Function<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>        object CallLibraryFunction(string LibraryName,string FunctionName,params object[]  parametersArray)
        {
            Library CurrentLib = Interface.GetMod().GetLibrary&lt;Library&gt;(LibraryName);
            if (CurrentLib != null)
             {                 Type CurrentType = CurrentLib.GetType();
                 object classInstance = Activator.CreateInstance(CurrentType, null);
                 System.Reflection.MethodInfo CurrentMethod = CurrentLib.GetFunction(FunctionName);
                 System.Reflection.ParameterInfo[] parameters = CurrentMethod.GetParameters();
                 if (parameters.Length == parametersArray.Length)
                 {
                     if (parameters.Length == 0)
                     {
                         return CurrentMethod.Invoke(classInstance, null);
                     }
                     else
                     {
                         return CurrentMethod.Invoke(classInstance, parametersArray);
                     }
                 }
                 else
                     return null;
             }
            else
            {
                return null;
            }
        }</pre>{% endraw %}
                        </div>Example<br /> -With no paramater<br /> Calling GetRootDir from RustWeb<br /> string RootDir = (string)
                        CallLibraryFunction(&quot;RustWeb&quot;,&quot;GetRootDir&quot;);<br /> -With paramater<br />
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>        void GetShares(BasePlayer Player)
        {
            foreach (BasePlayer Current in BasePlayer.activePlayerList)
            {
                bool ISharing = (bool)CallLibraryFunction(&quot;RustWeb&quot;, &quot;HasFriend&quot;, new object[] { Player.userID.ToString(), Current.userID.ToString(), false });
                bool HeSharing = (bool)CallLibraryFunction(&quot;RustWeb&quot;, &quot;HasFriend&quot;, new object[] { Current.userID.ToString(), Player.userID.ToString(), false });
                if (ISharing)
                {
                    Puts(&quot;Test1&quot;);
                    Current.SendConsoleCommand(&quot;chat.add&quot;, Player.userID, string.Format(&quot;Code Test : Currently you are sharing location with {0}.&quot;, Current.displayName.ToString()), 1.0);
                }
                if (HeSharing)
                {
                    Puts(&quot;Test2&quot;);
                    Current.SendConsoleCommand(&quot;chat.add&quot;, Player.userID, string.Format(&quot;Code Test : Currently {0} are sharing location with you.&quot;, Current.displayName.ToString()), 1.0);
                }
            }
        }</pre>{% endraw %}
                        </div>
                        <div class="bbCodeBlock bbCodeCode">
                            <div class="type">Code:</div>
                            {% raw %}<pre>        object CallPluginFunction(string PluginName,string Function, params object[]  parametersArray)
        {
            object retrun_val = null;
            Core.Libraries.Plugins loadedPlugins = Interface.GetMod().GetLibrary&lt;Core.Libraries.Plugins&gt;(&quot;Plugins&quot;);
            Plugin CurrentPlugin = loadedPlugins.Find(PluginName);
            if (CurrentPlugin != null)
            {
                try
                {
                    retrun_val = CurrentPlugin.CallHook(Function, parametersArray);
                }
                catch { }
            }
            return retrun_val;
        }</pre>{% endraw %}
                        </div>I used RustDB plugin to call sendToAdmins function from C#<br /> CallPluginFunction(&quot;RustDB&quot;,&quot;sendToAdmins&quot;,new object[] {&quot;Call Faction
                        Test&quot;}); <div class="messageTextEndMarker">&nbsp;</div>
                    </blockquote>
                </article>
            </div>
            <div class="messageMeta ToggleTriggerAnchor">
                <div class="privateControls">
                    <span class="item muted">
                        <span class="authorEnd"><a class="username author" dir="auto">Feramor</a>,</span>
                        <a href="{{ '/threads/calling-libarary-and-other-plugins-functions-without-ref.6857/' | prepend: site.baseurl }}" title="Permalink" class="datePermalink"><span class="DateTime"
                                title="Feb 14, 2015 at 7:02 PM">Feb 14, 2015</span></a>
                    </span>
                </div>
                <div class="publicControls">
                    <a href="{{ '/threads/calling-libarary-and-other-plugins-functions-without-ref.6857/' | prepend: site.baseurl }}" title="Permalink"
                        class="item muted postNumber hashPermalink OverlayTrigger" data-href="posts/67002/permalink">#1</a>
                </div>
            </div>
        </div>
    </li>
</ol>
